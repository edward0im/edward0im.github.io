---
layout: post
title: (Geometry) Notes on Multiple View Geometry Part 1
description:
date: 2020-06-03
categories: [Mathematics]
tag: [Photogrammetry, Geometry, Computer Vision, SLAM]
use_math: true
comments: true
---
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org939d92b">1. Projective geometry and transformations in 2D</a>
<ul>
<li><a href="#orga832093">1.1. The 2D projective plane</a>
<ul>
<li><a href="#org3fc02cd">1.1.1. Points and lines</a></li>
<li><a href="#org5656ec7">1.1.2. Homogeneous representation of line</a></li>
<li><a href="#org4059fb2">1.1.3. Homogeneous representation of points</a></li>
<li><a href="#orgfe5003d">1.1.4. Degree of freedom (dof)</a></li>
<li><a href="#org3e4f003">1.1.5. Intersection of lines</a></li>
<li><a href="#orgef72f6c">1.1.6. Line joining points</a></li>
</ul>
</li>
<li><a href="#orgbfbffb2">1.2. Ideal points and the line at infinity</a>
<ul>
<li><a href="#org2038504">1.2.1. Intersection of parallel lines</a></li>
<li><a href="#org3c7546a">1.2.2. Ideal points and the line at infinity</a></li>
<li><a href="#org773282c">1.2.3. A model for the projective plane</a></li>
<li><a href="#org45777bb">1.2.4. Duality</a></li>
</ul>
</li>
<li><a href="#orgb8e7ae9">1.3. Conics and dual conics</a>
<ul>
<li><a href="#org444e997">1.3.1. Five points define a conic</a></li>
<li><a href="#org0e05942">1.3.2. Tangent lines to conics</a></li>
<li><a href="#orgcde8919">1.3.3. Dual conics</a></li>
<li><a href="#orgfe2e1b9">1.3.4. Proof</a></li>
</ul>
</li>
<li><a href="#orgc4e6a57">1.4. Projective transformations</a></li>
<li><a href="#org0436097">1.5. A hierarchy of transformations</a>
<ul>
<li><a href="#org7fef94f">1.5.1. Class 1: isometries</a></li>
<li><a href="#org6da788c">1.5.2. Class 2: similarity transformations</a></li>
<li><a href="#org80181c3">1.5.3. Class 3: affine transformations</a></li>
<li><a href="#orga2a4868">1.5.4. Class 4: projective transformations</a></li>
</ul>
</li>
<li><a href="#orgc466ef6">1.6. Decomposition of a projective transformation</a></li>
<li><a href="#org0bcdd0d">1.7. Recovery of affine and metric properties from images</a>
<ul>
<li><a href="#org2628956">1.7.1. The line at infinity</a></li>
<li><a href="#org05ab077">1.7.2. Recovery of affine properties from images</a></li>
<li><a href="#orgc8f12b6">1.7.3. Recovery of metric properties from images</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orga736afc">2. More Single View Geometry</a>
<ul>
<li><a href="#org41ea6be">2.1. Camera calibration and the image of the absolute conic</a>
<ul>
<li><a href="#org754061c">2.1.1. Result 8.15</a></li>
<li><a href="#orgcf922fc">2.1.2. Result 8.16</a></li>
</ul>
</li>
<li><a href="#orgf1490b1">2.2. The image of the absolute conic</a></li>
<li><a href="#orga81efc8">2.3. Orthogonality and $\mathbf{w}$</a></li>
<li><a href="#org7ea3ec1">2.4. Vanishing points and vanishing lines</a>
<ul>
<li><a href="#orgfe4dad9">2.4.1. Camera rotation from vanishing points</a></li>
</ul>
</li>
<li><a href="#orgcda6f8e">2.5. Vanishing Lines</a></li>
<li><a href="#org523f3bf">2.6. Orthogonality relationships amongst vanishing points and lines</a></li>
<li><a href="#orga0c70ae">2.7. Affine 3D measurements and reconstruction</a></li>
<li><a href="#org4c64600">2.8. Determining camera calibration $\mathbf{K}$from a single view</a></li>
<li><a href="#org2b9d73c">2.9. Calibration from three orthogonal vanishing points</a></li>
<li><a href="#orge3c4130">2.10. Computation of focal length and principal point using vanishing point and vanishing line</a></li>
<li><a href="#orge6c269f">2.11. The calibrating conic</a></li>
</ul>
</li>
<li><a href="#orga82f681">3. References</a></li>
<li><a href="#orgf4ac916">4. Closure</a></li>
</ul>
</div>
</div>

<div id="outline-container-org939d92b" class="outline-2">
<h2 id="org939d92b"><span class="section-number-2">1</span> Projective geometry and transformations in 2D</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orga832093" class="outline-3">
<h3 id="orga832093"><span class="section-number-3">1.1</span> The 2D projective plane</h3>
<div class="outline-text-3" id="text-1-1">
<p>
일반적으로 평면 위의 점 $\mathbf{x}$는 $(x,y) &isin; \mathbb{R}^{2}$와 같이 표현한다. $\mathbb{R}^{2}$가 벡터공간(vector space)이라고 하면 $\mathbf{x}$는 하나의 벡터로 나타낼 수 있다. 또한, 두 점 $\mathbf{x}_{1}, \mathbf{x}_{2}$을 포함하는 직선 $\mathbf{l}$은 두 벡터를 뺌으로써 표현할 수 있다. 해당 섹션에서는 평면 위의 점과 직선에 대해 하나의 동일한 벡터로 표현할 수 있게 해주는 homogeneous notation에 대해 설명한다.
</p>
</div>

<div id="outline-container-org3fc02cd" class="outline-4">
<h4 id="org3fc02cd"><span class="section-number-4">1.1.1</span> Points and lines</h4>
</div>

<div id="outline-container-org5656ec7" class="outline-4">
<h4 id="org5656ec7"><span class="section-number-4">1.1.2</span> Homogeneous representation of line</h4>
<div class="outline-text-4" id="text-1-1-2">

<div class="figure">
<p><img src="/pictures/200607_mvg/01.PNG" alt="01.PNG" align="center" width="400px" />
</p>
</div>

<p>
임의의 직선 $\mathbf{l}$은 다음과 같이 표현할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}: ax + by + c = 0 \quad (a,b) \neq 0
  \end{aligned}
\end{equation}
<p>
직선 $\mathbf{l}$위에 임의의 한 점 $\mathbf{x}= (x,y,1)$이 존재하면 직선 $ax+by+c=0$공식에 따라 직선 $\mathbf{l}$은 다음과 같이 표현할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{l} : (a,b,c) \\
  \end{aligned}
\end{equation}
<p>
이 때, $(a,b,c)$는 직선 $\mathbf{l}$을 유일하게 표현하지 않는다. $(ka,kb,kc)$와 같이 0이 아닌 임의의 상수 $k$를 곱해도 동일한 직선 $\mathbf{l}$을 표현할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}: (ka,kb,kc)
  \end{aligned}
\end{equation}
<p>
따라서 <b>평면 위의 직선 $\mathbf{l}$은 스케일 값에 상관없이 모두 같은 직선을 의미</b> 한다. 이러한 동치관계(equivalent)에 있는 모든 벡터를 homogeneous 벡터라고 한다. <b>$\mathbb{R}^{3}$공간에서 동치관계에 있는 모든 벡터들의 집합을 사영공간(projective space) $\mathbb{P}^{2}$이라고 한다.</b> 
</p>
</div>
</div>

<div id="outline-container-org4059fb2" class="outline-4">
<h4 id="org4059fb2"><span class="section-number-4">1.1.3</span> Homogeneous representation of points</h4>
<div class="outline-text-4" id="text-1-1-3">
<p>
직선 $\mathbf{l}=(a,b,c)^{\intercal}$과 직선 위의 한 점 $\mathbf{x}=(x,y)^{\intercal}$사이에는 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    ax+by+c=0
  \end{aligned}
\end{equation}
<p>
이는 두 벡터 $\mathbf{l}$과 $\mathbf{x}$의 내적으로 표현할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \begin{pmatrix} x&amp;y&amp;1 \end{pmatrix} \begin{pmatrix} a\\b\\c \end{pmatrix} = \begin{pmatrix} x&amp;y&amp;1 \end{pmatrix}\mathbf{l} = 0
  \end{aligned}
\end{equation}
<p>
이는 직선 위의 한 점 $\mathbf{x}=(x,y)$좌표 맨 끝에 1을 추가하여 직선과 내적한 것으로 볼 수 있다. 직선 $\mathbf{l}$는 스케일 값에 상관없이 하나의 직선을 표현할 수 있으므로 $(x,y,1)\mathbf{l}=0$이 성립한다는 전제하에 모든 $k$값에 대해 $(kx,ky,k)\mathbf{l}=0$또한 성립한다. 따라서 <b>임의의 상수 $k$에 대해서 $(kx,ky,k)$는 $\mathbb{R}^{2}$공간에서 한 점 $\mathbf{x}=(x,y)$를 의미하므로 직선과 동일하게 점 또한 homogeneous 벡터로 표현할 수 있다.</b> 이를 일반화하여 표현하면 임의의 점 $\mathbf{x}=(x_{1}, x_{2},x_{3})^{\intercal}$는 $\mathbb{R}^{2}$공간 상의 한 점 $(x_{1}/x_{3}, x_{2}/x_{3})$을 표현한다.
</p>


<div class="figure">
<p><img src="/pictures/200607_mvg/02.PNG" alt="02.PNG" align="center" width="400px" />
</p>
</div>

<p>
따라서 $\mathbb{P}^{2}$공간 상에서 임의의 한 점 $\mathbf{x}$가 직선 $\mathbf{l}$위에 존재할 경우
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{\intercal}\mathbf{l} &amp; = \begin{bmatrix} x&amp;y&amp;1 \end{bmatrix} \begin{bmatrix} a\\b\\c \end{bmatrix} \\
    &amp; = ax + by + c \\
    &amp; = 0 \\
    &amp; \therefore \mathbf{x}^{\intercal}\mathbf{l} = 0
  \end{aligned}
\end{equation}
<p>
공식이 성립한다.
</p>
</div>
</div>

<div id="outline-container-orgfe5003d" class="outline-4">
<h4 id="orgfe5003d"><span class="section-number-4">1.1.4</span> Degree of freedom (dof)</h4>
<div class="outline-text-4" id="text-1-1-4">
<p>
$\mathbb{P}^{2}$공간에서 하나의 점이 유일하게 결정되기 위해서는 반드시 2개의 값 $(x,y)$가 주어져야 한다. 직선을 유일하게 결정하기 위해서는 두 개의 독립적인 $\{a:b:c\}$비율이 주어져야 한다. 이와 같이 $\mathbb{P}^{2}$공간에서 점과 직선은 2자유도를 가진다.
</p>
</div>
</div>

<div id="outline-container-org3e4f003" class="outline-4">
<h4 id="org3e4f003"><span class="section-number-4">1.1.5</span> Intersection of lines</h4>
<div class="outline-text-4" id="text-1-1-5">

<div class="figure">
<p><img src="/pictures/200607_mvg/03.PNG" alt="03.PNG" align="center" width="400px" />
</p>
</div>

<p>
$\mathbb{P}^{2}$공간 상의 두 개의 직선 $\mathbf{l}, \mathbf{l}^{&prime;}$이 주어졌을 때 두 직선의 방정식은 다음과 같이 쓸 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}^{\intercal}\mathbf{l} = 0 \\
    &amp; \mathbf{x}^{\intercal}\mathbf{l}^{\prime} = 0 \\
  \end{aligned}
\end{equation}
<p>
이 때, 교차점 $\mathbf{x}$는 스케일 값에 관계없이 하나의 점을 의미하므로 두 직선 $\mathbf{l}, \mathbf{l}^{&prime;}$의 cross product의 배수로 나타낼 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x} = \mathbf{l} \times \mathbf{l}^{\prime}
  \end{aligned}
\end{equation}
<p>
예를 들어, $\mathbb{P}^{2}$공간에 $x=1$인 직선과 $y=1$인 직선이 존재하면 두 직선은 $(1,1)$에서 교점을 가진다. 이를 위 공식을 이용해서 구해보면 직선 $x=1$은 $-x+1=0 &rArr; (-1,0,1)^{\intercal}$로 표현할 수 있고 직선 $y=1$은 $-y+1=0 &rArr; (0,-1,1)^{\intercal}$로 표현할 수 있으므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x} = \mathbf{l}\times \mathbf{l}^{\prime} = \begin{vmatrix} \mathbf{I}&amp;\mathbf{j}&amp;\mathbf{k} \\ -1&amp;0&amp;1 \\ 0&amp;-1&amp;1 \end{vmatrix} = \begin{pmatrix} 1\\1\\1 \end{pmatrix}
  \end{aligned}
\end{equation}
<p>
가 성립한다. $(1,1,1)^{\intercal}$는 $\mathbb{R}^{2}$공간에서 $(1,1)$을 의미한다.
</p>
</div>
</div>

<div id="outline-container-orgef72f6c" class="outline-4">
<h4 id="orgef72f6c"><span class="section-number-4">1.1.6</span> Line joining points</h4>
<div class="outline-text-4" id="text-1-1-6">
<p>
두 직선의 교점을 구하는 공식과 유사하게 $\mathbb{P}^{2}$공간에서 두 점 $\mathbf{x}, \mathbf{x}^{&prime;}$가 주어졌을 때 두 점을 지나는 직선 $\mathbf{l}$은 다음과 같이 구할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l} = \mathbf{x} \times \mathbf{x}^{\prime}
  \end{aligned}
\end{equation}
</div>
</div>
</div>

<div id="outline-container-orgbfbffb2" class="outline-3">
<h3 id="orgbfbffb2"><span class="section-number-3">1.2</span> Ideal points and the line at infinity</h3>
<div class="outline-text-3" id="text-1-2">

<div class="figure">
<p><img src="/pictures/200607_mvg/05.PNG" alt="05.PNG" align="center" width="700px" />
</p>
</div>
</div>

<div id="outline-container-org2038504" class="outline-4">
<h4 id="org2038504"><span class="section-number-4">1.2.1</span> Intersection of parallel lines</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
만약 <b>두 직선 $\mathbf{l}, \mathbf{l}^{&prime;}$이 평행한 경우 두 직선의 교차점은 $\mathbb{R}^{2}$공간에서는 만나지 않지만 $\mathbb{P}^{2}$공간에서는 만난다.</b>
</p>

\begin{equation}
  \begin{aligned}
    \mathbb{P}^{2} = \mathbb{R}^{2} \cup \mathbf{l}_{\infty}
  \end{aligned}
\end{equation}
<p>
평행한 두 직선 $\mathbf{l}, \mathbf{l}^{&prime;}$은 다음과 같이 나타낼 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{l}: (a,b,c)^{\intercal} \\
    &amp; \mathbf{l}^{\prime}: (a,b,c^{\prime})^{\intercal} \\
  \end{aligned}
\end{equation}
<p>
평행한 두 직선은 무한대에 위치한 점 $\mathbf{x}_{&infin;}$에서 교차하므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}_{\infty} &amp; = \mathbf{l} \times \mathbf{l}^{\prime} \\
    &amp; = (c^{\prime}-c)\begin{pmatrix} b \\ -a \\ 0 \end{pmatrix} \sim \begin{pmatrix} b \\ -a \\ 0 \end{pmatrix}
  \end{aligned}
\end{equation}
<p>
공식이 성립한다. 이러한 <b>무한대 점 $\mathbf{x}_{&infin;}$를 $\mathbb{R}^{2}$공간으로 변환하면 $(b/0,-a/0)$이 되어 유효하지 않는 점으로 변환된다. 따라서 $\mathbb{P}^{2}$공간에서 무한대 점 $\mathbf{x}_{&infin;}=(x,y,0)^{\intercal}$는 $\mathbb{R}^{2}$공간으로 변환되지 않는다.</b> 이를 통해 euclidean 공간에서 평행한 두 직선은 만나지 않지만 projective 공간에서는 무한대에서 만난다는 것을 알 수 있다.
</p>

<p>
예를 들어 $\mathbb{P}^{2}$공간에 평행한 두 직선 $x=1$과 $x=2$가 주어지면 두 직선은 무한대에서 교차한다. 이를 homogeneous notation으로 표현하면 $-x+1=0 \Rightarrow (-1,0,1)^{\intercal}$그리고 $-x+2=0 &rArr;(-1,0,2)^{\intercal}$이므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}_{\infty} = \mathbf{l} \times \mathbf{l}^{\prime} = \begin{vmatrix} \mathbf{I}&amp;\mathbf{j}&amp;\mathbf{k} \\ -1&amp;0&amp;1 \\ -1&amp;0&amp;2 \end{vmatrix} = \begin{pmatrix} 0\\1\\0 \end{pmatrix}
  \end{aligned}
\end{equation}
<p>
이 된다. 이 때, $\mathbf{x}_{&infin;}$는 y축 방향의 무한대 점을 의미한다.
</p>
</div>
</div>

<div id="outline-container-org3c7546a" class="outline-4">
<h4 id="org3c7546a"><span class="section-number-4">1.2.2</span> Ideal points and the line at infinity</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
homogeneous 벡터 $\mathbf{x}=(x_{1},x_{2},x_{3})^{\intercal}$는 $x_{3} &ne; 0$일 때 $\mathbb{R}^{2}$공간 상의 한 점과 대응된다. 그러나 $x_{3} =0$이면 해당 점은 $\mathbb{R}^{2}$공간과 대응되지 않고 $\mathbb{P}^{2}$공간에만 존재하는데 이를 ideal point 또는 무한대 점(point at infinity)라고 부른다. 무한대 점은
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}_{\infty} = \begin{pmatrix} x_{1}&amp;x_{2}&amp;0 \end{pmatrix}^{\intercal}
  \end{aligned}
\end{equation}
<p>
와 같은 형태를 갖는다. 이러한 무한대 점들은 특정한 직선 위에 존재하게 되는데 이러한 직선을 무한대 직선(line at infinity)라고 한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}_{\infty} = \begin{pmatrix} 0&amp;0&amp;1 \end{pmatrix}^{\intercal}
  \end{aligned}
\end{equation}
<p>
따라서 $\mathbf{x}_{&infin;}^{\intercal}\mathbf{l}_{&infin;} = \begin{pmatrix}x_{1}&amp;x_{2}&amp;0 \end{pmatrix}\begin{pmatrix}0&amp;0&amp;1 \end{pmatrix}^{\intercal} = 0$이 성립한다.
</p>

<p>
이전 섹션에서 설명한 것과 같이 두 평행한 직선 $\mathbf{l}=(a,b,c)^{\intercal}$과 $\mathbf{l}_{&infin;}^{&prime;}=(a,b,c^{&prime;})^{\intercal}$는 무한대 점 $\mathbf{x}_{&infin;}=(b,-a,0)^{\intercal}$에서 교차한다는 것을 알 수 있다. 이를 통해 <b>$\mathbb{R}^{2}$공간에서는 평행한 직선들은 서로 교차하지 않지만 $\mathbb{P}^{2}$공간에서는 서로 다른 두 직선은 반드시 한 점에서 교차한다는 것을 알 수 있다.</b>
</p>
</div>
</div>

<div id="outline-container-org773282c" class="outline-4">
<h4 id="org773282c"><span class="section-number-4">1.2.3</span> A model for the projective plane</h4>
<div class="outline-text-4" id="text-1-2-3">

<div class="figure">
<p><img src="/pictures/200607_mvg/06.png" alt="06.png" align="center" width="400px" />
</p>
</div>

<p>
<b>기하학적으로 봤을 때, $\mathbb{P}^{2}$는 3차원 공간 $\mathbb{R}^{3}$에서 원점을 지나는 모든 직선들의 집합</b> 을 의미한다. $\mathbb{P}^{2}$상의 모든 벡터를 $k(x_{1},x_{2},x_{3})^{\intercal}$라고 했을 때 $k$값에 따라 한 점 $(x_{1},x_{2},x_{3})^{\intercal}$의 위치가 결정된다. $k$는 실수이므로 $k=0$인 경우 원점을 의미하고 $k&ne;0$인 경우 무수한 점들의 집합인 직선이 된다. 반대로, 이러한 $\mathbb{R}^{3}$공간 상의 원점을 통과하는 한 직선은 $\mathbb{P}^{2}$공간 상의 한 점으로 볼 수 있다. 이를 확장하면 <b>$\mathbb{P}^{2}$공간 상의 직선 $\mathbf{l}$은 $\mathbb{R}^{3}$공간 상의 원점을 포함하는 평면 $&pi;$에 대응</b> 한다.
</p>

<p>
<b>$\mathbb{P}^{2}$공간에서는 스케일 값에 관계없이 한 점을 유일하게 정의할 수 있으므로 마지막 항 $x_{3}$로 좌표값을 나눈 $(x_{1}/x_{3}, x_{2}/x_{3}, 1)$를 일반적으로 한 점을 표현하는 대표값으로 간주한다.</b> 따라서 $\mathbb{R}^{3}$공간 상의 원점을 지나는 직선과 $x_{3}=1$인 평면이 교차하는 점이 곧 $\mathbb{P}^{2}$공간 상의 한 점이 된다.
</p>
</div>
</div>

<div id="outline-container-org45777bb" class="outline-4">
<h4 id="org45777bb"><span class="section-number-4">1.2.4</span> Duality</h4>
<div class="outline-text-4" id="text-1-2-4">
<p>
<b>$\mathbb{P}^{2}$공간에서는 점과 직선이 대칭성(duality)을 가진다.</b> 예를 들어 직선 $\mathbf{l}$위의 한 점 $\mathbf{x}$은 $\mathbf{x}^{\intercal}\mathbf{l}=0$또는 $\mathbf{l}^{\intercal}\mathbf{x}=0$과 같이 두 가지 방법으로 표현할 수 있다. 또한, 두 직선 $\mathbf{l},\mathbf{l}^{&prime;}$이 교차하는 한 점은 $\mathbf{x}=\mathbf{l}&times; \mathbf{l}^{&prime;}$이고 두 점 $\mathbf{x}, \mathbf{x}^{&prime;}$을 통과하는 직선 $\mathbf{l}$은 $\mathbf{l}= \mathbf{x}&times; \mathbf{x}^{&prime;}$으로 표현할 수 있는데 이는 기본적으로 점과 직선의 위치가 바뀌었을 뿐 동일한 공식을 사용한다.
</p>

<p>
이와 같이 <b>$\mathbb{P}^{2}$공간에서는 점과 직선이 동일한 공식에 대해 위치를 바꾸어도 성립하는 대칭성을 가진다. 즉, 두 점을 통과하는 직선의 공식은 두 직선이 교차하는 한 점의 공식과 대칭이다.</b>
</p>
</div>
</div>
</div>

<div id="outline-container-orgb8e7ae9" class="outline-3">
<h3 id="orgb8e7ae9"><span class="section-number-3">1.3</span> Conics and dual conics</h3>
<div class="outline-text-3" id="text-1-3">
<p>
conic이란 평면에서 이차식으로 정의된 곡선을 의미한다. 일반적인 공식으로는
</p>

\begin{equation}
  \begin{aligned}
    ax^{2} + bxy +cy^{2} +dx+ ey + f = 0
  \end{aligned}
\end{equation}
<p>
과 같으며 계수 값에 따라 원, 타원, 쌍곡선, 포물선 등 다양한 곡선 형태로 표현될 수 있다. conic을 homogeneous form으로 나타내면
</p>

\begin{equation}
  \begin{aligned}
    ax^{2} + bxy +cy^{2} +dxz+ eyz + fz^{2} = 0
  \end{aligned}
\end{equation}
<p>
과 같고 이를 행렬 형태로 정리하면
</p>

\begin{equation}
  \begin{aligned}
    \begin{pmatrix} x&amp;y&amp;z \end{pmatrix} \begin{pmatrix} a&amp;b/2&amp;d/2 \\ b/2&amp;c&amp;e/2 \\ d/2&amp;e/2&amp;f \end{pmatrix} \begin{pmatrix} x\\y\\z \end{pmatrix} =0 
  \end{aligned}
\end{equation}
<p>
꼴로 쓸 수 있으며 이 때 대칭행렬 $\begin{pmatrix}a&amp;b/2&amp;d/2 \\ b/2&amp;c&amp;e/2 \\ d/2&amp;e/2&amp;f \end{pmatrix}$를 conic $\mathbf{C}$라고 한다.
</p>
</div>

<div id="outline-container-org444e997" class="outline-4">
<h4 id="org444e997"><span class="section-number-4">1.3.1</span> Five points define a conic</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
conic $\mathbf{C}$가 유일하게 결정되기 위해서는 다섯개의 점이 필요하다. 하나의 점에 대한 conic 방정식은 다음과 같이 다시 쓸 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; ax^{2} + bxy +cy^{2} +dxz+ eyz + fz^{2} = 0 \\
    &amp; \Rightarrow \begin{pmatrix} x_{i}^{2}&amp;x_{i}y_{i}&amp;y_{i}^{2}&amp;x_{i}&amp;y_{i}&amp;1 \end{pmatrix} \mathbf{c} = 0
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{c}= \begin{pmatrix}a&amp;b&amp;c&amp;d&amp;e&amp;f \end{pmatrix}&isin; \mathbb{R}^{6}$인 벡터를 의미한다. $\mathbf{c}$는 5 자유도를 가지므로 
</p>

\begin{equation}
  \begin{aligned}
    &amp; \underbrace{\begin{bmatrix}
      x_{1}^{2}&amp;x_{1}y_{1}&amp;y_{1}^{2}&amp;x_{1}&amp;y_{1}&amp;1 \\
      x_{2}^{2}&amp;x_{2}y_{2}&amp;y_{2}^{2}&amp;x_{2}&amp;y_{2}&amp;1 \\
      x_{3}^{2}&amp;x_{3}y_{3}&amp;y_{3}^{2}&amp;x_{3}&amp;y_{3}&amp;1 \\
      x_{4}^{2}&amp;x_{4}y_{4}&amp;y_{4}^{2}&amp;x_{4}&amp;y_{4}&amp;1 \\
      x_{5}^{2}&amp;x_{5}y_{5}&amp;y_{5}^{2}&amp;x_{5}&amp;y_{5}&amp;1 \\
    \end{bmatrix}}_{\mathbf{A}} \mathbf{c} = 0
  \end{aligned}
\end{equation}
<p>
위 식과 같이 <b>총 5개의 점을 사용하면 $\mathbf{A} \in \mathbb{R}^{5\times 6}$행렬의 null space 벡터가 유일한 $\mathbf{c}$의 해가 되고 conic을 유일하게 결정한다.</b>
</p>
</div>
</div>

<div id="outline-container-org0e05942" class="outline-4">
<h4 id="org0e05942"><span class="section-number-4">1.3.2</span> Tangent lines to conics</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
conic $\mathbf{C}$위의 한 점 $\mathbf{x}$에서 접선 $\mathbf{l}$은
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l} = \mathbf{Cx}
  \end{aligned}
\end{equation}
<p>
와 같이 쓸 수 있다.
</p>

<p>
임의의 두 직선 $\mathbf{l},\mathbf{m}$을 포함하는 conic $\mathbf{C}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{C} = \mathbf{l}\mathbf{m}^{\intercal} + \mathbf{m}\mathbf{l}^{\intercal}
  \end{aligned}
\end{equation}
<p>
과 같이 쓸 수 있다.
</p>
</div>
</div>

<div id="outline-container-orgcde8919" class="outline-4">
<h4 id="orgcde8919"><span class="section-number-4">1.3.3</span> Dual conics</h4>
<div class="outline-text-4" id="text-1-3-3">
<p>
<b>projective space $\mathbb{P}^{n}$은 $\mathbb{R}^{n+1}$공간 상의 원점을 지나는 직선들의 집합(1차원 부분 선형공간)을 의미</b> 한다. 이와 대칭을 이루는 <b>dual projective space $(\mathbb{P}^{n})^{&or;}$는 $\mathbb{R}^{n}$공간 상 n차원 부분 선형공간들의 집합을 의미</b> 한다.
</p>

<p>
n차원 부분 선형공간 $\mathbf{H}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H} = \{\sum_{i=0}^{n}a_{i}x_{i}=0 \ | \ a_{i}\neq 0 \ \text{ for some i}\}.
  \end{aligned}
\end{equation}
<p>
이 때 $a_{0},&ctdot;,a_{n} &isin; \mathbb{P}^{n}$을 하나의 projective space로 생각할 수 있고 하나의 dual projective space는 하나의 proejctive space와 대칭 관계를 가진다.
</p>

<p>
$\mathbb{P}^{2}$상의 conic $\mathbf{C}$가 주어졌을 때, <b>$\mathbf{C}$의 dual conic $\mathbf{C}^{&lowast;}$은 $(\mathbb{P}^{2})^{\vee}$공간 상의 conic을 의미하며 $\mathbf{C}^{&lowast;}$은 conic $\mathbf{C}$의 접선에 대한 정보를 가지고 있다.</b> $(\mathbb{P}^{2})^{&or;}$는 $\mathbb{P}^{2}$상의 직선을 파라미터화하여 나타낼 수 있다. $\hat{\mathbf{C}}^{&lowast;}$는 다음과 같이 나타낼 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{C}^{\ast}_{ij} = (-1)^{i+j} \det(\hat{\mathbf{C}}_{ij})
  \end{aligned}
\end{equation}
<p>
여기서 $\hat{\mathbf{C}}_{ij}$는 $\mathbf{C}_{ij}$에서 i번째 행, j번째 열을 제거한 행렬을 의미한다.
</p>

<p>
임의의 직선 $\mathbf{l}$이 주어졌을 때 $\mathbf{l}$이 conic $\mathbf{C}$에 접하는 필요충분조건은 다음과 같다. 
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}^{\intercal}\mathbf{C}^{\ast}\mathbf{l} = 0
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-orgfe2e1b9" class="outline-4">
<h4 id="orgfe2e1b9"><span class="section-number-4">1.3.4</span> Proof</h4>
<div class="outline-text-4" id="text-1-3-4">
<p>
($\Rightarrow$) conic $\mathbf{C}&isin; \mathbb{R}^{3&times; 3}$의 rank가 3이고 non-singular하다고 가정하면 $\mathbf{C}^{&lowast;} = det(\mathbf{C}^{-1})$와 같이 나타낼 수 있다. $\mathbf{C}$위의 한 점 $\mathbf{x}&isin; \mathbf{C}$가 주어졌을 때 $\mathbf{x}$에서 접선 $\mathbf{l}$은 $\mathbf{l}= \mathbf{Cx}$로 나타낼 수 있다. 이를 위 식에 대입하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}^{\intercal}\mathbf{C}^{\ast}\mathbf{l} &amp; = (\mathbf{Cx})^{\intercal}\mathbf{C}^{\ast}\mathbf{Cx} \\
    &amp; = \mathbf{x}^{\intercal}\mathbf{C}^{\intercal}\mathbf{C}^{\ast}\mathbf{Cx} \\
    &amp; = \det(\mathbf{x}^{\intercal}\mathbf{C}^{\intercal}\mathbf{x}) &amp; \because \mathbf{C}^{\ast}=\det(\mathbf{C}^{-1}) \\ 
    &amp; = 0  &amp; \because \mathbf{x} \in \mathbf{C}, (\mathbf{x}^{\intercal}\mathbf{C}\mathbf{x})^{\intercal} = 0
  \end{aligned}
\end{equation}
<p>
($\leftarrow$) 직선 $\mathbf{l}$과 dual conic $\mathbf{C}^{&lowast;}$가 $\mathbf{l}^{\intercal}\mathbf{C}^{&lowast;}\mathbf{l}=0$을 만족할 때 $\mathbf{l}$과 $\mathbf{C}^{&lowast;}$가 한 점 $\mathbf{x}$에서 만난다는 것을 증명하면 된다. 이 때 $\mathbf{l} = \mathbf{Cx}$공식이 성립한다.
</p>

<p>
$\mathbf{C}$는 non-singualr하기 때문에 역행렬이 존재하므로 $\mathbf{x}= \mathbf{C}^{-1}\mathbf{l}$과 같이 나타낼 수 있다. 따라서 $\mathbf{x}^{\intercal}\mathbf{l}$은
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{\intercal}\mathbf{l} &amp; = (\mathbf{C}^{-1}\mathbf{l})^{\intercal}\mathbf{l} \\
    &amp; = \mathbf{l}^{\intercal}\mathbf{C}^{-t}\mathbf{l} = 0 \\
    &amp; (\mathbf{C}^{\ast} \sim \mathbf{C}^{-1} \ \text{ by assumption.}) \\ 
  \end{aligned}
\end{equation}
<p>
과 같고 $\mathbf{x}^{\intercal}\mathbf{Cx}$는
</p>
\begin{equation}
  \begin{aligned}
    \mathbf{x}^{\intercal}\mathbf{C}\mathbf{x} &amp; = (\mathbf{C}^{-1}\mathbf{l})^{\intercal}\mathbf{C}\mathbf{C}^{-1}\mathbf{l} \\
    &amp; = \mathbf{l}^{\intercal}\mathbf{C}^{-t}\mathbf{cc}^{-1}\mathbf{l} \\
    &amp; = \mathbf{l}^{\intercal}\mathbf{C}^{-1}\mathbf{l} = 0 \\
    &amp; (\mathbf{C}^{-t} = \mathbf{C}^{-1} \ \ \mathbf{C} \text{ is symmetric.})
  \end{aligned}
\end{equation}
<p>
공식이 성립함에 따라 $\mathbf{x}$는 $\mathbf{l}$과 $\mathbf{C}$의 교점임이 증명된다.
</p>

\begin{equation}
  \begin{aligned}
    \{\mathbf{x}\} =  \mathbf{l} \cap \mathbf{C}
  \end{aligned}
\end{equation}
</div>
</div>
</div>

<div id="outline-container-orgc4e6a57" class="outline-3">
<h3 id="orgc4e6a57"><span class="section-number-3">1.4</span> Projective transformations</h3>
<div class="outline-text-3" id="text-1-4">
<p>
$\mathbb{P}^{2}$의 projective transformation은 non-singular인 $3\times3$행렬로 정의되는 $\mathbb{P}^{2} \Rightarrow \mathbb{P}^{2}$사상을 의미하며 직선을 직선으로 보내는 성질을 가진다. <b>projective transformation은 collineation, projectivity 또는 homography</b> 라고도 불린다. 
</p>
</div>
</div>

<div id="outline-container-org0436097" class="outline-3">
<h3 id="org0436097"><span class="section-number-3">1.5</span> A hierarchy of transformations</h3>
<div class="outline-text-3" id="text-1-5">

<div class="figure">
<p><img src="/pictures/200607_mvg/07.png" alt="07.png" align="center" width="700px" />
</p>
</div>

<p>
projective 변환은 변환 전과 후 사이에 어떤 성질을 보존하느냐에 따라 여러 종류의 변환 행렬이 존재한다.
</p>
</div>

<div id="outline-container-org7fef94f" class="outline-4">
<h4 id="org7fef94f"><span class="section-number-4">1.5.1</span> Class 1: isometries</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
물체가 변환 전과 후 사이에 물체의 크기가 동일한 경우 해당 변환을 isometry 변환이라고 부른다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{iso} = \begin{bmatrix} \mathbf{A}&amp;\mathbf{t} \\ \mathbf{0} &amp; 1 \end{bmatrix}
  \end{aligned} 
\end{equation}
<p>
이 때 $\mathbf{A}&isin; \mathbb{R}^{2&times;2}$는 2차원 물체의 회전과 반사(reflection)을 포함한 행렬이며 $\mathbf{t}&isin; \mathbb{R}^{2}$는 2차원 물체의 이동 벡터이다.
</p>
</div>
</div>

<div id="outline-container-org6da788c" class="outline-4">
<h4 id="org6da788c"><span class="section-number-4">1.5.2</span> Class 2: similarity transformations</h4>
<div class="outline-text-4" id="text-1-5-2">
<p>
isometry 변환에 스케일을 의미하는 $s$가 추가된 변환을 similarity 변환이라고 하며 <b>물체의 이동 및 회전에 추가적으로 스케일까지 같이 변환</b> 하는 성질을 가진다. 이 때 기존의 $\mathbf{A}$행렬에서 reflection의 성질을 제거한 $\mathbf{R}$행렬을 사용한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{S} = \begin{bmatrix} s\mathbf{R}&amp;\mathbf{t} \\ \mathbf{0} &amp; 1 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
similarity 변환은 물체의 각도와 길이의 비율을 보존되지만 스케일은 보존되지 않는다. 두 물체가 similarity 변환까지 동일하다는 의미는(=up to scale) 두 물체의 형태는 동일하지만 스케일에 차이가 있다는 의미이다.
</p>
</div>
</div>

<div id="outline-container-org80181c3" class="outline-4">
<h4 id="org80181c3"><span class="section-number-4">1.5.3</span> Class 3: affine transformations</h4>
<div class="outline-text-4" id="text-1-5-3">
<p>
affine 변환은 isometry 변환에서 행렬 $\mathbf{A}$의 아무 제약조건이 없는 변환행렬을 의미한다. 변환 후 물체는 일반적으로 변환 전과 다른 형태를 가진다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{A} = \begin{bmatrix} \mathbf{A}&amp;\mathbf{t} \\ \mathbf{0} &amp; 1 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
$\mathbf{H}_{A}$는 6자유도를 가지므로  세 개의 대응점 쌍으로부터 $\mathbf{H}_{A}$를 유일하게 결정할 수 있다.
</p>

<p>
affine 변환은 물체의 길이 비율을 보존하며 또한 평행한 직선을 보존하는 성질을 가진다. 따라서 무한대 직선(line at infinity) $\mathbf{l}_{&infin;}$를 affine 변환해도 여전히 $\mathbf{l}_{&infin;}$가 된다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{A}(\mathbf{l}_{\infty}) = \mathbf{l}_{\infty}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-orga2a4868" class="outline-4">
<h4 id="orga2a4868"><span class="section-number-4">1.5.4</span> Class 4: projective transformations</h4>
<div class="outline-text-4" id="text-1-5-4">
<p>
마지막으로 projective 변환은 변환행렬의 마지막 행이 $(0,0,1)$이 아닌 임의의 형태를 가지는 변환행렬을 의미한다. projective 변환은 직선을 직선으로 사상한다는 성질 외에는 이전에 설명한 모든 성질들을 보존하지 않는다는 특징이 있다. 평행한 직선 또한 projective 변환을 수행하면 평행하지 않게되며 물체의 길이비 또한 달라지게 된다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{P} = \begin{bmatrix} \mathbf{A}&amp;\mathbf{t} \\ \mathbf{v}^{\intercal}&amp;v\end{bmatrix}
  \end{aligned}
\end{equation}
<p>
이 때 $\mathbf{v}=\begin{bmatrix}v_{1}&amp;v_{2} \end{bmatrix}$는 임의의 2차원 벡터를 의미하며 $v$또한 임의의 스칼라 값을 의미한다. projective 변환행렬 $\mathbf{H}_{P}$는 8자유도를 가지므로 일반적으로 4개의 대응점 쌍을 통해 $\mathbf{H}_{P}$을 유일하게 결정할 수 있다.
</p>
</div>
</div>
</div>

<div id="outline-container-orgc466ef6" class="outline-3">
<h3 id="orgc466ef6"><span class="section-number-3">1.6</span> Decomposition of a projective transformation</h3>
<div class="outline-text-3" id="text-1-6">
<p>
앞서 설명한 변환행렬의 계층구조에 따라 projective 변환행렬은 다른 변환행렬들의 곱으로 표현할 수 있다. 반대로 말하면, <b>projective 변환은 다른 변환행렬들로 분해가 가능하다.</b> 임의의 projective 변환 $\mathbf{H}_{p}$가 주어졌을 때
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{p} &amp; = \mathbf{H}_{S}\mathbf{H}_{A}\mathbf{H}_{P} \\
    &amp; = \begin{bmatrix} s \mathbf{R}&amp;\mathbf{t} \\\mathbf{0}&amp;1 \end{bmatrix} \begin{bmatrix} \mathbf{K} &amp; \mathbf{0} \\ \mathbf{0} &amp; 1 \end{bmatrix} \begin{bmatrix} i &amp; \mathbf{0}\\ \mathbf{v}^{\intercal}&amp; v\end{bmatrix} \\
      &amp; = \begin{bmatrix} \mathbf{A}&amp;\mathbf{t} \\ \mathbf{v}^{\intercal}&amp;v \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
와 같이 <b>projective 변환 $\mathbf{H}_{p}$는 similarity 변환 $\mathbf{H}_{S}$과 affine 변환 $\mathbf{H}_{A}$그리고 나머지 변환 $\mathbf{H}_{P}$의 곱으로 분해가 가능</b> 하다. 이 때, $\mathbf{A}=s\mathbf{R}\mathbf{K}+\mathbf{tv}^{\intercal}$이고 $\mathbf{K}$는 $det(\mathbf{K})=1$로 정규화된 상삼각행렬(upper-triangle) 행렬을 의미한다. 단, 위와 같은 분해는 $v &ne; 0$일 때만 가능하며 $s &gt;0$인 경우 분해가 유일하게 결정된다.
</p>
</div>
</div>

<div id="outline-container-org0bcdd0d" class="outline-3">
<h3 id="org0bcdd0d"><span class="section-number-3">1.7</span> Recovery of affine and metric properties from images</h3>
<div class="outline-text-3" id="text-1-7">
<p>
임의의 이미지가 주어졌을 때 이미지 상에서 평행한 선들과 직교한 선들을 사용하여 affine 성질과 metric 성질을 복원할 수 있다.
</p>
</div>

<div id="outline-container-org2628956" class="outline-4">
<h4 id="org2628956"><span class="section-number-4">1.7.1</span> The line at infinity</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
affine 성질은 평행한 선들이 보존되는 affine 변환의 성질을 의미하며 무한대 직선(line at infinity) $\mathbf{l}_{&infin;} = \begin{bmatrix}x&amp;y&amp;0 \end{bmatrix}$을 사용하여 복원할 수 있다. 
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{A}\mathbf{l}_{\infty} =\begin{bmatrix} \mathbf{A}&amp;\mathbf{t} \\0&amp;1 \end{bmatrix} \begin{bmatrix} x\\y\\0 \end{bmatrix} = \begin{bmatrix} \mathbf{A} \begin{bmatrix} x\\y \end{bmatrix} \\ 0 \end{bmatrix} = \mathbf{l}_{\infty}^{\prime}
  \end{aligned}
\end{equation}
<p>
위와 같이 $\mathbf{l}_{&infin;}$를 affine 변환해도 여전히 무한대에 위치한다.
</p>
</div>
</div>

<div id="outline-container-org05ab077" class="outline-4">
<h4 id="org05ab077"><span class="section-number-4">1.7.2</span> Recovery of affine properties from images</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
<b>임의의 homography $\mathbf{H}$가 affine 성질을 보존한다는 의미는 곧 무한대 직선 $\mathbf{l}_{&infin;}$를 $\mathbf{H}$변환해도 무한대에 위치한 직선이 된다는 의미</b> 이다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}(\mathbf{l}_{\infty}) = \mathbf{Hl}_{\infty} = \mathbf{l}_{\infty}^{\prime}
  \end{aligned}
\end{equation}
<p>
무한대 직선 $\mathbf{l}_{&infin;}$는 $\mathbf{l}_{&infin;}=(x,y,0)^{\intercal}$와 같이 마지막 항이 0인 특징이 있으므로 임의의 homography $\mathbf{H}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}\mathbf{l}_{\infty} = \begin{bmatrix} \mathbf{A}&amp; \mathbf{t} \\ \mathbf {v} &amp; v \end{bmatrix} \begin{bmatrix} x\\y\\0 \end{bmatrix} = \begin{bmatrix} *\\ * \\0 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
이 성립하므로 $\mathbf{v}=(0,0)$이 되고 $v$는 스케일 상수가 되어 1로 변환이 가능하다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H} = \begin{bmatrix} \mathbf{A}&amp;\mathbf{t} \\ \mathbf{0} &amp; v \end{bmatrix} = \begin{bmatrix} \mathbf{A}/v &amp; \mathbf{t}/v \\ \mathbf{0} &amp; 1 \end{bmatrix}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-orgc8f12b6" class="outline-4">
<h4 id="orgc8f12b6"><span class="section-number-4">1.7.3</span> Recovery of metric properties from images</h4>
</div>
</div>
</div>

<div id="outline-container-orga736afc" class="outline-2">
<h2 id="orga736afc"><span class="section-number-2">2</span> More Single View Geometry</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org41ea6be" class="outline-3">
<h3 id="org41ea6be"><span class="section-number-3">2.1</span> Camera calibration and the image of the absolute conic</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-org754061c" class="outline-4">
<h4 id="org754061c"><span class="section-number-4">2.1.1</span> Result 8.15</h4>
<div class="outline-text-4" id="text-2-1-1">

<div class="figure">
<p><img src="/pictures/200607_mvg/09.png" alt="09.png" align="center" width="400px" />
</p>
</div>

<p>
원점에 위치한 카메라 $\mathbf{C}$가 있을 때 한 점 $\mathbf{x}$를 Back-projection하면 카메라 중심을 지나는 직선 $\mathbf{d}$가 생성되는데 이 때, $\mathbf{d}= \mathbf{K}^{-1}\mathbf{x}$의 관계를 가진다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x} &amp; = \mathbf{P} \begin{bmatrix} \lambda \mathbf{d} \\ 1 \end{bmatrix} \\
    &amp; = \mathbf{K} [ \mathbf{I} | 0 ] \begin{bmatrix} \lambda \mathbf{d} \\ 1 \end{bmatrix} = \mathbf{Kd} \\
  \end{aligned}
\end{equation}
<p>
따라서 다음의 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x} = \mathbf{Kd} \\
    &amp; \mathbf{d} = \mathbf{K}^{-1}\mathbf{x}
  \end{aligned}
\end{equation}

<div class="figure">
<p><img src="/pictures/200607_mvg/08.png" alt="08.png" align="center" width="400px" />
</p>
</div>


<p>
이미지 평면 상의 두 점 $\mathbf{x}_{1}, \mathbf{x}_{2}$를 Back-projection하면 각각 $\mathbf{d}_{1}, \mathbf{d}_{2}$의 직선이 생성되는데 이 때 두 직선이 이루는 각도는 다음과 같이 계산할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \cos\theta &amp; = \frac{\mathbf{d}_{1}^{\intercal}\mathbf{d}_{2}}{\sqrt{\mathbf{d}_{1}^{\intercal}\mathbf{d}_{1}}\sqrt{\mathbf{d}_{2}^{\intercal}\mathbf{d}_{2}}} = \frac{(\mathbf{K}^{-1}\mathbf{x}_{1})^{\intercal}(\mathbf{K}^{-1}\mathbf{x}_{2})}{\sqrt{(\mathbf{K}^{-1}\mathbf{x}_{1})^{\intercal}(\mathbf{K}^{-1}\mathbf{x}_{1})}\sqrt{(\mathbf{K}^{-1}\mathbf{x}_{2})^{\intercal}(\mathbf{K}^{-1}\mathbf{x}_{2})}} \\
    &amp; = \frac{\mathbf{x}_{1}^{\intercal}(\mathbf{K}^{-\intercal}\mathbf{K}^{-1})\mathbf{x}_{2}}{\sqrt{\mathbf{x}_{1}^{\intercal}\mathbf{K}^{-\intercal}\mathbf{K}^{-1}\mathbf{x}_{1}}\sqrt{\mathbf{x}_{2}^{\intercal}\mathbf{K}^{-\intercal}\mathbf{K}^{-1}\mathbf{x}_{2}}}
  \end{aligned}
\end{equation}
<p>
이 때, <b>$\mathbf{K}^{-\intercal}\mathbf{K}^{-1}$은 Image of Absolute Conic</b> 을 의미한다.
</p>
</div>
</div>

<div id="outline-container-orgcf922fc" class="outline-4">
<h4 id="orgcf922fc"><span class="section-number-4">2.1.2</span> Result 8.16</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
이미지 평면에 있는 직선 $\mathbf{l}$위에 한 점 $\mathbf{x}$가 위치할 때, 점과 직선 사이에는 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{\intercal}\mathbf{l} =0
  \end{aligned}
\end{equation}

<div class="figure">
<p><img src="/pictures/200607_mvg/10.png" alt="10.png" align="center" width="400px" />
</p>
</div>

<p>
이 때, $\mathbf{l}$를 Back-projection하면 평면 $&pi;$가 생성되고 $\mathbf{x}$를 Back-projection하면 $\mathbf{d}=\mathbf{K}^{-1}\mathbf{x}$가 생성되는데 평면 $&pi;$와 직선 $\mathbf{d}$사이에는 $(\mathbf{K}^{-1}\mathbf{x})^{\intercal}&pi; = 0$이 성립하고 이를 정리하면 $\mathbf{x}^{\intercal}(\mathbf{K}^{-\intercal}&pi;)=0$가 성립한다. $\mathbf{x}^{\intercal}\mathbf{l}=0$의 공식에 따라 결론적으로 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{K}^{-\intercal}\pi  = \mathbf{l} \\
    &amp; \pi = \mathbf{K}^{\intercal}\mathbf{l}
  \end{aligned}
\end{equation}
</div>
</div>
</div>

<div id="outline-container-orgf1490b1" class="outline-3">
<h3 id="orgf1490b1"><span class="section-number-3">2.2</span> The image of the absolute conic</h3>
<div class="outline-text-3" id="text-2-2">
<p>
무한대 평면 $&pi;_{&infin;}$가 있을 때 $\pi_{\infty}$위에 위치한 무한대 점 $\mathbf{X}_{&infin;} = (\mathbf{d}^{\intercal}, 0)^{\intercal}$이 있다고 하면 이를 카메라 $\mathbf{P}=\mathbf{KR}[\mathbf{I}|-~{\mathbf{C}}]$에 프로젝션시키면 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x} = \mathbf{PX}_{\infty} = \mathbf{KR}[\mathbf{I} | -\tilde{\mathbf{C}}] \begin{bmatrix} \mathbf{d} \\0 \end{bmatrix} = \mathbf{KRd}
  \end{aligned}
\end{equation}
<p>
즉, 무한대 평면 $\pi_{\infty}$위의 점 $\mathbf{d}$에 대해 $\mathbf{x}= \mathbf{Hd}$인 Homography가 존재한다고 했을 때 Homography $\mathbf{H}$는 $\mathbf{H}=\mathbf{KR}$과 같다. 무한대에 위치한 Absolute Conic $&Omega;_{&infin;}$는 $\mathbf{I}_{3}&isin; &pi;_{&infin;}$이다. $&Omega;_{&infin;}$를 Homography 변환하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}(\Omega_{\infty}) &amp; = \mathbf{H}^{-\intercal}\mathbf{I}_{3}\mathbf{H}^{-1} \\
    &amp; = (\mathbf{KR})^{-\intercal}\mathbf{I}_{3}(\mathbf{KR})^{-1} \\
    &amp; = \mathbf{K}^{-\intercal}\mathbf{R}^{-\intercal}\mathbf{R}^{-1}\mathbf{K}^{-1} \\
    &amp; = \mathbf{K}^{-\intercal}\mathbf{K}^{-1} 
  \end{aligned}
\end{equation}
<p>
이에 따라 <b>Image of Absolute Conic $\mathbf{w} = \mathbf{K}^{-\intercal}\mathbf{K}^{-1}$</b> 이 된다.
</p>

<p>
이미지 상의 두 점 $\mathbf{x}_{1}, \mathbf{x}_{2}$를 Back-projection 했을 때, 두 직선이 이루는 각도는
</p>

\begin{equation}
  \begin{aligned}
    \cos\theta = \frac{\mathbf{x}_{1}^{\intercal}\mathbf{w}\mathbf{x}_{2}}{\sqrt{\mathbf{x}_{1}^{\intercal}\mathbf{w}\mathbf{x}_{2}}\sqrt{\mathbf{x}_{2}^{\intercal}\mathbf{w}\mathbf{x}_{2}}}
  \end{aligned}
\end{equation}
<p>
가 되고 이를 Homography 변환하면
</p>

\begin{equation}
  \begin{aligned}
    \cos\theta = \frac{(\mathbf{Hx}_{1})^{\intercal}\mathbf{H}^{-\intercal}\mathbf{w}\mathbf{H}^{-1}(\mathbf{Hx}_{2})}{\sqrt{\ast}\sqrt{\ast}}
  \end{aligned}
\end{equation}
<p>
이 되므로 Homography 변환을 해도 두 각도는 여전히 보존된다. 만약 두 직선 $\mathbf{K}^{-1}\mathbf{x}_{1}$과 $\mathbf{K}^{-1}\mathbf{x}_{2}$가 직교하는 경우 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}_{1}^{\intercal}\mathbf{w}\mathbf{x}_{2} = 0
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-orga81efc8" class="outline-3">
<h3 id="orga81efc8"><span class="section-number-3">2.3</span> Orthogonality and $\mathbf{w}$</h3>
<div class="outline-text-3" id="text-2-3">

<div class="figure">
<p><img src="/pictures/200607_mvg/17.png" alt="17.png" align="center" width="300px" />
</p>
</div>

<p>
이미지 평면 상의 두 점 $\mathbf{x}_{1}, \mathbf{x}_{2}$를 Back-projection하면 두 직선 $\mathbf{K}^{-1}\mathbf{x}_{1}, \mathbf{K}^{-1}\mathbf{x}_2$가 생성된다. 만약 두 직선이 직교하는 경우 $\mathbf{x}_{1}^{\intercal}\mathbf{w}\mathbf{x}_{2}=0$의 공식이 성립한다. 그리고 $\mathbf{x}_{1}$가 직선 $\mathbf{l}$에 포함되어 있으면 $\mathbf{x}_{1}^{\intercal}\mathbf{l}=0$이 성립한다. 위 두 공식을 결합하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}_{1}^{\intercal}\mathbf{w}\mathbf{x}_{2}=0 \\
    &amp; \mathbf{x}_{1}^{\intercal}\mathbf{l} = 0 \\
    &amp; \therefore \mathbf{l} = \mathbf{wx}_{2}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-org7ea3ec1" class="outline-3">
<h3 id="org7ea3ec1"><span class="section-number-3">2.4</span> Vanishing points and vanishing lines</h3>
<div class="outline-text-3" id="text-2-4">

<div class="figure">
<p><img src="/pictures/200607_mvg/13.png" alt="13.png" align="center" width="600px" />
</p>
</div>

<p>
3차원 공간 상의 점 $\mathbf{A}$와 직선의 방향 $\mathbf{D}=(\mathbf{d}^{\intercal},0)^{\intercal}$가 존재할 때 직선 위에 존재하는 점 $\mathbf{X}(&lambda;)$는 다음과 같이 정의된다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{X}(\lambda) = \mathbf{A} + \lambda \mathbf{D} = \begin{bmatrix} \tilde{\mathbf{A}} + \lambda \mathbf{d} \\ 1 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
점 $\mathbf{X}(&lambda;)$를 이미지 평면에 프로젝션한 점 $\mathbf{x}(&lambda;) = \mathbf{PX}(&lambda;), \ \ \text{where }\ \mathbf{P}= \mathbf{K}[\mathbf{I}|0]$는 다음과 같이 정의된다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}(\lambda) = \mathbf{PX}(\lambda) = \mathbf{PA} + \lambda \mathbf{PD} = \mathbf{a} + \lambda \mathbf{Kd}
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{a}$는 Image of $\mathbf{A}$를 의미한다. 결론적으로 소실점(vanishing point) $\mathbf{v}$는 다음과 같이 정의된다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{v} = \lim_{\lambda \rightarrow \infty}\mathbf{x}(\lambda) = \lim_{\lambda \rightarrow \infty}(\mathbf{a} + \lambda \mathbf{Kd}) = \mathbf{Kd} \\
    &amp; \mathbf{v} = \mathbf{Kd}
  \end{aligned}
\end{equation}
</div>

<div id="outline-container-orgfe4dad9" class="outline-4">
<h4 id="orgfe4dad9"><span class="section-number-4">2.4.1</span> Camera rotation from vanishing points</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
소실점을 사용하여 카메라의 회전을 계산할 수 있다. 이미지 1에서 추출한 소실점 $\mathbf{v}_{1}$과 이미지 2에서 추출한 소실점 $\mathbf{v}_{2}$이 있을 때, $\mathbf{v}_{1}$의 방향은 $\mathbf{d}_{1} = \mathbf{K}^{-1}\mathbf{v}_{1}$이 되고 $\mathbf{v}_{2}$의 방향은 $\mathbf{d}_{2} = \mathbf{K}^{-1}\mathbf{v}_{2}$가 된다.
</p>

<p>
$\mathbf{K}, \mathbf{v}_{1}, \mathbf{v}_{2}$의 값을 모두 알고 있다고 가정하면 $\mathbf{d}_{1}, \mathbf{d}_{2}$의 값을 계산할 수 있게 되고 두 방향벡터는 다음과 같은 관계를 가진다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{d}_{2} = \mathbf{Rd}_{2}
  \end{aligned}
\end{equation}
<p>
이 때, <b>회전행렬 $\mathbf{R}$의 자유도는 3이므로 2개 이상의 소실점 쌍을 사용하면 회전행렬을 복원</b> 할 수 있다.
</p>
</div>
</div>
</div>


<div id="outline-container-orgcda6f8e" class="outline-3">
<h3 id="orgcda6f8e"><span class="section-number-3">2.5</span> Vanishing Lines</h3>
<div class="outline-text-3" id="text-2-5">

<div class="figure">
<p><img src="/pictures/200607_mvg/18.png" alt="18.png" align="center" width="700px" />
</p>
</div>

<p>
두 개 이상의 소실점(vanishing point) $\mathbf{v}_{i}, i=1,2,\cdots$들을 이어준 직선을 소실선(vanishing line) $\mathbf{l}$이라고 한다. 예를 들어 이미지 상의 체크보드가 있고 이로 인해 2개의 소실점 $\mathbf{v}_{1}, \mathbf{v}_{2}$를 구한 경우를 생각해보자. 이 경우, <b>두 소실점 $\mathbf{v}_{1},\mathbf{v}_{2}$를 이어주는 직선 $\mathbf{l}$을 체크보드 평면 $&pi;$의 소실선</b> 이라고 한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l} = \text{image of } \pi \cap \pi_{\infty}
  \end{aligned}
\end{equation}
<p>
결론적으로 <b>소실선 $\mathbf{l}$은 카메라 중심을 포함하고 체크보드 평면 $&pi;$과 평행인 평면 $&pi;^{&prime;}$와 이미지 평면의 교집합</b> 을 의미한다. $&pi;^{&prime;}$은 소실선 $\mathbf{l}$을 Back-projection함으로써 계산할 수 있다. 이 때 평면과 직선의 관계에 따라
</p>

\begin{equation}
  \begin{aligned}
    \pi^{\prime} = \mathbf{K}^{\intercal}\mathbf{l}
  \end{aligned}
\end{equation}
<p>
과 같이 계산할 수 있다.
</p>
</div>
</div>

<div id="outline-container-org523f3bf" class="outline-3">
<h3 id="org523f3bf"><span class="section-number-3">2.6</span> Orthogonality relationships amongst vanishing points and lines</h3>
<div class="outline-text-3" id="text-2-6">

<div class="figure">
<p><img src="/pictures/200607_mvg/20.png" alt="20.png" align="center" width="600px" />
</p>
</div>

<p>
이미지 평면에서 두 개의 소실점 $\mathbf{v}_{1}, \mathbf{v}_{2}$을 Back-projection한 직선들이 서로 직교하는 조건은 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{v}_{1}^{\intercal}\mathbf{w}\mathbf{v}_{2} = 0
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{w}= \mathbf{K}^{-\intercal}\mathbf{K}^{-1}$은 Image of Absolute Conic이다.
</p>

<p>
이미지 평면에서 소실점 $\mathbf{v}$을 Back-projection한 직선과 소실선 $\mathbf{l}$을 Back-projection한 평면이 직교하는 조건은 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l} = \mathbf{w}\mathbf{v}
  \end{aligned}
\end{equation}
<p>
이미지 평면에서 두 개의 직선 $\mathbf{l}_{1}, \mathbf{l}_{2}$를 Back-projection한 두 평면들이 서로 직교하는 경우 다음을 만족한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}_{1}^{\intercal}\mathbf{w}^{\ast}\mathbf{l}_{2} =0
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{w}^{&lowast;}$는 Image of Dual Absolute Conic이다.
</p>
</div>
</div>

<div id="outline-container-orga0c70ae" class="outline-3">
<h3 id="orga0c70ae"><span class="section-number-3">2.7</span> Affine 3D measurements and reconstruction</h3>
<div class="outline-text-3" id="text-2-7">
<p>
3차원 공간 상의 평면 $&pi;$에 수직인 물체들의 소실점을 수직소실점(vertical vanishing point) $\mathbf{v_{&perp;}}$라고 한다. 평면 $&pi;$의 소실선 $\mathbf{l}$과 수직소실점을 이용하면 물체의 크기를 스케일을 제외한 파라미터(up to scale)까지 계산할 수 있다. 정확하게 말하면 <b>소실선 $\mathbf{l}$과 수직소실점 $\mathbf{v}_{&perp;}$를 알면 평면 $&pi;$에 수직한 선분들의 상대적 길이를 알 수 있다.</b>
</p>

<p>
예를 들면, 3차원 공간 상의 평면 $&pi;$에 위치한 두 점 $\mathbf{B}_{1}, \mathbf{B}_{2}$가 있고 이를 지나면서 $&pi;$에 수직인 직선 $\mathbf{L}_{1}, \mathbf{L}_{2}$가 있다고 가정한다. 그리고 두 직선 $\mathbf{L}_{1}, \mathbf{L}_{2}$의 끝점 $\mathbf{T}_{1}, \mathbf{T}_{2}$가 있을 경우 <b>소실선 $\mathbf{l}$과 수직소실점 $\mathbf{v}_{&perp;}$를 사용하여 $\mathbf{T}_{1}, \mathbf{T}_{2}$의 상대적 길이를 측정</b> 할 수 있다.
</p>

<p>
우선, 모든 요소들을 이미지 평면에 프로젝션시킨다. 이 때, $\mathbf{b}_{1}, \mathbf{b}_{2}$를 잇는 직선과 소실선 $\mathbf{l}$이 만나는 점을 $\mathbf{u}$라고 정의한다. 그리고 $\mathbf{t}_{1}$에서 $\bar{\mathbf{b}_{1}\mathbf{b}_{2}}$에 평행한 직선을 그으면 해당 직선은 $\mathbf{u}$와 접한다. 이 때 $\bar{\mathbf{t}_{1}\mathbf{u}}$와 $\mathbf{v}_{&perp;}\mathbf{b}_{2}$가 만나는 교점을 $~{\mathbf{t}}_{1}$이라고 한다.
</p>

<p>
다음으로 $\bar{\mathbf{v}_{\perp}\mathbf{b}_{2}}$직선을 $\mathbb{P}^{1}$공간의 수직소실점 $\mathbf{v}_{&perp;}$는 무한대의 점 $(1,0)$이 되고 $\mathbf{b}_{1}$은 원점 $(0,1)$되는 직선으로 프로젝션시킨다. 이 때 사용하는 Homography $\mathbf{H}_{2&times;2}$는 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{2\times2} = \begin{bmatrix} 1 &amp; 0 \\ 1 &amp; -\mathbf{v}_{\perp} \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
$\mathbf{H}_{2&times;2}$는 Cross-Ratio를 보장한다. 다음으로 길이의 비를 이용하여 $d_{1} : d_{2} = \mathbf{b}_{1}~{\mathbf{t}}_{1}:\mathbf{b}_{1}\mathbf{t}_{2}$의 비율을 구한다.
</p>

\begin{equation}
  \begin{aligned}
    \frac{d_{1}}{d_{2}} = \frac{\tilde{\mathbf{t}}_{1}(\mathbf{v}_{\perp}-\mathbf{t}_{2})}{\mathbf{t}_{2}(\mathbf{v}_{\perp}-\tilde{\mathbf{t}}_{1})}
  \end{aligned}
\end{equation}
<p>
만약, 수직소실점 $\mathbf{v}_{&perp;}$와 카메라의 주축(principal axis)이 수직인 경우 이미지 상에서 수직소실점은 만나지 않게 되고 아래와 같이 단순하게 비율을 계산할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \frac{d_{1}}{d_{2}} = \frac{\tilde{\mathbf{t}}_{1}-\mathbf{b}_{2}}{\mathbf{t}_{2}-\mathbf{b}_{2}}
  \end{aligned}
\end{equation}
</div>
</div>


<div id="outline-container-org4c64600" class="outline-3">
<h3 id="org4c64600"><span class="section-number-3">2.8</span> Determining camera calibration $\mathbf{K}$from a single view</h3>
<div class="outline-text-3" id="text-2-8">
<p>
단안 이미지에서 내부 파라미터 $\mathbf{K}$를 결정하기 위해서는 2가지 제약조건이 필요하다. <b>이미지 제약조건(scene constraint)과 내부 파라미터의 제약조건(internal constraint)</b> 이 있다.
</p>

<p>
이미지 제약조건으로는 이미지 평면에 존재하는 서로 수직인 두 소실점 $\mathbf{v}_{1}, \mathbf{v}_{2}$가 있을 경우 $\mathbf{v}_{1}^{\intercal}\mathbf{w}\mathbf{v}_{2}=0$가 있고, 소실선 $\mathbf{l}$과 소실점 $\mathbf{v}$가 직교하는 경우 이들의 Back-projection은 $\mathbf{l}= \mathbf{wx}$가 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{v}_{1}^{\intercal}\mathbf{w}\mathbf{v}_{2}=0 \\
    &amp; \mathbf{l} \times (\mathbf{wv}) = 0
  \end{aligned}
\end{equation}
<p>
내부 파라미터 제약조건으로는 $\mathbf{K}$가 Zero-Skew인 경우 $w_{12} = w_{21}=0$이 있고 또한, Square Pixels인 경우 $w_{12}=w_{21}=0, w_{11}=w_{22}$가 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; w_{12} = w_{21} \quad \text{for zero skew} \\
    &amp; w_{12}=w_{21}=0, w_{11}=w_{22} \quad \text{for square pixel}
  \end{aligned}
\end{equation}
<p>
위와 같이 $\mathbf{w} = \begin{bmatrix} w_{1} &amp; w_{2} &amp; w_{4} \\ w_{2} &amp; w_{3} &amp;w_{5} \\ w_{4} &amp; w_{5} &amp; w_{6} \end{bmatrix}$파라미터를 찾기 위해 충분한 제약조건을 확보한 후 $\mathbf{w}$를 6차원 벡터로 정렬하여 $\mathbf{Ax}=0$형태의 선형 시스템을 만든다. 다음으로 <b>특이값 분해(SVD)를 사용하여 $\mathbf{w}=\mathbf{K}^{-\intercal}\mathbf{K}^{-1}$값을 계산한 후 Cholesky Decomposition을 사용하여 $\mathbf{K}^{-\intercal}\mathbf{K}^{-1}$를 분해</b> 한다. 이를 통해 내부 파라미터 $\mathbf{K}$를 계산할 수 있다.
</p>
</div>
</div>


<div id="outline-container-org2b9d73c" class="outline-3">
<h3 id="org2b9d73c"><span class="section-number-3">2.9</span> Calibration from three orthogonal vanishing points</h3>
<div class="outline-text-3" id="text-2-9">
<p>
내부 파라미터 $\mathbf{K}$가 Zero-Skew이고 Square Pixel일 때 세 개의 서로 직교하는 수직소실점들 $\mathbf{v}_{i}, \ i=1,2,3$을 사용하여 $\mathbf{K}$를 계산할 수 있다. 우선 $\mathbf{K}$가 Zero-Skew이고 Square Pixel이므로 다음이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{w} = \begin{bmatrix} w_{1} &amp; 0 &amp; w_{2} \\ 0 &amp; w_{1} &amp; w_{3} \\ w_{2} &amp; w_{3} &amp; w_{4} \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
이와 같이 총 4개의 자유도를 가지므로 세 개의 수직소실점들을 사용하여 $\mathbf{K}$를 결정할 수 있다. 우선, 각각의 수직소실점들의 직교 특성을 사용하여 $\mathbf{v}_{i}^{\intercal}\mathbf{w}\mathbf{v}_{j}, \ &forall; i&ne; j$를 계산한다. 이 때 $\mathbf{w}$를 벡터화하여 $\mathbf{Ax}=0$형태의 선형 시스템으로 변환한 후 Nul $(\mathbf{A})$를 계산함으로써 $\mathbf{w}$를 구한다. 다음으로 Cholesky Decomposition을 사용하여 $\mathbf{w}=\mathbf{K}^{-\intercal}\mathbf{K}^{-1}$를 분해한다. 이와 같이 내부 파라미터 $\mathbf{K}$를 계산할 수 있다.
</p>
</div>
</div>

<div id="outline-container-orge3c4130" class="outline-3">
<h3 id="orge3c4130"><span class="section-number-3">2.10</span> Computation of focal length and principal point using vanishing point and vanishing line</h3>
<div class="outline-text-3" id="text-2-10">
<p>
3차원 공간 상의 평면 $&pi;$로부터 구할 수 있는 소실선 $\mathbf{l}$이 있고 $&pi;$와 수직인 수직소실점 $\mathbf{v}_{&perp;}$가 있다고 하면 이를 활용하여 초점거리 f와 주점(principal point)를 구할 수 있다.
</p>

<p>
초점거리 f를 구하는 방법은 다음과 같다. 수직소실점을 $\mathbf{v}_{1}$이라고 하고 이미지 평면과 평면 $&pi;$의 교선을 $\mathbf{l}_{1}$이라고 하면 $\mathbf{v}_{1}\mathbf{C}$와 $\mathbf{xC}$는 서로 직교한다. 그리고 카메라 중심에서 이미지 평면으로 수선을 내린 점 P가 있으면 $\mathbf{CP}$의 길이가 곧 초점거리 f가 된다. <b>$\mathbf{v}_{1}x$를 지름으로 하는 원을 그린 후 점 $\mathbf{P}$에 수평으로 그린 선과 원의 교점을 각각 $\mathbf{a}, \mathbf{b}$라고 하면 두 점 중 하나가 곧 카메라의 중심 $\mathbf{C}$가 되고 이는 곧 $\mathbf{aP}= \mathbf{bP}$가 초점거리 f</b> 가 된다.
</p>

<p>
주점(principal point) P를 구하는 방법은 다음과 같다. 수직소실점을 $\mathbf{v}_{1}$라고 하고 이미지 평면과 $\pi$평면의 교선을 $\mathbf{l}_{1}$라고 하면 $\mathbf{v}_{1}$에서 $\mathbf{l}_{1}$에 수선을 내리면 해당 수선에 주점(principal point) P가 위치한다. 이러한 특징으로 인해 <b>서로 다른 세 개의 수직소실점이 존재하는 경우 이들의 수심(orthocenter of the triangle)이 곧 주점 P가 된다.</b>
</p>
</div>
</div>

<div id="outline-container-orge6c269f" class="outline-3">
<h3 id="orge6c269f"><span class="section-number-3">2.11</span> The calibrating conic</h3>
<div class="outline-text-3" id="text-2-11">
<p>
IAC(image of absolute conic)은 이미지 평면의 점을 Back-projection한 직선들 간의 각도를 구할 수 있고 Metric Rectification도 수행할 수 있는 유용한 도구이지만 Circular Point의 특성 상 실수의 근을 갖지 않아서 시각화가 불가능하다는 단점이 있다. 이를 보완하기 위해 고안된 것이 Calibration Conic이다. Calibration Conic은 $X^{2}+Y^{2}=Z^{2}$의 Cone을 프로젝션시킨 Image Conic을 의미하고 시각화가 가능한 장점이 존재한다.
</p>

<p>
카메라 프로젝션 $\mathbf{P}= \mathbf{K}[\mathbf{I}|0]$이 있을 때 Calibration Conic 위의 점들은 다음과 같이 프로젝션된다.
</p>
\begin{equation}
  \begin{aligned}
    \mathbf{C} = \mathbf{K}^{-\intercal}\begin{bmatrix} 1 &amp; &amp; \\ &amp; 1 &amp; \\ &amp; &amp; -1 \end{bmatrix}\mathbf{K}^{-1}
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{D}= \begin{bmatrix}1 &amp; &amp; \\ &amp; 1 &amp; \\ &amp; &amp; -1 \end{bmatrix}$라고 하면 $\mathbf{C}= \mathbf{K}^{-\intercal}\mathbf{D}\mathbf{K}^{-1}$와 같이 나타낼 수 있다. 만약 $\mathbf{K}= \begin{bmatrix}f &amp; &amp; \\ &amp; f &amp; \\ &amp; &amp; 1 \end{bmatrix}$인 경우 Calibration Conic은
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{C} = \begin{bmatrix} 1 &amp; &amp; \\ &amp; 1 &amp; \\ &amp; &amp; -f^{2} \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
으로 나타낼 수 있고 이 때, <b>Calibration Conic은 원점이 주점(principal point)이면서 반지름이 초점거리 f인 이미지 상의 원</b> 을 의미한다.
</p>

<p>
$\mathbf{C}$를 분해하면 다음과 같이 다시 정의할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{C} = \mathbf{K}^{-\intercal}\mathbf{DK}^{-1} = \mathbf{K}^{-\intercal}\mathbf{K}^{-1}\mathbf{KDK}^{-1} \\
    &amp; \mathbf{C} = \mathbf{w}\mathbf{S} \quad \text{where, } \mathbf{S} = \mathbf{KDK}^{-1}
  \end{aligned}
\end{equation}
<p>
이 때 이미지 상의 임의의 점 $\mathbf{x}=\mathbf{K}~{\mathbf{X}}$에 대하여 $\mathbf{Sx}$는 Calibration Conic에 의해 반사된 점(reflected point)을 의미한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{Sx} &amp; = \mathbf{KDK}^{-1}\mathbf{K}\tilde{\mathbf{X}} \\
    &amp; = \mathbf{KD}\begin{bmatrix} X \\ Y \\ Z \end{bmatrix} = \mathbf{K}\begin{bmatrix} X \\ Y \\ -Z \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
이미지 평면 상의 두 점 $\mathbf{x}, \mathbf{x}^{&prime;}$에 대하여 두 점의 Back-projection된 직선들이 서로 직교하는 경우 $\mathbf{x}^{&prime;\intercal}\mathbf{wx}=0$이 성립한다. 이 식을 다시 작성하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{\prime\intercal}\mathbf{wx} = \mathbf{x}^{\prime\intercal}\mathbf{CS}^{-1}\mathbf{x} = \mathbf{x}^{\prime\intercal}\mathbf{CSx} = \mathbf{x}^{\prime\intercal}\mathbf{C}\dot{\mathbf{x}}
  \end{aligned}
\end{equation}
<p>
이 때, $\dot{\mathbf{x}} = \mathbf{Sx}$는 점 $\mathbf{x}$가 Calibration Conic에 의해 반사된 점을 의미한다. 결론적으로, <b>직선 $\mathbf{C}\dot{\mathbf{x}}$는 반사된 점 $\dot{\mathbf{x}}$와 Calibration Conic의 접선들을 이어주는 직선이 되고 점 $\mathbf{x}^{&prime;}$는 직선 $\mathbf{C}\dot{\mathbf{x}}$위에 존재</b> 한다.
</p>
</div>
</div>
</div>

<div id="outline-container-orga82f681" class="outline-2">
<h2 id="orga82f681"><span class="section-number-2">3</span> References</h2>
<div class="outline-text-2" id="text-3">
<p>
<a href="https://www.robots.ox.ac.uk/~vgg/hzbook/">Hartley, Richard, and Andrew Zisserman. Multiple view geometry in computer vision. Cambridge university press, 2003</a>
</p>
</div>
</div>
<div id="outline-container-orgf4ac916" class="outline-2">
<h2 id="orgf4ac916"><span class="section-number-2">4</span> Closure</h2>
<div class="outline-text-2" id="text-4">
<p>
PDF version is available at <a href="https://www.facebook.com/groups/slamkr/permalink/1187090471650595/">here</a>.
</p>
</div>
</div>
