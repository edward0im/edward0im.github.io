---
layout: post
title: (Robotics) Coordinate System 
description: 
date: 2019-10-30
categories: [Engineering]
tag: [Robotics, SLAM, Transformation, Geometry, Spatial Description]
use_math: true
comments: true
---
<div id="outline-container-orgbf83676" class="outline-2">
<h2 id="orgbf83676">Introduction</h2>
<div class="outline-text-2" id="text-orgbf83676">
<p>
해당 포스트는 좌표계에 대해 공부 목적으로 작성한 포스트이고 이미 잘 정리된 여러 블로그 포스트들의 내용을 참고하여 작성하였다. 
</p>
<hr />
</div>
</div>
<div id="outline-container-org17bfde5" class="outline-2">
<h2 id="org17bfde5">Coordinate System</h2>
<div class="outline-text-2" id="text-org17bfde5">
<p>
두 사람이 하나의 돌을 바라보고 있을 때 돌을 표현하는 방법이 서로 다를 수 있다. A가 B에게 "돌이 어디에 어떤 자세로 있어?" 라고 물었을 때 B는 어떻게 대답해야 할까? 
</p>

<div class="figure">
<p><img src="/pictures/191030/01.PNG" alt="01.PNG" width="300px" align="center" />
</p>
</div>

<p>
정답은 알 수 없다. 엄밀하게 말하면 질문에 오류가 있다.
</p>
<ol class="org-ol">
<li>어디를 기준으로 돌이 어디에 있는가?</li>
<li><p>
돌의 표면 중 정확히 어느 점을 물어보고 있는가?
이처럼 물체의 위치와 자세를 이야기할 때 어디를 기준으로 표현하는가? (기준좌표계) 그리고 그 물체의 어디를 말하고자 하는가? (이동물체 좌표계)를 명확하게 해야한다.
</p>

<div class="figure">
<p><img src="/pictures/191030/02.PNG" alt="02.PNG" width="300px" align="center" />
</p>
</div>

<p>
일반적으로 기준이 되는 좌표계 $\{S\}$를 fixed frame, world frame, space frame으로 부른다. 이동하는 물체를 대표하는 좌표계 $\{B\}$를 moving frame, body frame으로 부른다.
</p>
<p width="300px" align="center">
<img src="/pictures/191030/03.PNG" alt="03.PNG" width="300px" align="center" />
강체의 경우 $\{B\}$좌표계를 아무 곳이나 물체의 한 곳에 잡으면 된다. 보통은 무게중심에 잡는다. $\{B\}$좌표계가 움직여도 강체는 형태가 변하지 않으므로 강체의 다른부분의 위치가 자동으로 결정된다.
base frame $\{B\}$의 원점을 $P$, 축을 $(\hat{x},\hat{y},\hat{z})$하고 space frame $\{S\}$의 축을 $(\hat{X},\hat{Y},\hat{Z})$라고 하자. 이 때 space frame $\{S\}$를 기준으로 base frame $\{B\}$를 표현해보면 다음과 같다.
</p>
   \begin{equation}
   \begin{aligned}
   \vec{P}=P_1\hat{X}+P_2\hat{Y}+P_3\hat{Z}
   \end{aligned}
   \end{equation}
<p>
그리고 base frame $\{B\}$의 축 $(\hat{x},\hat{y},\hat{z})$를 $(\hat{X},\hat{Y},\hat{Z})$의 선형결합으로 표현하면 다음과 같다.
</p>
   \begin{equation}
   \begin{aligned}
       \hat{x}=r_{11}\hat{X}+r_{21}\hat{Y}+r_{31}\hat{Z}
       \\ \hat{y}=r_{12}\hat{X}+r_{22}\hat{Y}+r_{32}\hat{Z}
       \\ \hat{z}=r_{13}\hat{X}+r_{23}\hat{Y}+r_{33}\hat{Z}
   \end{aligned}
   \end{equation}
<hr /></li>
</ol>
</div>
</div>
<div id="outline-container-orge3eafeb" class="outline-2">
<h2 id="orge3eafeb">Reference</h2>
<div class="outline-text-2" id="text-orge3eafeb">
<p>
<a href="https://keunjun.blog">Keunjun's blog</a>
</p>
<hr />
<p>
다음 포스트: <a href="../../../../2019/10/31/rotation-matrix">Rotation Matrix (회전 행렬)</a>
</p>
</div>
</div>



<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org5d4d8e1">1. Linear Equation</a></li>
<li><a href="#org652b42a">2. Linear System</a></li>
<li><a href="#org9d66cf6">3. Identity Matrix</a></li>
<li><a href="#orgc51fa4e">4. Inverse Matrix</a></li>
<li><a href="#org4b7c82d">5. Solving Linear System</a></li>
<li><a href="#orgce9ea3f">6. Linear Combination</a></li>
<li><a href="#orge7710f3">7. Span</a></li>
<li><a href="#org443ac57">8. From Matrix Equation to Vector Equation</a></li>
<li><a href="#org262ba6d">9. Several Perspectives about Matrix Multiplication</a></li>
<li><a href="#org2a46892">10. Linear Independence</a></li>
<li><a href="#orgefe0bad">11. Linear Dependence</a></li>


---
layout: post
title: (Linear Algebra) Notes on Linear Algebra
description:
date: 2020-05-09
categories: [Mathematics]
tag: [Linear Algebra, Matrix]
use_math: true
comments: true
---

(buffer-file-name)

(directory-files "~/gitrepo/edward0im.github.io/_posts/")



(defun keep-html-blog-post-convention ()
  (interactive)

  (dolist (fname (file-expand-wildcards "~/gitrepo/edward0im.github.io/_posts/*.html"))
    (with-temp-buffer
      (insert-file-contents fname)
        (save-excursion
          (beginning-of-buffer)
          (setq p1 (line-beginning-position))
          (setq p2 (line-end-position))
          (setq first-line (buffer-substring-no-properties p1 p2))
          (if (string-match "---" first-line)
              nil
            (save-excursion
              (beginning-of-buffer)
              (search-forward "---")
              (setq start-line (line-beginning-position))
              (next-line)
              (search-forward "---")
              (setq end-line (line-end-position))
              (kill-region start-line end-line)
              (beginning-of-buffer)
              (yank)
              )
            )
          )
        )
    (write-region (point-min) (point-max) fname t)
      )
    )
  )


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org5d4d8e1">1. Linear Equation</a></li>
<li><a href="#org652b42a">2. Linear System</a></li>
<li><a href="#org9d66cf6">3. Identity Matrix</a></li>
<li><a href="#orgc51fa4e">4. Inverse Matrix</a></li>
<li><a href="#org4b7c82d">5. Solving Linear System</a></li>
<li><a href="#orgce9ea3f">6. Linear Combination</a></li>
<li><a href="#orge7710f3">7. Span</a></li>
<li><a href="#org443ac57">8. From Matrix Equation to Vector Equation</a></li>
<li><a href="#org262ba6d">9. Several Perspectives about Matrix Multiplication</a></li>
<li><a href="#org2a46892">10. Linear Independence</a></li>
<li><a href="#orgefe0bad">11. Linear Dependence</a></li>


---
layout: post
title: (Linear Algebra) Notes on Linear Algebra
description:
date: 2020-05-09
categories: [Mathematics]
tag: [Linear Algebra, Matrix]
use_math: true
comments: true
---

(buffer-file-name)

(directory-files "~/gitrepo/edward0im.github.io/_posts/")



(defun keep-html-blog-post-convention ()
  (interactive)

  (dolist (fname (file-expand-wildcards "~/gitrepo/edward0im.github.io/_posts/*.html"))
    (with-temp-buffer
      (insert-file-contents fname)
        (save-excursion
          (beginning-of-buffer)
          (setq p1 (line-beginning-position))
          (setq p2 (line-end-position))
          (setq first-line (buffer-substring-no-properties p1 p2))
          (if (string-match "---" first-line)
              nil
            (save-excursion
              (beginning-of-buffer)
              (search-forward "---")
              (setq start-line (line-beginning-position))
              (next-line)
              (search-forward "---")
              (setq end-line (line-end-position))
              (kill-region start-line end-line)
              (beginning-of-buffer)
              (yank)
              )
            )
          )
        )
    (write-region (point-min) (point-max) fname t)
      )
    )
  )


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org5d4d8e1">1. Linear Equation</a></li>
<li><a href="#org652b42a">2. Linear System</a></li>
<li><a href="#org9d66cf6">3. Identity Matrix</a></li>
<li><a href="#orgc51fa4e">4. Inverse Matrix</a></li>
<li><a href="#org4b7c82d">5. Solving Linear System</a></li>
<li><a href="#orgce9ea3f">6. Linear Combination</a></li>
<li><a href="#orge7710f3">7. Span</a></li>
<li><a href="#org443ac57">8. From Matrix Equation to Vector Equation</a></li>
<li><a href="#org262ba6d">9. Several Perspectives about Matrix Multiplication</a></li>
<li><a href="#org2a46892">10. Linear Independence</a></li>
<li><a href="#orgefe0bad">11. Linear Dependence</a></li>


---
layout: post
title: (Linear Algebra) Notes on Linear Algebra
description:
date: 2020-05-09
categories: [Mathematics]
tag: [Linear Algebra, Matrix]
use_math: true
comments: true
---

(buffer-file-name)

(directory-files "~/gitrepo/edward0im.github.io/_posts/")



(defun keep-html-blog-post-convention ()
  (interactive)

  (dolist (fname (file-expand-wildcards "~/gitrepo/edward0im.github.io/_posts/*.html"))
    (message fname)
    (sleep-for 1)
    (with-temp-buffer
      (insert-file-contents fname)
      (message "1")
      (sleep-for 1)
        (save-excursion
          (beginning-of-buffer)
          (setq p1 (line-beginning-position))
          (setq p2 (line-end-position))
          (setq first-line (buffer-substring-no-properties p1 p2))
          (if (string-match "---" first-line)
              (message "h")
            (save-excursion
              (message "2")
              (sleep-for 1)
              (beginning-of-buffer)
              (search-forward "---")
              (setq start-line (line-beginning-position))
              (next-line)
              (search-forward "---")
              (setq end-line (line-end-position))
              (kill-region start-line end-line)
              (beginning-of-buffer)
              (yank)
              )
            )
          )
        )
    (write-region (point-min) (point-max) fname t)
      )
    )
  )


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org5d4d8e1">1. Linear Equation</a></li>
<li><a href="#org652b42a">2. Linear System</a></li>
<li><a href="#org9d66cf6">3. Identity Matrix</a></li>
<li><a href="#orgc51fa4e">4. Inverse Matrix</a></li>
<li><a href="#org4b7c82d">5. Solving Linear System</a></li>
<li><a href="#orgce9ea3f">6. Linear Combination</a></li>
<li><a href="#orge7710f3">7. Span</a></li>
<li><a href="#org443ac57">8. From Matrix Equation to Vector Equation</a></li>
<li><a href="#org262ba6d">9. Several Perspectives about Matrix Multiplication</a></li>
<li><a href="#org2a46892">10. Linear Independence</a></li>
<li><a href="#orgefe0bad">11. Linear Dependence</a></li>


---
layout: post
title: (Linear Algebra) Notes on Linear Algebra
description:
date: 2020-05-09
categories: [Mathematics]
tag: [Linear Algebra, Matrix]
use_math: true
comments: true
---

(buffer-file-name)

(directory-files "~/gitrepo/edward0im.github.io/_posts/")



(defun keep-html-blog-post-convention ()
  (interactive)

  (dolist (fname (file-expand-wildcards "~/gitrepo/edward0im.github.io/_posts/*.html"))
    (with-temp-buffer
      (insert-file-contents fname)
        (save-excursion
          (beginning-of-buffer)
          (setq p1 (line-beginning-position))
          (setq p2 (line-end-position))
          (setq first-line (buffer-substring-no-properties p1 p2))
          (if (string-match "---" first-line)
              (message "h")
            (save-excursion
              (message "2")
              (sleep-for 1)
              (beginning-of-buffer)
              (search-forward "---")
              (setq start-line (line-beginning-position))
              (next-line)
              (search-forward "---")
              (setq end-line (line-end-position))
              (kill-region start-line end-line)
              (beginning-of-buffer)
              (yank)
              )
            )
          )
        )
    (write-region (point-min) (point-max) fname t)
      )
    )
  )---
layout: post
title: (Robotics) Coordinate System 
description: 
date: 2019-10-30
categories: [Engineering]
tag: [Robotics, SLAM, Transformation, Geometry, Spatial Description]
use_math: true
comments: true
---
<div id="outline-container-orgbf83676" class="outline-2">
<h2 id="orgbf83676">Introduction</h2>
<div class="outline-text-2" id="text-orgbf83676">
<p>
해당 포스트는 좌표계에 대해 공부 목적으로 작성한 포스트이고 이미 잘 정리된 여러 블로그 포스트들의 내용을 참고하여 작성하였다. 
</p>
<hr />
</div>
</div>
<div id="outline-container-org17bfde5" class="outline-2">
<h2 id="org17bfde5">Coordinate System</h2>
<div class="outline-text-2" id="text-org17bfde5">
<p>
두 사람이 하나의 돌을 바라보고 있을 때 돌을 표현하는 방법이 서로 다를 수 있다. A가 B에게 "돌이 어디에 어떤 자세로 있어?" 라고 물었을 때 B는 어떻게 대답해야 할까? 
</p>

<div class="figure">
<p><img src="/pictures/191030/01.PNG" alt="01.PNG" width="300px" align="center" />
</p>
</div>

<p>
정답은 알 수 없다. 엄밀하게 말하면 질문에 오류가 있다.
</p>
<ol class="org-ol">
<li>어디를 기준으로 돌이 어디에 있는가?</li>
<li><p>
돌의 표면 중 정확히 어느 점을 물어보고 있는가?
이처럼 물체의 위치와 자세를 이야기할 때 어디를 기준으로 표현하는가? (기준좌표계) 그리고 그 물체의 어디를 말하고자 하는가? (이동물체 좌표계)를 명확하게 해야한다.
</p>

<div class="figure">
<p><img src="/pictures/191030/02.PNG" alt="02.PNG" width="300px" align="center" />
</p>
</div>

<p>
일반적으로 기준이 되는 좌표계 $\{S\}$를 fixed frame, world frame, space frame으로 부른다. 이동하는 물체를 대표하는 좌표계 $\{B\}$를 moving frame, body frame으로 부른다.
</p>
<p width="300px" align="center">
<img src="/pictures/191030/03.PNG" alt="03.PNG" width="300px" align="center" />
강체의 경우 $\{B\}$좌표계를 아무 곳이나 물체의 한 곳에 잡으면 된다. 보통은 무게중심에 잡는다. $\{B\}$좌표계가 움직여도 강체는 형태가 변하지 않으므로 강체의 다른부분의 위치가 자동으로 결정된다.
base frame $\{B\}$의 원점을 $P$, 축을 $(\hat{x},\hat{y},\hat{z})$하고 space frame $\{S\}$의 축을 $(\hat{X},\hat{Y},\hat{Z})$라고 하자. 이 때 space frame $\{S\}$를 기준으로 base frame $\{B\}$를 표현해보면 다음과 같다.
</p>
   \begin{equation}
   \begin{aligned}
   \vec{P}=P_1\hat{X}+P_2\hat{Y}+P_3\hat{Z}
   \end{aligned}
   \end{equation}
<p>
그리고 base frame $\{B\}$의 축 $(\hat{x},\hat{y},\hat{z})$를 $(\hat{X},\hat{Y},\hat{Z})$의 선형결합으로 표현하면 다음과 같다.
</p>
   \begin{equation}
   \begin{aligned}
       \hat{x}=r_{11}\hat{X}+r_{21}\hat{Y}+r_{31}\hat{Z}
       \\ \hat{y}=r_{12}\hat{X}+r_{22}\hat{Y}+r_{32}\hat{Z}
       \\ \hat{z}=r_{13}\hat{X}+r_{23}\hat{Y}+r_{33}\hat{Z}
   \end{aligned}
   \end{equation}
<hr /></li>
</ol>
</div>
</div>
<div id="outline-container-orge3eafeb" class="outline-2">
<h2 id="orge3eafeb">Reference</h2>
<div class="outline-text-2" id="text-orge3eafeb">
<p>
<a href="https://keunjun.blog">Keunjun's blog</a>
</p>
<hr />
<p>
다음 포스트: <a href="../../../../2019/10/31/rotation-matrix">Rotation Matrix (회전 행렬)</a>
</p>
</div>
</div>



<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org5d4d8e1">1. Linear Equation</a></li>
<li><a href="#org652b42a">2. Linear System</a></li>
<li><a href="#org9d66cf6">3. Identity Matrix</a></li>
<li><a href="#orgc51fa4e">4. Inverse Matrix</a></li>
<li><a href="#org4b7c82d">5. Solving Linear System</a></li>
<li><a href="#orgce9ea3f">6. Linear Combination</a></li>
<li><a href="#orge7710f3">7. Span</a></li>
<li><a href="#org443ac57">8. From Matrix Equation to Vector Equation</a></li>
<li><a href="#org262ba6d">9. Several Perspectives about Matrix Multiplication</a></li>
<li><a href="#org2a46892">10. Linear Independence</a></li>
<li><a href="#orgefe0bad">11. Linear Dependence</a></li>


---
layout: post
title: (Linear Algebra) Notes on Linear Algebra
description:
date: 2020-05-09
categories: [Mathematics]
tag: [Linear Algebra, Matrix]
use_math: true
comments: true
---

(buffer-file-name)

(directory-files "~/gitrepo/edward0im.github.io/_posts/")



(defun keep-html-blog-post-convention ()
  (interactive)

  (dolist (fname (file-expand-wildcards "~/gitrepo/edward0im.github.io/_posts/*.html"))
    (with-temp-buffer
      (insert-file-contents fname)
        (save-excursion
          (beginning-of-buffer)
          (setq p1 (line-beginning-position))
          (setq p2 (line-end-position))
          (setq first-line (buffer-substring-no-properties p1 p2))
          (if (string-match "---" first-line)
              nil
            (save-excursion
              (beginning-of-buffer)
              (search-forward "---")
              (setq start-line (line-beginning-position))
              (next-line)
              (search-forward "---")
              (setq end-line (line-end-position))
              (kill-region start-line end-line)
              (beginning-of-buffer)
              (yank)
              )
            )
          )
        )
    (write-region (point-min) (point-max) fname t)
      )
    )
  )


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org5d4d8e1">1. Linear Equation</a></li>
<li><a href="#org652b42a">2. Linear System</a></li>
<li><a href="#org9d66cf6">3. Identity Matrix</a></li>
<li><a href="#orgc51fa4e">4. Inverse Matrix</a></li>
<li><a href="#org4b7c82d">5. Solving Linear System</a></li>
<li><a href="#orgce9ea3f">6. Linear Combination</a></li>
<li><a href="#orge7710f3">7. Span</a></li>
<li><a href="#org443ac57">8. From Matrix Equation to Vector Equation</a></li>
<li><a href="#org262ba6d">9. Several Perspectives about Matrix Multiplication</a></li>
<li><a href="#org2a46892">10. Linear Independence</a></li>
<li><a href="#orgefe0bad">11. Linear Dependence</a></li>


---
layout: post
title: (Linear Algebra) Notes on Linear Algebra
description:
date: 2020-05-09
categories: [Mathematics]
tag: [Linear Algebra, Matrix]
use_math: true
comments: true
---

(buffer-file-name)

(directory-files "~/gitrepo/edward0im.github.io/_posts/")



(defun keep-html-blog-post-convention ()
  (interactive)

  (dolist (fname (file-expand-wildcards "~/gitrepo/edward0im.github.io/_posts/*.html"))
    (with-temp-buffer
      (insert-file-contents fname)
        (save-excursion
          (beginning-of-buffer)
          (setq p1 (line-beginning-position))
          (setq p2 (line-end-position))
          (setq first-line (buffer-substring-no-properties p1 p2))
          (if (string-match "---" first-line)
              nil
            (save-excursion
              (beginning-of-buffer)
              (search-forward "---")
              (setq start-line (line-beginning-position))
              (next-line)
              (search-forward "---")
              (setq end-line (line-end-position))
              (kill-region start-line end-line)
              (beginning-of-buffer)
              (yank)
              )
            )
          )
        )
    (write-region (point-min) (point-max) fname t)
      )
    )
  )


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org5d4d8e1">1. Linear Equation</a></li>
<li><a href="#org652b42a">2. Linear System</a></li>
<li><a href="#org9d66cf6">3. Identity Matrix</a></li>
<li><a href="#orgc51fa4e">4. Inverse Matrix</a></li>
<li><a href="#org4b7c82d">5. Solving Linear System</a></li>
<li><a href="#orgce9ea3f">6. Linear Combination</a></li>
<li><a href="#orge7710f3">7. Span</a></li>
<li><a href="#org443ac57">8. From Matrix Equation to Vector Equation</a></li>
<li><a href="#org262ba6d">9. Several Perspectives about Matrix Multiplication</a></li>
<li><a href="#org2a46892">10. Linear Independence</a></li>
<li><a href="#orgefe0bad">11. Linear Dependence</a></li>


---
layout: post
title: (Linear Algebra) Notes on Linear Algebra
description:
date: 2020-05-09
categories: [Mathematics]
tag: [Linear Algebra, Matrix]
use_math: true
comments: true
---

(buffer-file-name)

(directory-files "~/gitrepo/edward0im.github.io/_posts/")



(defun keep-html-blog-post-convention ()
  (interactive)

  (dolist (fname (file-expand-wildcards "~/gitrepo/edward0im.github.io/_posts/*.html"))
    (message fname)
    (sleep-for 1)
    (with-temp-buffer
      (insert-file-contents fname)
      (message "1")
      (sleep-for 1)
        (save-excursion
          (beginning-of-buffer)
          (setq p1 (line-beginning-position))
          (setq p2 (line-end-position))
          (setq first-line (buffer-substring-no-properties p1 p2))
          (if (string-match "---" first-line)
              (message "h")
            (save-excursion
              (message "2")
              (sleep-for 1)
              (beginning-of-buffer)
              (search-forward "---")
              (setq start-line (line-beginning-position))
              (next-line)
              (search-forward "---")
              (setq end-line (line-end-position))
              (kill-region start-line end-line)
              (beginning-of-buffer)
              (yank)
              )
            )
          )
        )
    (write-region (point-min) (point-max) fname t)
      )
    )
  )


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org5d4d8e1">1. Linear Equation</a></li>
<li><a href="#org652b42a">2. Linear System</a></li>
<li><a href="#org9d66cf6">3. Identity Matrix</a></li>
<li><a href="#orgc51fa4e">4. Inverse Matrix</a></li>
<li><a href="#org4b7c82d">5. Solving Linear System</a></li>
<li><a href="#orgce9ea3f">6. Linear Combination</a></li>
<li><a href="#orge7710f3">7. Span</a></li>
<li><a href="#org443ac57">8. From Matrix Equation to Vector Equation</a></li>
<li><a href="#org262ba6d">9. Several Perspectives about Matrix Multiplication</a></li>
<li><a href="#org2a46892">10. Linear Independence</a></li>
<li><a href="#orgefe0bad">11. Linear Dependence</a></li>


---
layout: post
title: (Linear Algebra) Notes on Linear Algebra
description:
date: 2020-05-09
categories: [Mathematics]
tag: [Linear Algebra, Matrix]
use_math: true
comments: true
---

(buffer-file-name)

(directory-files "~/gitrepo/edward0im.github.io/_posts/")



(defun keep-html-blog-post-convention ()
  (interactive)

  (dolist (fname (file-expand-wildcards "~/gitrepo/edward0im.github.io/_posts/*.html"))
    (with-temp-buffer
      (insert-file-contents fname)
        (save-excursion
          (beginning-of-buffer)
          (setq p1 (line-beginning-position))
          (setq p2 (line-end-position))
          (setq first-line (buffer-substring-no-properties p1 p2))
          (if (string-match "---" first-line)
              (message "h")
            (save-excursion
              (message "2")
              (sleep-for 1)
              (beginning-of-buffer)
              (search-forward "---")
              (setq start-line (line-beginning-position))
              (next-line)
              (search-forward "---")
              (setq end-line (line-end-position))
              (kill-region start-line end-line)
              (beginning-of-buffer)
              (yank)
              )
            )
          )
        )
    (write-region (point-min) (point-max) fname t)
      )
    )
  )
