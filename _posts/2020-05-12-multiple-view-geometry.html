---
layout: post
title: (Geometry) Notes on Multiple View Geometry
description:
date: 2020-05-12
categories: [Mathematics]
tag: [Photogrammetry, Geometry, Computer Vision, SLAM]
use_math: true
comments: true
---
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org60ce3ce">1. Projective geometry and transformations in 2d</a>
<ul>
<li><a href="#orgfe0307b">1.1. The 2d projective plane</a>
<ul>
<li><a href="#org84d7695">1.1.1. Points and lines</a></li>
<li><a href="#org93a0928">1.1.2. Homogeneous representation of line</a></li>
<li><a href="#org9d00697">1.1.3. Homogeneous representation of points</a></li>
<li><a href="#org2d36076">1.1.4. Degree of freedom (dof)</a></li>
<li><a href="#org86d8118">1.1.5. Intersection of lines</a></li>
<li><a href="#orgb45aaad">1.1.6. Line joining points</a></li>
</ul>
</li>
<li><a href="#orgee9c4fb">1.2. Ideal points and the line at infinity</a>
<ul>
<li><a href="#org244a4b3">1.2.1. Intersection of parallel lines</a></li>
<li><a href="#org67b809b">1.2.2. Ideal points and the line at infinity</a></li>
<li><a href="#org95f7e2a">1.2.3. A model for the projective plane</a></li>
<li><a href="#orgee9e9f7">1.2.4. Duality</a></li>
</ul>
</li>
<li><a href="#org6f68b03">1.3. Conics and dual conics</a>
<ul>
<li><a href="#orgdf86b47">1.3.1. Five points define a conic</a></li>
<li><a href="#orgad61825">1.3.2. Tangent lines to conics</a></li>
<li><a href="#orga4242e7">1.3.3. Dual conics</a></li>
<li><a href="#orgccb633b">1.3.4. Proof</a></li>
</ul>
</li>
<li><a href="#orgb027165">1.4. Projective transformations</a></li>
<li><a href="#org7070f5a">1.5. A hierarchy of transformations</a>
<ul>
<li><a href="#org0399d4e">1.5.1. Class 1: isometries</a></li>
<li><a href="#org98eba0c">1.5.2. Class 2: similarity transformations</a></li>
<li><a href="#orgcac110b">1.5.3. Class 3: affine transformations</a></li>
<li><a href="#org3be7278">1.5.4. Class 4: projective transformations</a></li>
</ul>
</li>
<li><a href="#orge6b395b">1.6. Decomposition of a projective transformation</a></li>
<li><a href="#org12b8784">1.7. Recovery of affine and metric properties from images</a>
<ul>
<li><a href="#orgaec40f0">1.7.1. The line at infinity</a></li>
<li><a href="#org57dff60">1.7.2. Recovery of affine properties from images</a></li>
<li><a href="#orgab3a971">1.7.3. Recovery of metric properties from images</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgf7e3dfb">2. More Single View Geometry</a>
<ul>
<li><a href="#orgd03db8e">2.1. Camera calibration and the image of the absolute conic</a>
<ul>
<li><a href="#org2321c0d">2.1.1. Result 8.15</a></li>
<li><a href="#org1f0200b">2.1.2. Result 8.16</a></li>
</ul>
</li>
<li><a href="#org1fd60af">2.2. The image of the absolute conic</a></li>
<li><a href="#org8333916">2.3. Orthogonality and $\mathbf{w}$</a></li>
<li><a href="#org58a08d7">2.4. Vanishing points and vanishing lines</a>
<ul>
<li><a href="#org944b5c4">2.4.1. Camera rotation from vanishing points</a></li>
</ul>
</li>
<li><a href="#orgd018b92">2.5. Vanishing Lines</a></li>
<li><a href="#orge72b6aa">2.6. Orthogonality relationships amongst vanishing points and lines</a></li>
<li><a href="#org0f58b29">2.7. Affine 3D measurements and reconstruction</a></li>
<li><a href="#org0be45e6">2.8. Determining camera calibration $\mathbf{K}$from a single view</a></li>
<li><a href="#org08edbf3">2.9. Calibration from three orthogonal vanishing points</a></li>
<li><a href="#org010aaf8">2.10. Computation of focal length and principal point using vanishing point and vanishing line</a></li>
<li><a href="#orgc7a1329">2.11. The calibrating conic</a></li>
</ul>
</li>
<li><a href="#orge43955e">3. Epipolar Geometry and the Fundamental Matrix</a>
<ul>
<li><a href="#org9d47e4c">3.1. Proof</a></li>
<li><a href="#org871edd7">3.2. Derivation of fundemantal matrix(geometry)</a></li>
<li><a href="#orgd49938a">3.3. Derivation of fundemantal matrix(algebraic)</a></li>
<li><a href="#org7acb8e0">3.4. The epipolar line homography</a></li>
<li><a href="#orgd0aca01">3.5. Fundamental matrices arising from special motions</a>
<ul>
<li><a href="#org73b593c">3.5.1. Pure translation</a></li>
</ul>
</li>
<li><a href="#orgeaa222a">3.6. Retrieving the camera matrices</a>
<ul>
<li><a href="#orgc526ac0">3.6.1. Projective invariance and canonical cameras</a></li>
<li><a href="#orga88204f">3.6.2. Canonical form of camera matrices</a></li>
<li><a href="#org68b5e7f">3.6.3. Projective ambiguity of cameras given F</a></li>
<li><a href="#orgd8c1a80">3.6.4. Proof</a></li>
</ul>
</li>
<li><a href="#orgd9e0993">3.7. Canonical cameras given F</a></li>
<li><a href="#orgab28edb">3.8. The essential matrix</a>
<ul>
<li><a href="#org772c3b4">3.8.1. Properties of the essential matrix</a></li>
<li><a href="#orgac51fa6">3.8.2. Proof</a></li>
</ul>
</li>
<li><a href="#org034e1e8">3.9. Extraction of cameras from the essential matrix</a></li>
<li><a href="#org1c8a518">3.10. Geometrical interpretation of the four solutions</a></li>
</ul>
</li>
<li><a href="#orgebc7505">4. 3D Reconstruction of Cameras and Structure</a>
<ul>
<li><a href="#org01cb9a0">4.1. The projective reconstruction theorem</a>
<ul>
<li><a href="#orgde831ad">4.1.1. Proof</a></li>
</ul>
</li>
<li><a href="#org6ca8de0">4.2. Stratified reconstruction</a>
<ul>
<li><a href="#orgfe9b943">4.2.1. The step to affine reconstruction</a></li>
</ul>
</li>
<li><a href="#org2fe4e6d">4.3. The step to metric reconstruction</a></li>
</ul>
</li>
<li><a href="#orgef22d46">5. Computation of the Fundamental Matrix $\mathbf{F}$</a>
<ul>
<li><a href="#org8f0f4b4">5.1. Basic equations</a>
<ul>
<li><a href="#orgd2cad84">5.1.1. The minimum case - seven point correspondences</a></li>
</ul>
</li>
<li><a href="#org4763c23">5.2. The normalized 8-point algorithm</a>
<ul>
<li><a href="#org151e67d">5.2.1. Degenrate configurations</a></li>
<li><a href="#orgf00a38b">5.2.2. Proof</a></li>
</ul>
</li>
<li><a href="#org77d1947">5.3. The Gold Standard method</a></li>
</ul>
</li>
<li><a href="#org5816cc3">6. References</a></li>
<li><a href="#org6d8d6e0">7. Closure</a></li>
</ul>
</div>
</div>

<div id="outline-container-org60ce3ce" class="outline-2">
<h2 id="org60ce3ce"><span class="section-number-2">1</span> Projective geometry and transformations in 2d</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgfe0307b" class="outline-3">
<h3 id="orgfe0307b"><span class="section-number-3">1.1</span> The 2d projective plane</h3>
<div class="outline-text-3" id="text-1-1">
<p>
일반적으로 평면 위의 점 $\mathbf{x}$는 $(x,y) &isin; \mathbb{r}^{2}$와 같이 표현한다. $\mathbb{r}^{2}$가 벡터공간(vector space)이라고 하면 $\mathbf{x}$는 하나의 벡터로 나타낼 수 있다. 또한, 두 점 $\mathbf{x}_{1}, \mathbf{x}_{2}$을 포함하는 직선 $\mathbf{l}$은 두 벡터를 뺌으로써 표현할 수 있다. 해당 섹션에서는 평면 위의 점과 직선에 대해 하나의 동일한 벡터로 표현할 수 있게 해주는 homogeneous notation에 대해 설명한다.
</p>
</div>

<div id="outline-container-org84d7695" class="outline-4">
<h4 id="org84d7695"><span class="section-number-4">1.1.1</span> Points and lines</h4>
</div>

<div id="outline-container-org93a0928" class="outline-4">
<h4 id="org93a0928"><span class="section-number-4">1.1.2</span> Homogeneous representation of line</h4>
<div class="outline-text-4" id="text-1-1-2">

<div class="figure">
<p><img src="/pictures/200607_mvg/01.PNG" alt="01.PNG" align="center" width="400px" />
</p>
</div>

<p>
임의의 직선 $\mathbf{l}$은 다음과 같이 표현할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}: ax + by + c = 0 \quad (a,b) \neq 0
  \end{aligned}
\end{equation}
<p>
직선 $\mathbf{l}$위에 임의의 한 점 $\mathbf{x}= (x,y,1)$이 존재하면 직선 $ax+by+c=0$공식에 따라 직선 $\mathbf{l}$은 다음과 같이 표현할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{l} : (a,b,c) \\
  \end{aligned}
\end{equation}
<p>
이 때, $(a,b,c)$는 직선 $\mathbf{l}$을 유일하게 표현하지 않는다. $(ka,kb,kc)$와 같이 0이 아닌 임의의 상수 $k$를 곱해도 동일한 직선 $\mathbf{l}$을 표현할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}: (ka,kb,kc)
  \end{aligned}
\end{equation}
<p>
따라서 <b>평면 위의 직선 $\mathbf{l}$은 스케일 값에 상관없이 모두 같은 직선을 의미</b> 한다. 이러한 동치관계(equivalent)에 있는 모든 벡터를 homogeneous 벡터라고 한다. <b>$\mathbb{r}^{3}$공간에서 동치관계에 있는 모든 벡터들의 집합을 사영공간(projective space) $\mathbb{p}^{2}$이라고 한다.</b> 
</p>
</div>
</div>

<div id="outline-container-org9d00697" class="outline-4">
<h4 id="org9d00697"><span class="section-number-4">1.1.3</span> Homogeneous representation of points</h4>
<div class="outline-text-4" id="text-1-1-3">
<p>
직선 $\mathbf{l}=(a,b,c)^{t}$과 직선 위의 한 점 $\mathbf{x}=(x,y)^{t}$사이에는 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    ax+by+c=0
  \end{aligned}
\end{equation}
<p>
이는 두 벡터 $\mathbf{l}$과 $\mathbf{x}$의 내적으로 표현할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \begin{pmatrix} x&amp;y&amp;1 \end{pmatrix} \begin{pmatrix} a\\b\\c \end{pmatrix} = \begin{pmatrix} x&amp;y&amp;1 \end{pmatrix}\mathbf{l} = 0
  \end{aligned}
\end{equation}
<p>
이는 직선 위의 한 점 $\mathbf{x}=(x,y)$좌표 맨 끝에 1을 추가하여 직선과 내적한 것으로 볼 수 있다. 직선 $\mathbf{l}$는 스케일 값에 상관없이 하나의 직선을 표현할 수 있으므로 $(x,y,1)\mathbf{l}=0$이 성립한다는 전제하에 모든 $k$값에 대해 $(kx,ky,k)\mathbf{l}=0$또한 성립한다. 따라서 <b>임의의 상수 $k$에 대해서 $(kx,ky,k)$는 $\mathbb{r}^{2}$공간에서 한 점 $\mathbf{x}=(x,y)$를 의미하므로 직선과 동일하게 점 또한 homogeneous 벡터로 표현할 수 있다.</b> 이를 일반화하여 표현하면 임의의 점 $\mathbf{x}=(x_{1}, x_{2},x_{3})^{t}$는 $\mathbb{r}^{2}$공간 상의 한 점 $(x_{1}/x_{3}, x_{2}/x_{3})$을 표현한다.
</p>


<div class="figure">
<p><img src="/pictures/200607_mvg/02.PNG" alt="02.PNG" align="center" width="400px" />
</p>
</div>

<p>
따라서 $\mathbb{p}^{2}$공간 상에서 임의의 한 점 $\mathbf{x}$가 직선 $\mathbf{l}$위에 존재할 경우
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{t}\mathbf{l} &amp; = \begin{bmatrix} x&amp;y&amp;1 \end{bmatrix} \begin{bmatrix} a\\b\\c \end{bmatrix} \\
    &amp; = ax + by + c \\
    &amp; = 0 \\
    &amp; \therefore \mathbf{x}^{t}\mathbf{l} = 0
  \end{aligned}
\end{equation}
<p>
공식이 성립한다.
</p>
</div>
</div>

<div id="outline-container-org2d36076" class="outline-4">
<h4 id="org2d36076"><span class="section-number-4">1.1.4</span> Degree of freedom (dof)</h4>
<div class="outline-text-4" id="text-1-1-4">
<p>
$\mathbb{p}^{2}$공간에서 하나의 점이 유일하게 결정되기 위해서는 반드시 2개의 값 $(x,y)$가 주어져야 한다. 직선을 유일하게 결정하기 위해서는 두 개의 독립적인 $\{a:b:c\}$비율이 주어져야 한다. 이와 같이 $\mathbb{p}^{2}$공간에서 점과 직선은 2자유도를 가진다.
</p>
</div>
</div>

<div id="outline-container-org86d8118" class="outline-4">
<h4 id="org86d8118"><span class="section-number-4">1.1.5</span> Intersection of lines</h4>
<div class="outline-text-4" id="text-1-1-5">

<div class="figure">
<p><img src="/pictures/200607_mvg/03.PNG" alt="03.PNG" align="center" width="400px" />
</p>
</div>

<p>
$\mathbb{p}^{2}$공간 상의 두 개의 직선 $\mathbf{l}, \mathbf{l}^{'}$이 주어졌을 때 두 직선의 방정식은 다음과 같이 쓸 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}^{t}\mathbf{l} = 0 \\
    &amp; \mathbf{x}^{t}\mathbf{l}^{'} = 0 \\
  \end{aligned}
\end{equation}
<p>
이 때, 교차점 $\mathbf{x}$는 스케일 값에 관계없이 하나의 점을 의미하므로 두 직선 $\mathbf{l}, \mathbf{l}^{'}$의 cross product의 배수로 나타낼 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x} = \mathbf{l} \times \mathbf{l}^{'}
  \end{aligned}
\end{equation}
<p>
예를 들어, $\mathbb{p}^{2}$공간에 $x=1$인 직선과 $y=1$인 직선이 존재하면 두 직선은 $(1,1)$에서 교점을 가진다. 이를 위 공식을 이용해서 구해보면 직선 $x=1$은 $-x+1=0 &rarr; (-1,0,1)^{t}$로 표현할 수 있고 직선 $y=1$은 $-y+1=0 &rarr; (0,-1,1)^{t}$로 표현할 수 있으므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x} = \mathbf{l}\times \mathbf{l}^{'} = \begin{vmatrix} \mathbf{i}&amp;\mathbf{j}&amp;\mathbf{k} \\ -1&amp;0&amp;1 \\ 0&amp;-1&amp;1 \end{vmatrix} = \begin{pmatrix} 1\\1\\1 \end{pmatrix}
  \end{aligned}
\end{equation}
<p>
가 성립한다. $(1,1,1)^{t}$는 $\mathbb{r}^{2}$공간에서 $(1,1)$을 의미한다.
</p>
</div>
</div>

<div id="outline-container-orgb45aaad" class="outline-4">
<h4 id="orgb45aaad"><span class="section-number-4">1.1.6</span> Line joining points</h4>
<div class="outline-text-4" id="text-1-1-6">
<p>
두 직선의 교점을 구하는 공식과 유사하게 $\mathbb{p}^{2}$공간에서 두 점 $\mathbf{x}, \mathbf{x}^{'}$가 주어졌을 때 두 점을 지나는 직선 $\mathbf{l}$은 다음과 같이 구할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l} = \mathbf{x} \times \mathbf{x}^{'}
  \end{aligned}
\end{equation}
</div>
</div>
</div>

<div id="outline-container-orgee9c4fb" class="outline-3">
<h3 id="orgee9c4fb"><span class="section-number-3">1.2</span> Ideal points and the line at infinity</h3>
<div class="outline-text-3" id="text-1-2">

<div class="figure">
<p><img src="/pictures/200607_mvg/05.PNG" alt="05.PNG" align="center" width="700px" />
</p>
</div>
</div>

<div id="outline-container-org244a4b3" class="outline-4">
<h4 id="org244a4b3"><span class="section-number-4">1.2.1</span> Intersection of parallel lines</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
만약 <b>두 직선 $\mathbf{l}, \mathbf{l}^{'}$이 평행한 경우 두 직선의 교차점은 $\mathbb{r}^{2}$공간에서는 만나지 않지만 $\mathbb{p}^{2}$공간에서는 만난다.</b>
</p>

\begin{equation}
  \begin{aligned}
    \mathbb{p}^{2} = \mathbb{r}^{2} \cup \mathbf{l}_{\infty}
  \end{aligned}
\end{equation}
<p>
평행한 두 직선 $\mathbf{l}, \mathbf{l}^{'}$은 다음과 같이 나타낼 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{l}: (a,b,c)^{t} \\
    &amp; \mathbf{l}^{'}: (a,b,c^{'})^{t} \\
  \end{aligned}
\end{equation}
<p>
평행한 두 직선은 무한대에 위치한 점 $\mathbf{x}_{&infin;}$에서 교차하므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}_{\infty} &amp; = \mathbf{l} \times \mathbf{l}^{'} \\
    &amp; = (c^{'}-c)\begin{pmatrix} b \\ -a \\ 0 \end{pmatrix} \sim \begin{pmatrix} b \\ -a \\ 0 \end{pmatrix}
  \end{aligned}
\end{equation}
<p>
공식이 성립한다. 이러한 <b>무한대 점 $\mathbf{x}_{&infin;}$를 $\mathbb{r}^{2}$공간으로 변환하면 $(b/0,-a/0)$이 되어 유효하지 않는 점으로 변환된다. 따라서 $\mathbb{p}^{2}$공간에서 무한대 점 $\mathbf{x}_{&infin;}=(x,y,0)^{t}$는 $\mathbb{r}^{2}$공간으로 변환되지 않는다.</b> 이를 통해 euclidean 공간에서 평행한 두 직선은 만나지 않지만 projective 공간에서는 무한대에서 만난다는 것을 알 수 있다.
</p>

<p>
예를 들어 $\mathbb{p}^{2}$공간에 평행한 두 직선 $x=1$과 $x=2$가 주어지면 두 직선은 무한대에서 교차한다. 이를 homogeneous notation으로 표현하면 $-x+1=0 \rightarrow (-1,0,1)^{t}$그리고 $-x+2=0 &rarr;(-1,0,2)^{t}$이므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}_{\infty} = \mathbf{l} \times \mathbf{l}^{'} = \begin{vmatrix} \mathbf{i}&amp;\mathbf{j}&amp;\mathbf{k} \\ -1&amp;0&amp;1 \\ -1&amp;0&amp;2 \end{vmatrix} = \begin{pmatrix} 0\\1\\0 \end{pmatrix}
  \end{aligned}
\end{equation}
<p>
이 된다. 이 때, $\mathbf{x}_{&infin;}$는 y축 방향의 무한대 점을 의미한다.
</p>
</div>
</div>

<div id="outline-container-org67b809b" class="outline-4">
<h4 id="org67b809b"><span class="section-number-4">1.2.2</span> Ideal points and the line at infinity</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
homogeneous 벡터 $\mathbf{x}=(x_{1},x_{2},x_{3})^{t}$는 $x_{3} &ne; 0$일 때 $\mathbb{r}^{2}$공간 상의 한 점과 대응된다. 그러나 $x_{3} =0$이면 해당 점은 $\mathbb{r}^{2}$공간과 대응되지 않고 $\mathbb{p}^{2}$공간에만 존재하는데 이를 ideal point 또는 무한대 점(point at infinity)라고 부른다. 무한대 점은
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}_{\infty} = \begin{pmatrix} x_{1}&amp;x_{2}&amp;0 \end{pmatrix}^{t}
  \end{aligned}
\end{equation}
<p>
와 같은 형태를 갖는다. 이러한 무한대 점들은 특정한 직선 위에 존재하게 되는데 이러한 직선을 무한대 직선(line at infinity)라고 한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}_{\infty} = \begin{pmatrix} 0&amp;0&amp;1 \end{pmatrix}^{t}
  \end{aligned}
\end{equation}
<p>
따라서 $\mathbf{x}_{&infin;}^{t}\mathbf{l}_{&infin;} = \begin{pmatrix}x_{1}&amp;x_{2}&amp;0 \end{pmatrix}\begin{pmatrix}0&amp;0&amp;1 \end{pmatrix}^{t} = 0$이 성립한다.
</p>

<p>
이전 섹션에서 설명한 것과 같이 두 평행한 직선 $\mathbf{l}=(a,b,c)^{t}$과 $\mathbf{l}_{&infin;}^{'}=(a,b,c^{'})^{t}$는 무한대 점 $\mathbf{x}_{&infin;}=(b,-a,0)^{t}$에서 교차한다는 것을 알 수 있다. 이를 통해 <b>$\mathbb{r}^{2}$공간에서는 평행한 직선들은 서로 교차하지 않지만 $\mathbb{p}^{2}$공간에서는 서로 다른 두 직선은 반드시 한 점에서 교차한다는 것을 알 수 있다.</b>
</p>
</div>
</div>

<div id="outline-container-org95f7e2a" class="outline-4">
<h4 id="org95f7e2a"><span class="section-number-4">1.2.3</span> A model for the projective plane</h4>
<div class="outline-text-4" id="text-1-2-3">

<div class="figure">
<p><img src="/pictures/200607_mvg/06.png" alt="06.png" align="center" width="400px" />
</p>
</div>

<p>
<b>기하학적으로 봤을 때, $\mathbb{p}^{2}$는 3차원 공간 $\mathbb{r}^{3}$에서 원점을 지나는 모든 직선들의 집합</b> 을 의미한다. $\mathbb{p}^{2}$상의 모든 벡터를 $k(x_{1},x_{2},x_{3})^{t}$라고 했을 때 $k$값에 따라 한 점 $(x_{1},x_{2},x_{3})^{t}$의 위치가 결정된다. $k$는 실수이므로 $k=0$인 경우 원점을 의미하고 $k&ne;0$인 경우 무수한 점들의 집합인 직선이 된다. 반대로, 이러한 $\mathbb{r}^{3}$공간 상의 원점을 통과하는 한 직선은 $\mathbb{p}^{2}$공간 상의 한 점으로 볼 수 있다. 이를 확장하면 <b>$\mathbb{p}^{2}$공간 상의 직선 $\mathbf{l}$은 $\mathbb{r}^{3}$공간 상의 원점을 포함하는 평면 $&pi;$에 대응</b> 한다.
</p>

<p>
<b>$\mathbb{p}^{2}$공간에서는 스케일 값에 관계없이 한 점을 유일하게 정의할 수 있으므로 마지막 항 $x_{3}$로 좌표값을 나눈 $(x_{1}/x_{3}, x_{2}/x_{3}, 1)$를 일반적으로 한 점을 표현하는 대표값으로 간주한다.</b> 따라서 $\mathbb{r}^{3}$공간 상의 원점을 지나는 직선과 $x_{3}=1$인 평면이 교차하는 점이 곧 $\mathbb{p}^{2}$공간 상의 한 점이 된다.
</p>
</div>
</div>

<div id="outline-container-orgee9e9f7" class="outline-4">
<h4 id="orgee9e9f7"><span class="section-number-4">1.2.4</span> Duality</h4>
<div class="outline-text-4" id="text-1-2-4">
<p>
<b>$\mathbb{p}^{2}$공간에서는 점과 직선이 대칭성(duality)을 가진다.</b> 예를 들어 직선 $\mathbf{l}$위의 한 점 $\mathbf{x}$은 $\mathbf{x}^{t}\mathbf{l}=0$또는 $\mathbf{l}^{t}\mathbf{x}=0$과 같이 두 가지 방법으로 표현할 수 있다. 또한, 두 직선 $\mathbf{l},\mathbf{l}^{'}$이 교차하는 한 점은 $\mathbf{x}=\mathbf{l}&times; \mathbf{l}^{'}$이고 두 점 $\mathbf{x}, \mathbf{x}^{'}$을 통과하는 직선 $\mathbf{l}$은 $\mathbf{l}= \mathbf{x}&times; \mathbf{x}^{'}$으로 표현할 수 있는데 이는 기본적으로 점과 직선의 위치가 바뀌었을 뿐 동일한 공식을 사용한다.
</p>

<p>
이와 같이 <b>$\mathbb{p}^{2}$공간에서는 점과 직선이 동일한 공식에 대해 위치를 바꾸어도 성립하는 대칭성을 가진다. 즉, 두 점을 통과하는 직선의 공식은 두 직선이 교차하는 한 점의 공식과 대칭이다.</b>
</p>
</div>
</div>
</div>

<div id="outline-container-org6f68b03" class="outline-3">
<h3 id="org6f68b03"><span class="section-number-3">1.3</span> Conics and dual conics</h3>
<div class="outline-text-3" id="text-1-3">
<p>
conic이란 평면에서 이차식으로 정의된 곡선을 의미한다. 일반적인 공식으로는
</p>

\begin{equation}
  \begin{aligned}
    ax^{2} + bxy +cy^{2} +dx+ ey + f = 0
  \end{aligned}
\end{equation}
<p>
과 같으며 계수 값에 따라 원, 타원, 쌍곡선, 포물선 등 다양한 곡선 형태로 표현될 수 있다. conic을 homogeneous form으로 나타내면
</p>

\begin{equation}
  \begin{aligned}
    ax^{2} + bxy +cy^{2} +dxz+ eyz + fz^{2} = 0
  \end{aligned}
\end{equation}
<p>
과 같고 이를 행렬 형태로 정리하면
</p>

\begin{equation}
  \begin{aligned}
    \begin{pmatrix} x&amp;y&amp;z \end{pmatrix} \begin{pmatrix} a&amp;b/2&amp;d/2 \\ b/2&amp;c&amp;e/2 \\ d/2&amp;e/2&amp;f \end{pmatrix} \begin{pmatrix} x\\y\\z \end{pmatrix} =0 
  \end{aligned}
\end{equation}
<p>
꼴로 쓸 수 있으며 이 때 대칭행렬 $\begin{pmatrix}a&amp;b/2&amp;d/2 \\ b/2&amp;c&amp;e/2 \\ d/2&amp;e/2&amp;f \end{pmatrix}$를 conic $\mathbf{c}$라고 한다.
</p>
</div>

<div id="outline-container-orgdf86b47" class="outline-4">
<h4 id="orgdf86b47"><span class="section-number-4">1.3.1</span> Five points define a conic</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
conic $\mathbf{c}$가 유일하게 결정되기 위해서는 다섯개의 점이 필요하다. 하나의 점에 대한 conic 방정식은 다음과 같이 다시 쓸 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; ax^{2} + bxy +cy^{2} +dxz+ eyz + fz^{2} = 0 \\
    &amp; \rightarrow \begin{pmatrix} x_{i}^{2}&amp;x_{i}y_{i}&amp;y_{i}^{2}&amp;x_{i}&amp;y_{i}&amp;1 \end{pmatrix} \mathbf{c} = 0
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{c}= \begin{pmatrix}a&amp;b&amp;c&amp;d&amp;e&amp;f \end{pmatrix}&isin; \mathbb{r}^{6}$인 벡터를 의미한다. $\mathbf{c}$는 5 자유도를 가지므로 
</p>

\begin{equation}
  \begin{aligned}
    &amp; \underbrace{\begin{bmatrix}
      x_{1}^{2}&amp;x_{1}y_{1}&amp;y_{1}^{2}&amp;x_{1}&amp;y_{1}&amp;1 \\
      x_{2}^{2}&amp;x_{2}y_{2}&amp;y_{2}^{2}&amp;x_{2}&amp;y_{2}&amp;1 \\
      x_{3}^{2}&amp;x_{3}y_{3}&amp;y_{3}^{2}&amp;x_{3}&amp;y_{3}&amp;1 \\
      x_{4}^{2}&amp;x_{4}y_{4}&amp;y_{4}^{2}&amp;x_{4}&amp;y_{4}&amp;1 \\
      x_{5}^{2}&amp;x_{5}y_{5}&amp;y_{5}^{2}&amp;x_{5}&amp;y_{5}&amp;1 \\
    \end{bmatrix}}_{\mathbf{a}} \mathbf{c} = 0
  \end{aligned}
\end{equation}
<p>
위 식과 같이 <b>총 5개의 점을 사용하면 $\mathbf{a} \in \mathbb{r}^{5\times 6}$행렬의 null space 벡터가 유일한 $\mathbf{c}$의 해가 되고 conic을 유일하게 결정한다.</b>
</p>
</div>
</div>

<div id="outline-container-orgad61825" class="outline-4">
<h4 id="orgad61825"><span class="section-number-4">1.3.2</span> Tangent lines to conics</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
conic $\mathbf{c}$위의 한 점 $\mathbf{x}$에서 접선 $\mathbf{l}$은
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l} = \mathbf{cx}
  \end{aligned}
\end{equation}
<p>
와 같이 쓸 수 있다.
</p>

<p>
임의의 두 직선 $\mathbf{l},\mathbf{m}$을 포함하는 conic $\mathbf{c}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{c} = \mathbf{l}\mathbf{m}^{t} + \mathbf{m}\mathbf{l}^{t}
  \end{aligned}
\end{equation}
<p>
과 같이 쓸 수 있다.
</p>
</div>
</div>

<div id="outline-container-orga4242e7" class="outline-4">
<h4 id="orga4242e7"><span class="section-number-4">1.3.3</span> Dual conics</h4>
<div class="outline-text-4" id="text-1-3-3">
<p>
<b>projective space $\mathbb{p}^{n}$은 $\mathbb{r}^{n+1}$공간 상의 원점을 지나는 직선들의 집합(1차원 부분 선형공간)을 의미</b> 한다. 이와 대칭을 이루는 <b>dual projective space $(\mathbb{p}^{n})^{&or;}$는 $\mathbb{r}^{n}$공간 상 n차원 부분 선형공간들의 집합을 의미</b> 한다.
</p>

<p>
n차원 부분 선형공간 $\mathbf{h}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{h} = \{\sum_{i=0}^{n}a_{i}x_{i}=0 \ | \ a_{i}\neq 0 \ \text{ for some i}\}.
  \end{aligned}
\end{equation}
<p>
이 때 $a_{0},&ctdot;,a_{n} &isin; \mathbb{p}^{n}$을 하나의 projective space로 생각할 수 있고 하나의 dual projective space는 하나의 proejctive space와 대칭 관계를 가진다.
</p>

<p>
$\mathbb{p}^{2}$상의 conic $\mathbf{c}$가 주어졌을 때, <b>$\mathbf{c}$의 dual conic $\mathbf{c}^{</b>}$은 $(\mathbb{p}^{2})^{\vee}$공간 상의 conic을 의미하며 $\mathbf{c}^{*}$은 conic $\mathbf{c}$의 접선에 대한 정보를 가지고 있다.* $(\mathbb{p}^{2})^{&or;}$는 $\mathbb{p}^{2}$상의 직선을 파라미터화하여 나타낼 수 있다. $\hat{\mathbf{c}}^{*}$는 다음과 같이 나타낼 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{c}^{*}_{ij} = (-1)^{i+j} \det(\hat{\mathbf{c}}_{ij})
  \end{aligned}
\end{equation}
<p>
여기서 $\hat{\mathbf{c}}_{ij}$는 $\mathbf{c}_{ij}$에서 i번째 행, j번째 열을 제거한 행렬을 의미한다.
</p>

<p>
\vspace{5mm}
임의의 직선 $\mathbf{l}$이 주어졌을 때 $\mathbf{l}$이 conic $\mathbf{c}$에 접하는 필요충분조건은 다음과 같다. 
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}^{t}\mathbf{c}^{*}\mathbf{l} = 0
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-orgccb633b" class="outline-4">
<h4 id="orgccb633b"><span class="section-number-4">1.3.4</span> Proof</h4>
<div class="outline-text-4" id="text-1-3-4">
<p>
($\rightarrow$) conic $\mathbf{c}&isin; \mathbb{r}^{3&times; 3}$의 rank가 3이고 non-singular하다고 가정하면 $\mathbf{c}^{*} = det(\mathbf{c}^{-1})$와 같이 나타낼 수 있다. $\mathbf{c}$위의 한 점 $\mathbf{x}&isin; \mathbf{c}$가 주어졌을 때 $\mathbf{x}$에서 접선 $\mathbf{l}$은 $\mathbf{l}= \mathbf{cx}$로 나타낼 수 있다. 이를 위 식에 대입하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}^{t}\mathbf{c}^{*}\mathbf{l} &amp; = (\mathbf{cx})^{t}\mathbf{c}^{*}\mathbf{cx} \\
    &amp; = \mathbf{x}^{t}\mathbf{c}^{t}\mathbf{c}^{*}\mathbf{cx} \\
    &amp; = \det(\mathbf{x}^{t}\mathbf{c}^{t}\mathbf{x}) &amp; \because \mathbf{c}^{*}=\det(\mathbf{c}^{-1}) \\ 
    &amp; = 0  &amp; \because \mathbf{x} \in \mathbf{c}, (\mathbf{x}^{t}\mathbf{c}\mathbf{x})^{t} = 0
  \end{aligned}
\end{equation}
<p>
($\leftarrow$) 직선 $\mathbf{l}$과 dual conic $\mathbf{c}^{*}$가 $\mathbf{l}^{t}\mathbf{c}^{*}\mathbf{l}=0$을 만족할 때 $\mathbf{l}$과 $\mathbf{c}^{*}$가 한 점 $\mathbf{x}$에서 만난다는 것을 증명하면 된다. 이 때 $\mathbf{l} = \mathbf{cx}$공식이 성립한다.
</p>

<p>
$\mathbf{c}$는 non-singualr하기 때문에 역행렬이 존재하므로 $\mathbf{x}= \mathbf{c}^{-1}\mathbf{l}$과 같이 나타낼 수 있다. 따라서 $\mathbf{x}^{t}\mathbf{l}$은
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{t}\mathbf{l} &amp; = (\mathbf{c}^{-1}\mathbf{l})^{t}\mathbf{l} \\
    &amp; = \mathbf{l}^{t}\mathbf{c}^{-t}\mathbf{l} = 0 \\
    &amp; (\mathbf{c}^{*} \sim \mathbf{c}^{-1} \ \text{ by assumption.}) \\ 
  \end{aligned}
\end{equation}
<p>
과 같고 $\mathbf{x}^{t}\mathbf{cx}$는
</p>
\begin{equation}
  \begin{aligned}
    \mathbf{x}^{t}\mathbf{c}\mathbf{x} &amp; = (\mathbf{c}^{-1}\mathbf{l})^{t}\mathbf{c}\mathbf{c}^{-1}\mathbf{l} \\
    &amp; = \mathbf{l}^{t}\mathbf{c}^{-t}\mathbf{cc}^{-1}\mathbf{l} \\
    &amp; = \mathbf{l}^{t}\mathbf{c}^{-1}\mathbf{l} = 0 \\
    &amp; (\mathbf{c}^{-t} = \mathbf{c}^{-1} \ \ \mathbf{c} \text{ is symmetric.})
  \end{aligned}
\end{equation}
<p>
공식이 성립함에 따라 $\mathbf{x}$는 $\mathbf{l}$과 $\mathbf{c}$의 교점임이 증명된다.
</p>

\begin{equation}
  \begin{aligned}
    \{\mathbf{x}\} =  \mathbf{l} \cap \mathbf{c}
  \end{aligned}
\end{equation}
</div>
</div>
</div>

<div id="outline-container-orgb027165" class="outline-3">
<h3 id="orgb027165"><span class="section-number-3">1.4</span> Projective transformations</h3>
<div class="outline-text-3" id="text-1-4">
<p>
$\mathbb{p}^{2}$의 projective transformation은 non-singular인 $3\times3$행렬로 정의되는 $\mathbb{p}^{2} \rightarrow \mathbb{p}^{2}$사상을 의미하며 직선을 직선으로 보내는 성질을 가진다. <b>projective transformation은 collineation, projectivity 또는 homography</b> 라고도 불린다. 
</p>
</div>
</div>

<div id="outline-container-org7070f5a" class="outline-3">
<h3 id="org7070f5a"><span class="section-number-3">1.5</span> A hierarchy of transformations</h3>
<div class="outline-text-3" id="text-1-5">

<div class="figure">
<p><img src="/pictures/200607_mvg/07.png" alt="07.png" align="center" width="300px" />
</p>
</div>

<p>
projective 변환은 변환 전과 후 사이에 어떤 성질을 보존하느냐에 따라 여러 종류의 변환 행렬이 존재한다.
</p>
</div>

<div id="outline-container-org0399d4e" class="outline-4">
<h4 id="org0399d4e"><span class="section-number-4">1.5.1</span> Class 1: isometries</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
물체가 변환 전과 후 사이에 물체의 크기가 동일한 경우 해당 변환을 isometry 변환이라고 부른다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{h}_{iso} = \begin{bmatrix} \mathbf{a}&amp;\mathbf{t} \\ \mathbf{0} &amp; 1 \end{bmatrix}
  \end{aligned} 
\end{equation}
<p>
이 때 $\mathbf{a}&isin; \mathbb{r}^{2&times;2}$는 2차원 물체의 회전과 반사(reflection)을 포함한 행렬이며 $\mathbf{t}&isin; \mathbb{r}^{2}$는 2차원 물체의 이동 벡터이다.
</p>
</div>
</div>

<div id="outline-container-org98eba0c" class="outline-4">
<h4 id="org98eba0c"><span class="section-number-4">1.5.2</span> Class 2: similarity transformations</h4>
<div class="outline-text-4" id="text-1-5-2">
<p>
isometry 변환에 스케일을 의미하는 $s$가 추가된 변환을 similarity 변환이라고 하며 <b>물체의 이동 및 회전에 추가적으로 스케일까지 같이 변환</b> 하는 성질을 가진다. 이 때 기존의 $\mathbf{a}$행렬에서 reflection의 성질을 제거한 $\mathbf{r}$행렬을 사용한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{h}_{s} = \begin{bmatrix} s\mathbf{r}&amp;\mathbf{t} \\ \mathbf{0} &amp; 1 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
similarity 변환은 물체의 각도와 길이의 비율을 보존되지만 스케일은 보존되지 않는다. 두 물체가 similarity 변환까지 동일하다는 의미는(=up to scale) 두 물체의 형태는 동일하지만 스케일에 차이가 있다는 의미이다.
</p>
</div>
</div>

<div id="outline-container-orgcac110b" class="outline-4">
<h4 id="orgcac110b"><span class="section-number-4">1.5.3</span> Class 3: affine transformations</h4>
<div class="outline-text-4" id="text-1-5-3">
<p>
affine 변환은 isometry 변환에서 행렬 $\mathbf{a}$의 아무 제약조건이 없는 변환행렬을 의미한다. 변환 후 물체는 일반적으로 변환 전과 다른 형태를 가진다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{h}_{a} = \begin{bmatrix} \mathbf{a}&amp;\mathbf{t} \\ \mathbf{0} &amp; 1 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
$\mathbf{h}_{a}$는 6자유도를 가지므로  세 개의 대응점 쌍으로부터 $\mathbf{h}_{a}$를 유일하게 결정할 수 있다.
</p>

<p>
affine 변환은 물체의 길이 비율을 보존하며 또한 평행한 직선을 보존하는 성질을 가진다. 따라서 무한대 직선(line at infinity) $\mathbf{l}_{&infin;}$를 affine 변환해도 여전히 $\mathbf{l}_{&infin;}$가 된다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{h}_{a}(\mathbf{l}_{\infty}) = \mathbf{l}_{\infty}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-org3be7278" class="outline-4">
<h4 id="org3be7278"><span class="section-number-4">1.5.4</span> Class 4: projective transformations</h4>
<div class="outline-text-4" id="text-1-5-4">
<p>
마지막으로 projective 변환은 변환행렬의 마지막 행이 $(0,0,1)$이 아닌 임의의 형태를 가지는 변환행렬을 의미한다. projective 변환은 직선을 직선으로 사상한다는 성질 외에는 이전에 설명한 모든 성질들을 보존하지 않는다는 특징이 있다. 평행한 직선 또한 projective 변환을 수행하면 평행하지 않게되며 물체의 길이비 또한 달라지게 된다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{h}_{p} = \begin{bmatrix} \mathbf{a}&amp;\mathbf{t} \\ \mathbf{v}^{t}&amp;v\end{bmatrix}
  \end{aligned}
\end{equation}
<p>
이 때 $\mathbf{v}=\begin{bmatrix}v_{1}&amp;v_{2} \end{bmatrix}$는 임의의 2차원 벡터를 의미하며 $v$또한 임의의 스칼라 값을 의미한다. projective 변환행렬 $\mathbf{h}_{p}$는 8자유도를 가지므로 일반적으로 4개의 대응점 쌍을 통해 $\mathbf{h}_{p}$을 유일하게 결정할 수 있다.
</p>
</div>
</div>
</div>

<div id="outline-container-orge6b395b" class="outline-3">
<h3 id="orge6b395b"><span class="section-number-3">1.6</span> Decomposition of a projective transformation</h3>
<div class="outline-text-3" id="text-1-6">
<p>
앞서 설명한 변환행렬의 계층구조에 따라 projective 변환행렬은 다른 변환행렬들의 곱으로 표현할 수 있다. 반대로 말하면, <b>projective 변환은 다른 변환행렬들로 분해가 가능하다.</b> 임의의 projective 변환 $\mathbf{h}_{p}$가 주어졌을 때
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{h}_{p} &amp; = \mathbf{h}_{s}\mathbf{h}_{a}\mathbf{h}_{p} \\
    &amp; = \begin{bmatrix} s \mathbf{r}&amp;\mathbf{t} \\\mathbf{0}&amp;1 \end{bmatrix} \begin{bmatrix} \mathbf{k} &amp; \mathbf{0} \\ \mathbf{0} &amp; 1 \end{bmatrix} \begin{bmatrix} i &amp; \mathbf{0}\\ \mathbf{v}^{t}&amp; v\end{bmatrix} \\
      &amp; = \begin{bmatrix} \mathbf{a}&amp;\mathbf{t} \\ \mathbf{v}^{t}&amp;v \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
와 같이 <b>projective 변환 $\mathbf{h}_{p}$는 similarity 변환 $\mathbf{h}_{s}$과 affine 변환 $\mathbf{h}_{a}$그리고 나머지 변환 $\mathbf{h}_{p}$의 곱으로 분해가 가능</b> 하다. 이 때, $\mathbf{a}=s\mathbf{r}\mathbf{k}+\mathbf{tv}^{t}$이고 $\mathbf{k}$는 $det(\mathbf{k})=1$로 정규화된 상삼각행렬(upper-triangle) 행렬을 의미한다. 단, 위와 같은 분해는 $v &ne; 0$일 때만 가능하며 $s &gt;0$인 경우 분해가 유일하게 결정된다.
</p>
</div>
</div>

<div id="outline-container-org12b8784" class="outline-3">
<h3 id="org12b8784"><span class="section-number-3">1.7</span> Recovery of affine and metric properties from images</h3>
<div class="outline-text-3" id="text-1-7">
<p>
임의의 이미지가 주어졌을 때 이미지 상에서 평행한 선들과 직교한 선들을 사용하여 affine 성질과 metric 성질을 복원할 수 있다.
</p>
</div>

<div id="outline-container-orgaec40f0" class="outline-4">
<h4 id="orgaec40f0"><span class="section-number-4">1.7.1</span> The line at infinity</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
affine 성질은 평행한 선들이 보존되는 affine 변환의 성질을 의미하며 무한대 직선(line at infinity) $\mathbf{l}_{&infin;} = \begin{bmatrix}x&amp;y&amp;0 \end{bmatrix}$을 사용하여 복원할 수 있다. 
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{h}_{a}\mathbf{l}_{\infty} =\begin{bmatrix} \mathbf{a}&amp;\mathbf{t} \\0&amp;1 \end{bmatrix} \begin{bmatrix} x\\y\\0 \end{bmatrix} = \begin{bmatrix} a \begin{bmatrix} x\\y \end{bmatrix} \\ 0 \end{bmatrix} = \mathbf{l}_{\infty}^{'}
  \end{aligned}
\end{equation}
<p>
위와 같이 $\mathbf{l}_{&infin;}$를 affine 변환해도 여전히 무한대에 위치한다.
</p>
</div>
</div>

<div id="outline-container-org57dff60" class="outline-4">
<h4 id="org57dff60"><span class="section-number-4">1.7.2</span> Recovery of affine properties from images</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
<b>임의의 homography $\mathbf{h}$가 affine 성질을 보존한다는 의미는 곧 무한대 직선 $\mathbf{l}_{&infin;}$를 $\mathbf{h}$변환해도 무한대에 위치한 직선이 된다는 의미</b> 이다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{h}(\mathbf{l}_{\infty}) = \mathbf{hl}_{\infty} = \mathbf{l}_{\infty}^{'}
  \end{aligned}
\end{equation}
<p>
무한대 직선 $\mathbf{l}_{&infin;}$는 $\mathbf{l}_{&infin;}=(x,y,0)^{t}$와 같이 마지막 항이 0인 특징이 있으므로 임의의 homography $\mathbf{h}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{h}\mathbf{l}_{\infty} = \begin{bmatrix} \mathbf{a}&amp; \mathbf{t} \\ \mathbf {v} &amp; v \end{bmatrix} \begin{bmatrix} x\\y\\0 \end{bmatrix} = \begin{bmatrix} *\\ * \\0 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
이 성립하므로 $\mathbf{v}=(0,0)$이 되고 $v$는 스케일 상수가 되어 1로 변환이 가능하다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{h} = \begin{bmatrix} \mathbf{a}&amp;\mathbf{t} \\ \mathbf{0} &amp; v \end{bmatrix} = \begin{bmatrix} \mathbf{a}/v &amp; \mathbf{t}/v \\ \mathbf{0} &amp; 1 \end{bmatrix}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-orgab3a971" class="outline-4">
<h4 id="orgab3a971"><span class="section-number-4">1.7.3</span> Recovery of metric properties from images</h4>
</div>
</div>
</div>

<div id="outline-container-orgf7e3dfb" class="outline-2">
<h2 id="orgf7e3dfb"><span class="section-number-2">2</span> More Single View Geometry</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgd03db8e" class="outline-3">
<h3 id="orgd03db8e"><span class="section-number-3">2.1</span> Camera calibration and the image of the absolute conic</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-org2321c0d" class="outline-4">
<h4 id="org2321c0d"><span class="section-number-4">2.1.1</span> Result 8.15</h4>
<div class="outline-text-4" id="text-2-1-1">

<div class="figure">
<p><img src="/pictures/200607_mvg/09.png" alt="09.png" align="center" width="400px" />
</p>
</div>

<p>
원점에 위치한 카메라 $\mathbf{C}$가 있을 때 한 점 $\mathbf{x}$를 Back-projection하면 카메라 중심을 지나는 직선 $\mathbf{d}$가 생성되는데 이 때, $\mathbf{d}= \mathbf{K}^{-1}\mathbf{x}$의 관계를 가진다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x} &amp; = \mathbf{P} \begin{bmatrix} \lambda \mathbf{d} \\ 1 \end{bmatrix} \\
    &amp; = \mathbf{K} [ \mathbf{I} | 0 ] \begin{bmatrix} \lambda \mathbf{d} \\ 1 \end{bmatrix} = \mathbf{Kd} \\
  \end{aligned}
\end{equation}
<p>
따라서 다음의 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x} = \mathbf{Kd} \\
    &amp; \mathbf{d} = \mathbf{K}^{-1}\mathbf{x}
  \end{aligned}
\end{equation}

<div class="figure">
<p><img src="/pictures/200607_mvg/08.png" alt="08.png" align="center" width="400px" />
</p>
</div>


<p>
이미지 평면 상의 두 점 $\mathbf{x}_{1}, \mathbf{x}_{2}$를 Back-projection하면 각각 $\mathbf{d}_{1}, \mathbf{d}_{2}$의 직선이 생성되는데 이 때 두 직선이 이루는 각도는 다음과 같이 계산할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \cos\theta &amp; = \frac{\mathbf{d}_{1}^{T}\mathbf{d}_{2}}{\sqrt{\mathbf{d}_{1}^{T}\mathbf{d}_{1}}\sqrt{\mathbf{d}_{2}^{T}\mathbf{d}_{2}}} = \frac{(\mathbf{K}^{-1}\mathbf{x}_{1})^{T}(\mathbf{K}^{-1}\mathbf{x}_{2})}{\sqrt{(\mathbf{K}^{-1}\mathbf{x}_{1})^{T}(\mathbf{K}^{-1}\mathbf{x}_{1})}\sqrt{(\mathbf{K}^{-1}\mathbf{x}_{2})^{T}(\mathbf{K}^{-1}\mathbf{x}_{2})}} \\
    &amp; = \frac{\mathbf{x}_{1}^{T}(\mathbf{K}^{-T}\mathbf{K}^{-1})\mathbf{x}_{2}}{\sqrt{\mathbf{x}_{1}^{T}\mathbf{K}^{-T}\mathbf{K}^{-1}\mathbf{x}_{1}}\sqrt{\mathbf{x}_{2}^{T}\mathbf{K}^{-T}\mathbf{K}^{-1}\mathbf{x}_{2}}}
  \end{aligned}
\end{equation}
<p>
이 때, <b>$\mathbf{K}^{-T}\mathbf{K}^{-1}$은 Image of Absolute Conic</b> 을 의미한다.
</p>
</div>
</div>

<div id="outline-container-org1f0200b" class="outline-4">
<h4 id="org1f0200b"><span class="section-number-4">2.1.2</span> Result 8.16</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
이미지 평면에 있는 직선 $\mathbf{l}$위에 한 점 $\mathbf{x}$가 위치할 때, 점과 직선 사이에는 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{T}\mathbf{l} =0
  \end{aligned}
\end{equation}

<div class="figure">
<p><img src="/pictures/200607_mvg/10.png" alt="10.png" align="center" width="400px" />
</p>
</div>

<p>
이 때, $\mathbf{l}$를 Back-projection하면 평면 $&pi;$가 생성되고 $\mathbf{x}$를 Back-projection하면 $\mathbf{d}=\mathbf{K}^{-1}\mathbf{x}$가 생성되는데 평면 $&pi;$와 직선 $\mathbf{d}$사이에는 $(\mathbf{K}^{-1}\mathbf{x})^{T}&pi; = 0$이 성립하고 이를 정리하면 $\mathbf{x}^{T}(\mathbf{K}^{-T}&pi;)=0$가 성립한다. $\mathbf{x}^{T}\mathbf{l}=0$의 공식에 따라 결론적으로 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{K}^{-T}\pi  = \mathbf{l} \\
    &amp; \pi = \mathbf{K}^{T}\mathbf{l}
  \end{aligned}
\end{equation}
</div>
</div>
</div>

<div id="outline-container-org1fd60af" class="outline-3">
<h3 id="org1fd60af"><span class="section-number-3">2.2</span> The image of the absolute conic</h3>
<div class="outline-text-3" id="text-2-2">
<p>
무한대 평면 $&pi;_{&infin;}$가 있을 때 $\pi_{\infty}$위에 위치한 무한대 점 $\mathbf{X}_{&infin;} = (\mathbf{d}^{T}, 0)^{T}$이 있다고 하면 이를 카메라 $\mathbf{P}=\mathbf{KR}[\mathbf{I}|-~{\mathbf{C}}]$에 프로젝션시키면 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x} = \mathbf{PX}_{\infty} = \mathbf{KR}[\mathbf{I} | -\tilde{\mathbf{C}}] \begin{bmatrix} \mathbf{d} \\0 \end{bmatrix} = \mathbf{KRd}
  \end{aligned}
\end{equation}
<p>
즉, 무한대 평면 $\pi_{\infty}$위의 점 $\mathbf{d}$에 대해 $\mathbf{x}= \mathbf{Hd}$인 Homography가 존재한다고 했을 때 Homography $\mathbf{H}$는 $\mathbf{H}=\mathbf{KR}$과 같다. 무한대에 위치한 Absolute Conic $&Omega;_{&infin;}$는 $\mathbf{I}_{3}&isin; &pi;_{&infin;}$이다. $&Omega;_{&infin;}$를 Homography 변환하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}(\Omega_{\infty}) &amp; = \mathbf{H}^{-T}\mathbf{I}_{3}\mathbf{H}^{-1} \\
    &amp; = (\mathbf{KR})^{-T}\mathbf{I}_{3}(\mathbf{KR})^{-1} \\
    &amp; = \mathbf{K}^{-T}\mathbf{R}^{-T}\mathbf{R}^{-1}\mathbf{K}^{-1} \\
    &amp; = \mathbf{K}^{-T}\mathbf{K}^{-1} 
  \end{aligned}
\end{equation}
<p>
이에 따라 <b>Image of Absolute Conic $\mathbf{w} = \mathbf{K}^{-T}\mathbf{K}^{-1}$</b> 이 된다.
</p>

<p>
이미지 상의 두 점 $\mathbf{x}_{1}, \mathbf{x}_{2}$를 Back-projection 했을 때, 두 직선이 이루는 각도는
</p>

\begin{equation}
  \begin{aligned}
    \cos\theta = \frac{\mathbf{x}_{1}^{T}\mathbf{w}\mathbf{x}_{2}}{\sqrt{\mathbf{x}_{1}^{T}\mathbf{w}\mathbf{x}_{2}}\sqrt{\mathbf{x}_{2}^{T}\mathbf{w}\mathbf{x}_{2}}}
  \end{aligned}
\end{equation}
<p>
가 되고 이를 Homography 변환하면
</p>

\begin{equation}
  \begin{aligned}
    \cos\theta = \frac{(\mathbf{Hx}_{1})^{T}\mathbf{H}^{-T}\mathbf{w}\mathbf{H}^{-1}(\mathbf{Hx}_{2})}{\sqrt{*}\sqrt{*}}
  \end{aligned}
\end{equation}
<p>
이 되므로 Homography 변환을 해도 두 각도는 여전히 보존된다. 만약 두 직선 $\mathbf{K}^{-1}\mathbf{x}_{1}$과 $\mathbf{K}^{-1}\mathbf{x}_{2}$가 직교하는 경우 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}_{1}^{T}\mathbf{w}\mathbf{x}_{2} = 0
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-org8333916" class="outline-3">
<h3 id="org8333916"><span class="section-number-3">2.3</span> Orthogonality and $\mathbf{w}$</h3>
<div class="outline-text-3" id="text-2-3">

<div class="figure">
<p><img src="/pictures/200607_mvg/17.png" alt="17.png" align="center" width="400px" />
</p>
</div>

<p>
이미지 평면 상의 두 점 $\mathbf{x}_{1}, \mathbf{x}_{2}$를 Back-projection하면 두 직선 $\mathbf{K}^{-1}\mathbf{x}_{1}, \mathbf{K}^{-1}\mathbf{x}_2$가 생성된다. 만약 두 직선이 직교하는 경우 $\mathbf{x}_{1}^{T}\mathbf{w}\mathbf{x}_{2}=0$의 공식이 성립한다. 그리고 $\mathbf{x}_{1}$가 직선 $\mathbf{l}$에 포함되어 있으면 $\mathbf{x}_{1}^{T}\mathbf{l}=0$이 성립한다. 위 두 공식을 결합하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}_{1}^{T}\mathbf{w}\mathbf{x}_{2}=0 \\
    &amp; \mathbf{x}_{1}^{T}\mathbf{l} = 0 \\
    &amp; \therefore \mathbf{l} = \mathbf{wx}_{2}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-org58a08d7" class="outline-3">
<h3 id="org58a08d7"><span class="section-number-3">2.4</span> Vanishing points and vanishing lines</h3>
<div class="outline-text-3" id="text-2-4">

<div class="figure">
<p><img src="/pictures/200607_mvg/13.png" alt="13.png" align="center" width="400px" />
</p>
</div>

<p>
3차원 공간 상의 점 $\mathbf{A}$와 직선의 방향 $\mathbf{D}=(\mathbf{d}^{T},0)^{T}$가 존재할 때 직선 위에 존재하는 점 $\mathbf{X}(&lambda;)$는 다음과 같이 정의된다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{X}(\lambda) = \mathbf{A} + \lambda \mathbf{D} = \begin{bmatrix} \tilde{\mathbf{A}} + \lambda \mathbf{d} \\ 1 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
점 $\mathbf{X}(&lambda;)$를 이미지 평면에 프로젝션한 점 $\mathbf{x}(&lambda;) = \mathbf{PX}(&lambda;), \ \ \text{where }\ \mathbf{P}= \mathbf{K}[\mathbf{I}|0]$는 다음과 같이 정의된다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}(\lambda) = \mathbf{PX}(\lambda) = \mathbf{PA} + \lambda \mathbf{PD} = \mathbf{a} + \lambda \mathbf{Kd}
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{a}$는 Image of $\mathbf{A}$를 의미한다. 결론적으로 소실점(vanishing point) $\mathbf{v}$는 다음과 같이 정의된다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{v} = \lim_{\lambda \rightarrow \infty}\mathbf{x}(\lambda) = \lim_{\lambda \rightarrow \infty}(\mathbf{a} + \lambda \mathbf{Kd}) = \mathbf{Kd} \\
    &amp; \mathbf{v} = \mathbf{Kd}
  \end{aligned}
\end{equation}
</div>

<div id="outline-container-org944b5c4" class="outline-4">
<h4 id="org944b5c4"><span class="section-number-4">2.4.1</span> Camera rotation from vanishing points</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
소실점을 사용하여 카메라의 회전을 계산할 수 있다. 이미지 1에서 추출한 소실점 $\mathbf{v}_{1}$과 이미지 2에서 추출한 소실점 $\mathbf{v}_{2}$이 있을 때, $\mathbf{v}_{1}$의 방향은 $\mathbf{d}_{1} = \mathbf{K}^{-1}\mathbf{v}_{1}$이 되고 $\mathbf{v}_{2}$의 방향은 $\mathbf{d}_{2} = \mathbf{K}^{-1}\mathbf{v}_{2}$가 된다.
</p>

<p>
$\mathbf{K}, \mathbf{v}_{1}, \mathbf{v}_{2}$의 값을 모두 알고 있다고 가정하면 $\mathbf{d}_{1}, \mathbf{d}_{2}$의 값을 계산할 수 있게 되고 두 방향벡터는 다음과 같은 관계를 가진다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{d}_{2} = \mathbf{Rd}_{2}
  \end{aligned}
\end{equation}
<p>
이 때, <b>회전행렬 $\mathbf{R}$의 자유도는 3이므로 2개 이상의 소실점 쌍을 사용하면 회전행렬을 복원</b> 할 수 있다.
</p>
</div>
</div>
</div>


<div id="outline-container-orgd018b92" class="outline-3">
<h3 id="orgd018b92"><span class="section-number-3">2.5</span> Vanishing Lines</h3>
<div class="outline-text-3" id="text-2-5">

<div class="figure">
<p><img src="/pictures/200607_mvg/18.png" alt="18.png" align="center" width="700px" />
</p>
</div>

<p>
두 개 이상의 소실점(vanishing point) $\mathbf{v}_{i}, i=1,2,\cdots$들을 이어준 직선을 소실선(vanishing line) $\mathbf{l}$이라고 한다. 예를 들어 이미지 상의 체크보드가 있고 이로 인해 2개의 소실점 $\mathbf{v}_{1}, \mathbf{v}_{2}$를 구한 경우를 생각해보자. 이 경우, <b>두 소실점 $\mathbf{v}_{1},\mathbf{v}_{2}$를 이어주는 직선 $\mathbf{l}$을 체크보드 평면 $&pi;$의 소실선</b> 이라고 한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l} = \text{image of } \pi \cap \pi_{\infty}
  \end{aligned}
\end{equation}
<p>
결론적으로 <b>소실선 $\mathbf{l}$은 카메라 중심을 포함하고 체크보드 평면 $&pi;$과 평행인 평면 $&pi;^{'}$와 이미지 평면의 교집합</b> 을 의미한다. $&pi;^{'}$은 소실선 $\mathbf{l}$을 Back-projection함으로써 계산할 수 있다. 이 때 평면과 직선의 관계에 따라
</p>

\begin{equation}
  \begin{aligned}
    \pi^{'} = \mathbf{K}^{T}\mathbf{l}
  \end{aligned}
\end{equation}
<p>
과 같이 계산할 수 있다.
</p>
</div>
</div>

<div id="outline-container-orge72b6aa" class="outline-3">
<h3 id="orge72b6aa"><span class="section-number-3">2.6</span> Orthogonality relationships amongst vanishing points and lines</h3>
<div class="outline-text-3" id="text-2-6">

<div class="figure">
<p><img src="/pictures/200607_mvg/20.png" alt="20.png" align="center" width="400px" />
</p>
</div>

<p>
이미지 평면에서 두 개의 소실점 $\mathbf{v}_{1}, \mathbf{v}_{2}$을 Back-projection한 직선들이 서로 직교하는 조건은 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{v}_{1}^{T}\mathbf{w}\mathbf{v}_{2} = 0
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{w}= \mathbf{K}^{-T}\mathbf{K}^{-1}$은 Image of Absolute Conic이다.
</p>

<p>
이미지 평면에서 소실점 $\mathbf{v}$을 Back-projection한 직선과 소실선 $\mathbf{l}$을 Back-projection한 평면이 직교하는 조건은 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l} = \mathbf{w}\mathbf{v}
  \end{aligned}
\end{equation}
<p>
이미지 평면에서 두 개의 직선 $\mathbf{l}_{1}, \mathbf{l}_{2}$를 Back-projection한 두 평면들이 서로 직교하는 경우 다음을 만족한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}_{1}^{T}\mathbf{w}^{*}\mathbf{l}_{2} =0
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{w}^{*}$는 Image of Dual Absolute Conic이다.
</p>
</div>
</div>

<div id="outline-container-org0f58b29" class="outline-3">
<h3 id="org0f58b29"><span class="section-number-3">2.7</span> Affine 3D measurements and reconstruction</h3>
<div class="outline-text-3" id="text-2-7">
<p>
3차원 공간 상의 평면 $&pi;$에 수직인 물체들의 소실점을 수직소실점(vertical vanishing point) $\mathbf{v_{&perp;}}$라고 한다. 평면 $&pi;$의 소실선 $\mathbf{l}$과 수직소실점을 이용하면 물체의 크기를 스케일을 제외한 파라미터(up to scale)까지 계산할 수 있다. 정확하게 말하면 <b>소실선 $\mathbf{l}$과 수직소실점 $\mathbf{v}_{&perp;}$를 알면 평면 $&pi;$에 수직한 선분들의 상대적 길이를 알 수 있다.</b>
</p>

<p>
예를 들면, 3차원 공간 상의 평면 $&pi;$에 위치한 두 점 $\mathbf{B}_{1}, \mathbf{B}_{2}$가 있고 이를 지나면서 $&pi;$에 수직인 직선 $\mathbf{L}_{1}, \mathbf{L}_{2}$가 있다고 가정한다. 그리고 두 직선 $\mathbf{L}_{1}, \mathbf{L}_{2}$의 끝점 $\mathbf{T}_{1}, \mathbf{T}_{2}$가 있을 경우 <b>소실선 $\mathbf{l}$과 수직소실점 $\mathbf{v}_{&perp;}$를 사용하여 $\mathbf{T}_{1}, \mathbf{T}_{2}$의 상대적 길이를 측정</b> 할 수 있다.
</p>

<p>
우선, 모든 요소들을 이미지 평면에 프로젝션시킨다. 이 때, $\mathbf{b}_{1}, \mathbf{b}_{2}$를 잇는 직선과 소실선 $\mathbf{l}$이 만나는 점을 $\mathbf{u}$라고 정의한다. 그리고 $\mathbf{t}_{1}$에서 $\bar{\mathbf{b}_{1}\mathbf{b}_{2}}$에 평행한 직선을 그으면 해당 직선은 $\mathbf{u}$와 접한다. 이 때 $\bar{\mathbf{t}_{1}\mathbf{u}}$와 $\mathbf{v}_{&perp;}\mathbf{b}_{2}$가 만나는 교점을 $~{\mathbf{t}}_{1}$이라고 한다.
</p>

<p>
다음으로 $\bar{\mathbf{v}_{\perp}\mathbf{b}_{2}}$직선을 $\mathbb{P}^{1}$공간의 수직소실점 $\mathbf{v}_{&perp;}$는 무한대의 점 $(1,0)$이 되고 $\mathbf{b}_{1}$은 원점 $(0,1)$되는 직선으로 프로젝션시킨다. 이 때 사용하는 Homography $\mathbf{H}_{2&times;2}$는 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{2\times2} = \begin{bmatrix} 1 &amp; 0 \\ 1 &amp; -\mathbf{v}_{\perp} \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
$\mathbf{H}_{2&times;2}$는 Cross-Ratio를 보장한다. 다음으로 길이의 비를 이용하여 $d_{1} : d_{2} = \mathbf{b}_{1}~{\mathbf{t}}_{1}:\mathbf{b}_{1}\mathbf{t}_{2}$의 비율을 구한다.
</p>

\begin{equation}
  \begin{aligned}
    \frac{d_{1}}{d_{2}} = \frac{\tilde{\mathbf{t}}_{1}(\mathbf{v}_{\perp}-\mathbf{t}_{2})}{\mathbf{t}_{2}(\mathbf{v}_{\perp}-\tilde{\mathbf{t}}_{1})}
  \end{aligned}
\end{equation}
<p>
만약, 수직소실점 $\mathbf{v}_{&perp;}$와 카메라의 주축(principal axis)이 수직인 경우 이미지 상에서 수직소실점은 만나지 않게 되고 아래와 같이 단순하게 비율을 계산할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \frac{d_{1}}{d_{2}} = \frac{\tilde{\mathbf{t}}_{1}-\mathbf{b}_{2}}{\mathbf{t}_{2}-\mathbf{b}_{2}}
  \end{aligned}
\end{equation}
</div>
</div>


<div id="outline-container-org0be45e6" class="outline-3">
<h3 id="org0be45e6"><span class="section-number-3">2.8</span> Determining camera calibration $\mathbf{K}$from a single view</h3>
<div class="outline-text-3" id="text-2-8">
<p>
단안 이미지에서 내부 파라미터 $\mathbf{K}$를 결정하기 위해서는 2가지 제약조건이 필요하다. <b>이미지 제약조건(scene constraint)과 내부 파라미터의 제약조건(internal constraint)</b> 이 있다.
</p>

<p>
이미지 제약조건으로는 이미지 평면에 존재하는 서로 수직인 두 소실점 $\mathbf{v}_{1}, \mathbf{v}_{2}$가 있을 경우 $\mathbf{v}_{1}^{T}\mathbf{w}\mathbf{v}_{2}=0$가 있고, 소실선 $\mathbf{l}$과 소실점 $\mathbf{v}$가 직교하는 경우 이들의 Back-projection은 $\mathbf{l}= \mathbf{wx}$가 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{v}_{1}^{T}\mathbf{w}\mathbf{v}_{2}=0 \\
    &amp; \mathbf{l} \times (\mathbf{wv}) = 0
  \end{aligned}
\end{equation}
<p>
내부 파라미터 제약조건으로는 $\mathbf{K}$가 Zero-Skew인 경우 $w_{12} = w_{21}=0$이 있고 또한, Square Pixels인 경우 $w_{12}=w_{21}=0, w_{11}=w_{22}$가 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; w_{12} = w_{21} \quad \text{for zero skew} \\
    &amp; w_{12}=w_{21}=0, w_{11}=w_{22} \quad \text{for square pixel}
  \end{aligned}
\end{equation}
<p>
위와 같이 $\mathbf{w} = \begin{bmatrix} w_{1} &amp; w_{2} &amp; w_{4} \\ w_{2} &amp; w_{3} &amp;w_{5} \\ w_{4} &amp; w_{5} &amp; w_{6} \end{bmatrix}$파라미터를 찾기 위해 충분한 제약조건을 확보한 후 $\mathbf{w}$를 6차원 벡터로 정렬하여 $\mathbf{Ax}=0$형태의 선형 시스템을 만든다. 다음으로 <b>특이값 분해(SVD)를 사용하여 $\mathbf{w}=\mathbf{K}^{-T}\mathbf{K}^{-1}$값을 계산한 후 Cholesky Decomposition을 사용하여 $\mathbf{K}^{-T}\mathbf{K}^{-1}$를 분해</b> 한다. 이를 통해 내부 파라미터 $\mathbf{K}$를 계산할 수 있다.
</p>
</div>
</div>


<div id="outline-container-org08edbf3" class="outline-3">
<h3 id="org08edbf3"><span class="section-number-3">2.9</span> Calibration from three orthogonal vanishing points</h3>
<div class="outline-text-3" id="text-2-9">
<p>
내부 파라미터 $\mathbf{K}$가 Zero-Skew이고 Square Pixel일 때 세 개의 서로 직교하는 수직소실점들 $\mathbf{v}_{i}, \ i=1,2,3$을 사용하여 $\mathbf{K}$를 계산할 수 있다. 우선 $\mathbf{K}$가 Zero-Skew이고 Square Pixel이므로 다음이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{w} = \begin{bmatrix} w_{1} &amp; 0 &amp; w_{2} \\ 0 &amp; w_{1} &amp; w_{3} \\ w_{2} &amp; w_{3} &amp; w_{4} \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
이와 같이 총 4개의 자유도를 가지므로 세 개의 수직소실점들을 사용하여 $\mathbf{K}$를 결정할 수 있다. 우선, 각각의 수직소실점들의 직교 특성을 사용하여 $\mathbf{v}_{i}^{T}\mathbf{w}\mathbf{v}_{j}, \ &forall; i&ne; j$를 계산한다. 이 때 $\mathbf{w}$를 벡터화하여 $\mathbf{Ax}=0$형태의 선형 시스템으로 변환한 후 Nul $(\mathbf{A})$를 계산함으로써 $\mathbf{w}$를 구한다. 다음으로 Cholesky Decomposition을 사용하여 $\mathbf{w}=\mathbf{K}^{-T}\mathbf{K}^{-1}$를 분해한다. 이와 같이 내부 파라미터 $\mathbf{K}$를 계산할 수 있다.
</p>
</div>
</div>

<div id="outline-container-org010aaf8" class="outline-3">
<h3 id="org010aaf8"><span class="section-number-3">2.10</span> Computation of focal length and principal point using vanishing point and vanishing line</h3>
<div class="outline-text-3" id="text-2-10">
<p>
3차원 공간 상의 평면 $&pi;$로부터 구할 수 있는 소실선 $\mathbf{l}$이 있고 $&pi;$와 수직인 수직소실점 $\mathbf{v}_{&perp;}$가 있다고 하면 이를 활용하여 초점거리 f와 주점(principal point)를 구할 수 있다.
</p>

<p>
초점거리 f를 구하는 방법은 다음과 같다. 수직소실점을 $\mathbf{v}_{1}$이라고 하고 이미지 평면과 평면 $&pi;$의 교선을 $\mathbf{l}_{1}$이라고 하면 $\mathbf{v}_{1}\mathbf{C}$와 $\mathbf{xC}$는 서로 직교한다. 그리고 카메라 중심에서 이미지 평면으로 수선을 내린 점 P가 있으면 $\mathbf{CP}$의 길이가 곧 초점거리 f가 된다. <b>$\mathbf{v}_{1}x$를 지름으로 하는 원을 그린 후 점 $\mathbf{P}$에 수평으로 그린 선과 원의 교점을 각각 $\mathbf{a}, \mathbf{b}$라고 하면 두 점 중 하나가 곧 카메라의 중심 $\mathbf{C}$가 되고 이는 곧 $\mathbf{aP}= \mathbf{bP}$가 초점거리 f</b> 가 된다.
</p>

<p>
주점(principal point) P를 구하는 방법은 다음과 같다. 수직소실점을 $\mathbf{v}_{1}$라고 하고 이미지 평면과 $\pi$평면의 교선을 $\mathbf{l}_{1}$라고 하면 $\mathbf{v}_{1}$에서 $\mathbf{l}_{1}$에 수선을 내리면 해당 수선에 주점(principal point) P가 위치한다. 이러한 특징으로 인해 <b>서로 다른 세 개의 수직소실점이 존재하는 경우 이들의 수심(orthocenter of the triangle)이 곧 주점 P가 된다.</b>
</p>
</div>
</div>

<div id="outline-container-orgc7a1329" class="outline-3">
<h3 id="orgc7a1329"><span class="section-number-3">2.11</span> The calibrating conic</h3>
<div class="outline-text-3" id="text-2-11">
<p>
IAC(image of absolute conic)은 이미지 평면의 점을 Back-projection한 직선들 간의 각도를 구할 수 있고 Metric Rectification도 수행할 수 있는 유용한 도구이지만 Circular Point의 특성 상 실수의 근을 갖지 않아서 시각화가 불가능하다는 단점이 있다. 이를 보완하기 위해 고안된 것이 Calibration Conic이다. Calibration Conic은 $X^{2}+Y^{2}=Z^{2}$의 Cone을 프로젝션시킨 Image Conic을 의미하고 시각화가 가능한 장점이 존재한다.
</p>

<p>
카메라 프로젝션 $\mathbf{P}= \mathbf{K}[\mathbf{I}|0]$이 있을 때 Calibration Conic 위의 점들은 다음과 같이 프로젝션된다.
</p>
\begin{equation}
  \begin{aligned}
    \mathbf{C} = \mathbf{K}^{-T}\begin{bmatrix} 1 &amp; &amp; \\ &amp; 1 &amp; \\ &amp; &amp; -1 \end{bmatrix}\mathbf{K}^{-1}
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{D}= \begin{bmatrix}1 &amp; &amp; \\ &amp; 1 &amp; \\ &amp; &amp; -1 \end{bmatrix}$라고 하면 $\mathbf{C}= \mathbf{K}^{-T}\mathbf{D}\mathbf{K}^{-1}$와 같이 나타낼 수 있다. 만약 $\mathbf{K}= \begin{bmatrix}f &amp; &amp; \\ &amp; f &amp; \\ &amp; &amp; 1 \end{bmatrix}$인 경우 Calibration Conic은
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{C} = \begin{bmatrix} 1 &amp; &amp; \\ &amp; 1 &amp; \\ &amp; &amp; -f^{2} \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
으로 나타낼 수 있고 이 때, <b>Calibration Conic은 원점이 주점(principal point)이면서 반지름이 초점거리 f인 이미지 상의 원</b> 을 의미한다.
</p>

<p>
$\mathbf{C}$를 분해하면 다음과 같이 다시 정의할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{C} = \mathbf{K}^{-T}\mathbf{DK}^{-1} = \mathbf{K}^{-T}\mathbf{K}^{-1}\mathbf{KDK}^{-1} \\
    &amp; \mathbf{C} = \mathbf{w}\mathbf{S} \quad \text{where, } \mathbf{S} = \mathbf{KDK}^{-1}
  \end{aligned}
\end{equation}
<p>
이 때 이미지 상의 임의의 점 $\mathbf{x}=\mathbf{K}~{\mathbf{X}}$에 대하여 $\mathbf{Sx}$는 Calibration Conic에 의해 반사된 점(reflected point)을 의미한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{Sx} &amp; = \mathbf{KDK}^{-1}\mathbf{K}\tilde{\mathbf{X}} \\
    &amp; = \mathbf{KD}\begin{bmatrix} X \\ Y \\ Z \end{bmatrix} = \mathbf{K}\begin{bmatrix} X \\ Y \\ -Z \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
이미지 평면 상의 두 점 $\mathbf{x}, \mathbf{x}^{'}$에 대하여 두 점의 Back-projection된 직선들이 서로 직교하는 경우 $\mathbf{x}^{'T}\mathbf{wx}=0$이 성립한다. 이 식을 다시 작성하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{'T}\mathbf{wx} = \mathbf{x}^{'T}\mathbf{CS}^{-1}\mathbf{x} = \mathbf{x}^{'T}\mathbf{CSx} = \mathbf{x}^{'T}\mathbf{C}\dot{\mathbf{x}}
  \end{aligned}
\end{equation}
<p>
이 때, $\dot{\mathbf{x}} = \mathbf{Sx}$는 점 $\mathbf{x}$가 Calibration Conic에 의해 반사된 점을 의미한다. 결론적으로, <b>직선 $\mathbf{C}\dot{\mathbf{x}}$는 반사된 점 $\dot{\mathbf{x}}$와 Calibration Conic의 접선들을 이어주는 직선이 되고 점 $\mathbf{x}^{'}$는 직선 $\mathbf{C}\dot{\mathbf{x}}$위에 존재</b> 한다.
</p>
</div>
</div>
</div>

<div id="outline-container-orge43955e" class="outline-2">
<h2 id="orge43955e"><span class="section-number-2">3</span> Epipolar Geometry and the Fundamental Matrix</h2>
<div class="outline-text-2" id="text-3">
<p>
Epipolar geometry는 <b>2개의 카메라 이미지 사이에 정의되는 기하학 관계</b> 를 의미한다. 이는 3차원 물체의 구조와는 독립적이며 <b>오로지 카메라의 내부 파라미터와 두 카메라 사이의 상대 포즈에만 의존한다.</b>
</p>

<p>
Fundamental Matrix는 <b>2개의 주어진 카메라의 중심점 $\mathbf{C}, \mathbf{C}^{'}$이 주어질 때 $\mathbf{F}&isin; \mathbb{R}^{3&times; 3}$이며 rank 2를 가지는 행렬</b> 을 의미한다. $\mathbf{F}$는 두 카메라의 이미지 평면에 있는 점들의 대응쌍 $\mathbf{x}, \mathbf{x}^{'}$에 대하여
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{'T}\mathbf{Fx} = 0
  \end{aligned}
\end{equation}
<p>
을 만족한다. 이 때 곱해지는 순서에 따라 의미가 달라지며 $\mathbf{x}^{'T}\mathbf{Fx}=0$인 경우 두 카메라 $\mathbf{C},\mathbf{C}^{'}$사이의 Fundamental Matrix라고 하고 $\mathbf{x}^{T}\mathbf{F}^{'}\mathbf{x}^{'}=0$인 경우 두 카메라 $\mathbf{C}^{'},\mathbf{C}$사이의 Fundamental Matrix라고 한다. 이 때, $\mathbf{F}^{T} = \mathbf{F}^{'}$관계가 성립한다.
</p>

<p>
기하학적 측면에서 보면, $\mathbf{x}^{'T}\mathbf{Fx}=0$에서 <b>$\mathbf{Fx}$는 카메라 $\mathbf{C}$의 이미지 평면 $\pi_{\mathbf{C}}$위의 점 $\mathbf{x}$가 존재할 때 이와 상응하는 Epipolar Line $\mathbf{l}^{'} &isin; &pi;_{\mathbf{C}^{'}}$을 의미</b> 한다. 따라서 <b>$\mathbf{F}$는 이미지 평면 $\pi$위의 점 $\mathbf{x}$를 Epipolar Line $\mathbf{l}^{'}$으로 매핑하는 함수로 생각</b> 할 수 있다. 
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{F}: \ \mathbf{x} \mapsto \mathbf{l}^{'} \\
    &amp; \text{where, } \ \ \mathbf{x} \in \pi_{\mathbf{C}} \in \mathbb{P}^{2} \\
    &amp; \mathbf{l}^{'} \in (\mathbb{P}^{2})^{\vee}
  \end{aligned}
\end{equation}
</div>

<div id="outline-container-org9d47e4c" class="outline-3">
<h3 id="org9d47e4c"><span class="section-number-3">3.1</span> Proof</h3>
<div class="outline-text-3" id="text-3-1">
<p>
($\Rightarrow$)$\mathbf{l}^{'} = \mathbf{Fx}$인 경우 Epipolar Line $\mathbf{l}^{'}$에 위치한 점 $\mathbf{x}^{'}$에 대하여 다음이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{'T}\mathbf{l}^{'} = \mathbf{x}^{'T}\mathbf{Fx}=0 \quad \forall \mathbf{x} \leftrightarrow \mathbf{x}^{'}
  \end{aligned}
\end{equation}
<p>
($\Leftarrow$) 이미지 평면 $\pi_{\mathbf{C}}$위의 점 $\mathbf{x}$를 Back-projection하여 $\mathbf{X}_{1}, \mathbf{X}_{2}$점이 생성되었다고 했을 때, 이를 $&pi;_{\mathbf{C}^{'}}$에 프로젝션시키면 각각 $\mathbf{x}^{'}_{1} = \mathbf{P}^{'}\mathbf{X}_{1}$, $\mathbf{x}^{'}_{2} = \mathbf{P}^{'}\mathbf{X}_{2}$점들이 생성된다. 이 때 Fundamental Matrix $\mathbf{F}$에 의해
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}^{'T}_{1}\mathbf{Fx} = 0 \\
    &amp; \mathbf{x}^{'T}_{2}\mathbf{Fx} = 0
  \end{aligned}
\end{equation}
<p>
의 관계가 성립하므로 $\mathbf{Fx}$는 $\mathbf{x}^{'T}_{i}, \ i=1,2$와 수직인 Epipolar Line $\mathbf{l}^{'}$을 의미한다.
</p>
</div>
</div>

<div id="outline-container-org871edd7" class="outline-3">
<h3 id="org871edd7"><span class="section-number-3">3.2</span> Derivation of fundemantal matrix(geometry)</h3>
<div class="outline-text-3" id="text-3-2">
<p>
두 카메라 $\mathbf{C}, \mathbf{C}^{'}$가 있을 때 이미지 평면 $\pi_{\mathbf{C}}$위의 점 $\mathbf{x}$를 Back-projection한 직선 $\mathbf{l}_{x}$가 3차원 공간 상에서 임의의 평면 $&pi;_{0}$와 한 점에서 만난다고 가정한다. 이 때 $\mathbf{C}, \mathbf{C}^{'}$의 이미지 점들을 연결해주는 Homography $\mathbf{H}_{&pi;_{0}}$를 생각해보면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{\pi_{0}} : &amp; \pi_{\mathbf{C}} \mapsto \pi_{\mathbf{C}^{'}} \\
    &amp; \mathbf{x} \mapsto \mathbf{x}^{'} \\ 
    &amp; \mathbf{x} \mapsto \mathbf{P}^{'}(\mathbf{l_{x}} \cap \pi_{0})
  \end{aligned}
\end{equation}
<p>
$\pi_{\mathbf{C}^{'}}$위에 프로젝션된 점을 $\mathbf{x}^{'} = \mathbf{P}^{'}(\mathbf{l}_{x} &cap; &pi;_{0})$라고 하고 Epipolar Line $\mathbf{l}^{'}$을 $\mathbf{x}^{'}$와 Epipole $\mathbf{e}^{'}$를 이어주는 직선이라고 정의하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{e}^{'} \times \mathbf{x}^{'} &amp; = \mathbf{e}^{' \wedge}\mathbf{x}^{'} \\
    &amp; = \mathbf{e}^{'\wedge} \mathbf{H}_{\pi_{0}}(\mathbf{x}) \quad \text{is Epipolar Line.}
  \end{aligned}
\end{equation}
<p>
와 같이 나타낼 수 있다. 이 때 $\mathbf{l}^{'} = \mathbf{Fx}$의 공식을 사용하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}^{'} &amp; = \mathbf{Fx} \\
    &amp; = \mathbf{e}^{'\wedge} \mathbf{H}_{\pi_{0}} \mathbf{x} \\
  \end{aligned}
\end{equation}
<p>
과 같다. 따라서 <b>$\mathbf{F} = \mathbf{e}^{'\wedge}\mathbf{H}_{\pi_{0}}$</b> 가 성립한다. 이 때, $\mathbf{H}_{&pi;_{0}}$는 rank 3인 행렬이며 $\mathbf{e}^{'&and;}$는 rank 2인 행렬이므로 $\mathbf{F}$는 rank 2인 행렬이 된다.
</p>
</div>
</div>

<div id="outline-container-orgd49938a" class="outline-3">
<h3 id="orgd49938a"><span class="section-number-3">3.3</span> Derivation of fundemantal matrix(algebraic)</h3>
<div class="outline-text-3" id="text-3-3">
<p>
Epipolar Line $\mathbf{l}^{'} = \mathbf{P}^{'}(\mathbf{X(\lambda)})$와 같다. 이 때 $\mathbf{X}(&lambda;)$는 카메라 $\mathbf{C}$의 중심점을 지나는 $\mathbf{x}$의 Back-projection 직선을 의미한다. $\mathbf{X}(&lambda;)$는 다음과 같이 다시 작성할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{X}(\lambda) = \mathbf{P}^{\dagger}\mathbf{x} + \lambda \mathbf{C} \quad \lambda \in \mathbb{R}\\
  \end{aligned}
\end{equation}
<p>
여기서 $\mathbf{P}^{&dagger;}$는 $\mathbf{P}$의 Pseudo Inverse를 의미하고
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{P}^{\dagger} = \mathbf{P}^{T}(\mathbf{PP}^{T})^{-1}
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{l}^{'} = \mathbf{P}^{'}(\mathbf{X}(&lambda;))$는 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{P}^{'}(\mathbf{X}(\lambda)) &amp; = \mathbf{P}^{'}\mathbf{P}^{\dagger}\mathbf{x} + \lambda \mathbf{P}^{'}\mathbf{C} \\
    &amp; \mathbf{P}^{'}\mathbf{P}^{\dagger}\mathbf{x} + \lambda \mathbf{e}^{'}
  \end{aligned}
\end{equation}
<p>
$\mathbf{P}^{'}\mathbf{C}$는 카메라 $\mathbf{C}$의 중심점을 $&pi;_{\mathbf{C}^{'}}$에 프로젝션시킨 점을 의미하므로 Epipole $\mathbf{e}^{'}$가 된다. $&lambda;=0$일 때 $\mathbf{P}^{'}(\mathbf{X}(0))= \mathbf{P}^{'}\mathbf{P}^{&dagger;}\mathbf{x}$이고 $&lambda;=&infin;$일 때 $\mathbf{P}^{'}(\mathbf{X}(&infin;))=\mathbf{P}^{'}\mathbf{C}=\mathbf{e}^{'}$가 된다. 따라서 Epipolar Line $\mathbf{l}^{'}$는 두 점을 잇는 직선이므로
</p>

\begin{equation}
  \begin{aligned}
     \mathbf{l}^{'} = \mathbf{e}^{'\wedge} \mathbf{P}^{'}\mathbf{P}^{\dagger}
  \end{aligned}
\end{equation}
<p>
이 된다. 추가적으로 Epipole $\mathbf{e}^{'}$는 Epipolar Line $\mathbf{l}^{'}$에 포함되어 있고 모든 $\mathbf{x}_{i}$에 대해
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{e}^{'} \mathbf{Fx}_{i} = 0 \quad \forall \mathbf{x}_{i}
  \end{aligned}
\end{equation}
<p>
이 성립하므로 $\mathbf{e}^{'}\mathbf{F}=0$이 성립한다. <b>결론적으로 $\mathbf{e}^{'}$는 $\mathbf{F}$의 Left null vector</b> 이다. 또한 $\mathbf{e}$는 $\mathbf{F}$의 (right) null vector가 된다.
</p>
</div>
</div>

<div id="outline-container-org7acb8e0" class="outline-3">
<h3 id="org7acb8e0"><span class="section-number-3">3.4</span> The epipolar line homography</h3>
<div class="outline-text-3" id="text-3-4">
<p>
두 카메라 $\mathbf{C}, \mathbf{C}^{'}$이 존재하고 이미지 평면 위의 한 점을 각각 $\mathbf{x}, \mathbf{x}^{'}$라고 하면 이에 상응하는 Epipolar Line $\mathbf{l}, \mathbf{l}^{'}$이 존재한다. 이 때, <b>$\mathbf{l}$과 $\mathbf{l}^{'}$사이에는 별도의 대응 관계가 성립</b> 하는데 이는
</p>

\begin{equation}
  \begin{aligned}
    \mathbb{P}(\pi)^{\vee} \mapsto \mathbb{P}(\pi^{'})^{\vee}
  \end{aligned}
\end{equation}
<p>
<b>매핑 관계인 Homography 행렬</b> 로 주어진다. 카메라 중심점 $\mathbf{C}$를 통과하면서 Epipole $\mathbf{e}$를 지나지 않는 직선 $\mathbf{k}$가 있을 때 $\mathbf{k}$는 Epipolar Line $\mathbf{l}$과 반드시 한 점 $\mathbf{p}$에서 만난다. $\mathbf{p}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{p} = \mathbf{k}^{\wedge}\mathbf{l}
  \end{aligned}
\end{equation}
<p>
과 같이 구할 수 있고 $\mathbf{p}$는 Fundamental Matrix에 의해 Epipolar Line $\mathbf{l}^{'}$으로 프로젝션되므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}^{'} &amp; = \mathbf{F}\mathbf{k}^{\wedge}\mathbf{l} \\
    &amp; = \mathbf{H}\mathbf{l} \\
  \end{aligned}
\end{equation}
<p>
의 관계가 성립한다. 따라서 <b>$\mathbf{l}, \mathbf{l}^{'}$은 $\mathbf{H}=\mathbf{Fk}^{&and;}$인 Homography 행렬에 의해 대응 관계가 성립</b> 한다.
</p>
</div>
</div>

<div id="outline-container-orgd0aca01" class="outline-3">
<h3 id="orgd0aca01"><span class="section-number-3">3.5</span> Fundamental matrices arising from special motions</h3>
<div class="outline-text-3" id="text-3-5">
</div>
<div id="outline-container-org73b593c" class="outline-4">
<h4 id="org73b593c"><span class="section-number-4">3.5.1</span> Pure translation</h4>
<div class="outline-text-4" id="text-3-5-1">
<p>
순수 이동(pure translation)이란 카메라 센터를 회전하지 않고 이동만 하는 것을 의미한다. 이 때, 월드의 모든 물체를 고정시킨 채로 카메라를 움직이는 것과 카메라를 고정시킨 채로 월드의 모든 물체를 이동시키는 것은 동일하다. 처음 위치의 카메라 행렬과 카메라 센터를 각각 $\mathbf{P}, \mathbf{C}$라고 하고 순수 이동 후 카메라 행렬과 카메라 센터를 각각 $\mathbf{P}^{'}, \mathbf{C}^{'}$라고 할 때 <b>두 카메라의 베이스라인의 길이는 카메라 중심점의 순수 이동량과 동일</b> 하다. 
</p>

<p>
또한 <b>두 카메라의 Epipole을 각각 $\mathbf{e},\mathbf{e}^{'}$이라고 하면 두 Epipole의 위치는 동일하며 이는 곧 소실점(vanishing point)을 의미</b> 한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{e} = \mathbf{e}^{'} = \mathbf{v}
  \end{aligned}
\end{equation}
<p>
이러한 순수 이동 상황에서 $\mathbf{e}=\mathbf{e}^{'}$를 Auto Epipolar라고 한다.
</p>

<p>
대수적으로 Fundamental Matrix를 유도해보면 처음 카메라 행렬을 $\mathbf{P}=\mathbf{K}[\mathbf{I}|0]$이라고 하고 순수 이동 후 카메라 행렬을 $\mathbf{P}^{'}=\mathbf{K}[\mathbf{I}|\mathbf{t}]$라고 하면 이전 섹션에서 Fundamental Matrix $\mathbf{F}$는 $\mathbf{F} = \mathbf{e}^{'\wedge}\mathbf{P}^{'}\mathbf{P}^{\dagger}$이므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} &amp; = \mathbf{e}^{'\wedge}\mathbf{P}^{'}\mathbf{P}^{\dagger} \\
    &amp; = \mathbf{e}^{'\wedge}\mathbf{KK}^{-1} \\
    &amp; = \mathbf{e}^{'\wedge}
  \end{aligned}
\end{equation}
<p>
따라서 <b>순수 이동 상황에서 Fundamental Matrix는 $\mathbf{F}=\mathbf{e}^{'\wedge}$</b> 이다.
</p>
</div>
</div>
</div>

<div id="outline-container-orgeaa222a" class="outline-3">
<h3 id="orgeaa222a"><span class="section-number-3">3.6</span> Retrieving the camera matrices</h3>
<div class="outline-text-3" id="text-3-6">
</div>
<div id="outline-container-orgc526ac0" class="outline-4">
<h4 id="orgc526ac0"><span class="section-number-4">3.6.1</span> Projective invariance and canonical cameras</h4>
<div class="outline-text-4" id="text-3-6-1">
<p>
두 카메라 $\mathbf{C}, \mathbf{C}^{'}$에 대응하는 이미지 평면 상의 점들 $\mathbf{x}, \mathbf{x}^{'}$과 Fundamental Matrix $\mathbf{F}$가 존재할 때 $\mathbf{F}$는 $\mathbf{x}\leftrightarrow \mathbf{x}^{'}$대응쌍의 Homography 변환에 상관없이 동일하다. 다시 말하면, $\mathbb{P}^{3} \mapsto\mathbb{P}^{3}$을 만족하는 Homograhpy 변환 $\mathbf{H}&isin; \mathbb{R}^{4&times; 4}$가 존재할 때 $\mathbf{H}$는
</p>

\begin{equation}
  \begin{aligned}
    (\mathbf{P},\mathbf{P}^{'}) \mapsto (\mathbf{PH}, \mathbf{P}^{'}\mathbf{H})
  \end{aligned}
\end{equation}
<p>
를 만족하는데 <b>이러한 $\mathbf{H}$에 관계없이 Fundamental Matrix $\mathbf{F}$는 동일</b> 하다.
</p>

<p>
$(\mathbf{PH},\mathbf{P}^{'}\mathbf{H})$에 해당하는 대응점쌍 $\mathbf{x}&harr; \mathbf{x}^{'}$에 대해서
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{'T}\tilde{\mathbf{F}}\mathbf{x} = 0
  \end{aligned}
\end{equation}
<p>
이 성립한다. 이 때 $\mathbf{x}=\mathbf{PHX}, \mathbf{x}^{'}=\mathbf{P}^{'}\mathbf{HX}$이므로 이를 위 식에 대입하면 
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{X}^{T}\mathbf{H}^{T}\mathbf{P}^{'T}\tilde{\mathbf{F}}\mathbf{PHX} = 0
  \end{aligned}
\end{equation}
<p>
을 만족하고 위 식은 모든 $&forall; \mathbf{X}&isin; \mathbb{P}^{3}$에 대해서 성립한다. $\mathbf{X}=\mathbf{H}^{-1}(\mathbf{HX}), ~{\mathbf{X}} = \mathbf{HX}$로 치환하여 다시 위 식에 대입하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \tilde{\mathbf{X}}^{T}\mathbf{H}^{-T}\mathbf{H}^{T}\mathbf{P}^{'T}\tilde{\mathbf{F}}\mathbf{PHH}^{-1}\tilde{\mathbf{X}} = 0 \\
    &amp; \tilde{\mathbf{X}}^{T}\mathbf{P}^{'T}\tilde{\mathbf{F}}\mathbf{P}\tilde{\mathbf{X}} = 0 \\
    &amp; \tilde{\mathbf{x}}^{T}\tilde{\mathbf{F}}\tilde{\mathbf{x}} =0 
  \end{aligned}
\end{equation}
<p>
이 되어 <b>결론적으로 $\mathbf{F}= ~{\mathbf{F}}$가 성립</b> 한다.
</p>
</div>
</div>

<div id="outline-container-orga88204f" class="outline-4">
<h4 id="orga88204f"><span class="section-number-4">3.6.2</span> Canonical form of camera matrices</h4>
<div class="outline-text-4" id="text-3-6-2">
<p>
위와 같은 성질에 따라 동일한 Fundamental Matrix $\mathbf{F}$에 여러 $(\mathbf{P},\mathbf{P}^{'})$쌍이 대응되므로 $\mathbf{F}$와 $(\mathbf{P},\mathbf{P}^{'})$는 One-to-Many Correspondence 관계가 된다. 따라서 이러한 모호성에도 불구하고 <b>$\mathbf{F}$의 정확한 변환을 표현하기 위해 $\mathbf{P}=[\mathbf{I}|0]$, $\mathbf{P}^{'}=[\mathbf{M}|\mathbf{m}]$과 같이 처음 카메라 행렬 $\mathbf{P}$를 단순하게 나타내는 방법을 Canonical Form</b> 이라고 한다. 하지만 $\mathbf{P}=[\mathbf{I}|0]$이라고 해서 $\mathbf{P}^{'}$이 유일하게 결정되는 것은 아니다. 
</p>

<p>
임의의 카메라 행렬 $\mathbf{P}&isin; \mathbb{R}^{3&times;4}$가 주어졌을 때 이를 역행렬이 존재하는 행렬 $\mathbf{P}^{*}=\begin{bmatrix}\mathbf{P}\\ \mathbf{r}_{4} \end{bmatrix}&isin; \mathbb{R}^{4&times;4}$로 변경한 다음
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{P}^{*}\mathbf{H} = \begin{bmatrix} \mathbf{I} &amp; \mathbf{0} \\ \mathbf{0} &amp; \mathbf{1} \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
을 만족하는 $\mathbf{H}$가 존재한다고 하면 $\mathbf{PH}= [\mathbf{I}| \mathbf{0}]$을 만족한다. 따라서 <b>$\mathbf{H}$가 존재한다는 가정 하에 모든 임의의 카메라 행렬 $\mathbf{P}$는 Canonical Form으로 쓸 수 있다.</b>
</p>

<p>
그렇다면 Fundamental Matrix $\mathbf{F}$는 $\mathbf{M}, \mathbf{m}$에 대하여 어떻게 쓸 수 있을까?
</p>

<p>
우선 임의의 두 카메라 행렬 $\mathbf{P}= \mathbf{K}[\mathbf{I}|0], \mathbf{P}^{'}=\mathbf{K}^{'}[\mathbf{R}|\mathbf{t}]$가 존재할 때 다음의 공식들이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{PP}^{T} = \mathbf{K}^{2} \\
    &amp; \mathbf{P}^{\dagger } = \mathbf{P}^{T}(\mathbf{PP}^{T})^{-1} = \begin{bmatrix} \mathbf{K}^{-1} \\ 0 \end{bmatrix} \\
    &amp; \mathbf{C} = \begin{bmatrix} 0 &amp; 1 \end{bmatrix}^{T} \\
    &amp; \mathbf{e}^{'} = \mathbf{P}^{'}\mathbf{C} = \mathbf{K}^{'}\mathbf{t}
  \end{aligned}
\end{equation}
<p>
따라서 이에 대응하는 Fundamental Matrix $\mathbf{F}$는 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} &amp; = \mathbf{e}^{'\wedge}\mathbf{P}^{'}\mathbf{P}^{\dagger} \\
    &amp; = (\mathbf{K}^{'}\mathbf{t})^{\wedge}\mathbf{K}^{'}[\mathbf{R}|\mathbf{t}] \mathbf{K}^{-1}\begin{bmatrix} \mathbf{I} \\ 0 \end{bmatrix} \\
    &amp; = (\mathbf{K}^{'}\mathbf{t})^{\wedge}\mathbf{K}^{'}\mathbf{R}\mathbf{K}^{-1}
  \end{aligned}
\end{equation}
<p>
Canonical Form에 상응하는 Fundamental Matrix $\mathbf{F}$를 구해보면 두 카메라 행렬 $\mathbf{P}= [\mathbf{I}|0], \mathbf{P}^{'}=[\mathbf{M}|\mathbf{m}]$에 대해 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} = \mathbf{m}^{\wedge}\mathbf{M}
  \end{aligned}
\end{equation}
<p>
따라서 <b>Canonical Form의 $\mathbf{F}$는 $\mathbf{F}=\mathbf{m}^{&and;}\mathbf{M}$이다.</b>
</p>
</div>
</div>

<div id="outline-container-org68b5e7f" class="outline-4">
<h4 id="org68b5e7f"><span class="section-number-4">3.6.3</span> Projective ambiguity of cameras given F</h4>
<div class="outline-text-4" id="text-3-6-3">
<p>
Fundamental Matrix $\mathbf{F}$는 Homography 변환에 상관없이 동일하기 때문에 필연적으로 모호성이 발생하게 된다. 만약 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{'})$의 $\mathbf{F}$와 $(~{\mathbf{P}}, ~{\mathbf{P}}^{'})$의 $\mathbf{F}$가 동일한 경우, $(\mathbf{P},\mathbf{P}^{'})$와 $(~{\mathbf{P}}, ~{\mathbf{P}}^{'})$를 연결하는 Homography $\mathbf{H}$가 존재한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; ^{\exists}\mathbf{H} \in \text{PGL}_{4} \\
    &amp; (\tilde{\mathbf{P}}, \tilde{\mathbf{P}}^{'}) = (\mathbf{P},\mathbf{P}^{'})\mathbf{H}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-orgd8c1a80" class="outline-4">
<h4 id="orgd8c1a80"><span class="section-number-4">3.6.4</span> Proof</h4>
<div class="outline-text-4" id="text-3-6-4">
<p>
두 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{'})$, $(~{\mathbf{P}}, ~{\mathbf{P}}^{'})$이 주어졌을 때 이를 Canonical Form으로 쓰면 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = \tilde{\mathbf{P}} = [\mathbf{I}|0] \\
    &amp; \mathbf{P}^{'} = [\mathbf{A}|\mathbf{a}] \\
    &amp; \tilde{\mathbf{P}}^{'} = [\tilde{\mathbf{A}}|\tilde{\mathbf{a}}] \\
  \end{aligned}
\end{equation}
<p>
이 때, Fundamental Matrix $\mathbf{F}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} = \mathbf{a}^{\wedge}\mathbf{A} = \tilde{\mathbf{a}}^{\wedge}\tilde{\mathbf{A}}
  \end{aligned}
\end{equation}
<p>
가 성립한다. $\mathbf{F}$의 성질에 의해 $\mathbf{a}^{T}\mathbf{F}=0, ~{\mathbf{a}}^{T}\mathbf{F}=0$이 만족하게 되고
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{a}^{T}\mathbf{F} = \mathbf{a}^{T}\mathbf{a}^{\wedge}\mathbf{A} = 0 \\
    &amp; \tilde{\mathbf{a}}^{T}\mathbf{F} = \tilde{\mathbf{a}}^{T}\tilde{\mathbf{a}}^{\wedge}\tilde{\mathbf{A}} = 0 \\
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{a}$와 $~{\mathbf{a}}$는 각각 rank 1인 $\mathbf{F}$의 Left Null Space가 된다. 따라서 $\mathbf{a}, ~{\mathbf{a}}$는
</p>

\begin{equation}
  \begin{aligned}
    \tilde{\mathbf{a}} = k \mathbf{a}, \ \ k \neq 0 \in \mathbb{R}
  \end{aligned}
\end{equation}
<p>
인 관계가 성립한다. $~{\mathbf{a}}$를 치환하여 다시 표현하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} &amp; = \mathbf{a}^{\wedge}\mathbf{A} = \tilde{\mathbf{a}}^{\wedge}\tilde{\mathbf{A}} = k\mathbf{a}^{\wedge}\tilde{\mathbf{A}} = 0 \\
    &amp; = \mathbf{a}^{\wedge}(\mathbf{A} - k \tilde{\mathbf{A}}) = 0
  \end{aligned}
\end{equation}
<p>
따라서 $(\mathbf{A}- k ~{\mathbf{A}})$은 $\mathbf{a}$와 평행하다. 즉, 각 행렬의 열들이 배수 관계에 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{A} - k \tilde{\mathbf{A}} = \mathbf{av}^{T} \ \ \ \text{for some } \mathbf{v}
  \end{aligned}
\end{equation}
<p>
따라서 $~{\mathbf{A}} = k^{-1}(\mathbf{A}+\mathbf{av}^{T})$가 된다. 카메라 행렬 대응쌍은 다음과 같이 쓸 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = \tilde{\mathbf{P}} = [\mathbf{I}|0] \\
    &amp; \mathbf{P}^{'} = [\mathbf{A}|\mathbf{a}] \\
    &amp; \tilde{\mathbf{P}}^{'} = [k^{-1}(\mathbf{A}+\mathbf{av}^{T}) \ | \ k\mathbf{a}] \\
  \end{aligned}
\end{equation}
<p>
<b>결론적으로 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{'})$를 Canonical Form으로 변환하는 행렬을 $\mathbf{H}_{1}$, $(~{\mathbf{P}},~{\mathbf{P}}^{'})$를 Canonical Form으로 변환하는 행렬을 $\mathbf{H}_{2}$라고 하면</b>
</p>

\begin{equation}
  \begin{aligned}
    (\mathbf{P},\mathbf{P}^{'})\mathbf{H}_{1}\mathbf{H} = (\tilde{\mathbf{P}},\tilde{\mathbf{P}}^{'})\mathbf{H}_{2}
  \end{aligned}
\end{equation}
<p>
<b>를 만족하는 Homography $\mathbf{H}$가 존재하고 이에 따라 $(\mathbf{P},\mathbf{P}^{'})$과 $(~{\mathbf{P}},~{\mathbf{P}}^{'})$는 사영적으로 동등하다(projectively equivalent).</b>
</p>

\begin{equation}
  \begin{aligned}
    (\mathbf{P},\mathbf{P}^{'}) \sim (\tilde{\mathbf{P}},\tilde{\mathbf{P}}^{'})
  \end{aligned}
\end{equation}
</div>
</div>
</div>

<div id="outline-container-orgd9e0993" class="outline-3">
<h3 id="orgd9e0993"><span class="section-number-3">3.7</span> Canonical cameras given F</h3>
<div class="outline-text-3" id="text-3-7">
<p>
<b>임의의 정방행렬 $\mathbf{F}&isin; \mathbb{R}^{3&times; 3}$가 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{'})$에 대응하는 Fundemental Matrix일 필요충분 조건은 $\mathbf{P}^{'T}\mathbf{F}\mathbf{P}$가 반대칭 행렬(skew symmetric matrix)일 때</b> 이다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}^{'}\mathbf{Fx} = 0 \\
    &amp; \Leftrightarrow \mathbf{X}^{T}\mathbf{P}^{'T}\mathbf{FPX} =0 \ \ \forall \mathbf{X} \\
    &amp; \Leftrightarrow \mathbf{P}^{'T}\mathbf{FP} \text{ is a skew symmetric matrix.}
  \end{aligned}
\end{equation}
<p>
임의의 정방행렬 $\mathbf{F}&isin; \mathbb{R}^{3&times; 3}$가 주어지고 임의의 반대칭행렬 $\mathbf{S}&isin; \mathbb{R}^{3&times; 3}$이 주어졌을 때 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{'})$이 다음과 같다면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = [\mathbf{I} | 0 ] \\
    &amp; \mathbf{P}^{'} = [\mathbf{SF} | \mathbf{e}^{'}]  \ \ \text{where, } \mathbf{e}^{'} \ \text{ is epipole.}
  \end{aligned}
\end{equation}
<p>
이 때 <b>$(\mathbf{P},\mathbf{P}^{'})$는 $\mathbf{F}$를 Fundamental Matrix로 갖는다.</b> 이를 증명하기 위해 $\mathbf{P}^{'}\mathbf{FP}$를 전개해보면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{P}^{'}\mathbf{FP} &amp; = [\mathbf{SF}|\mathbf{e}^{'}]^{T} \mathbf{F} [\mathbf{I}|0] \\
    &amp; = \begin{bmatrix} \mathbf{F}^{T}\mathbf{S}^{T}\mathbf{F} &amp; \mathbf{0} \\ \mathbf{e}^{'}\mathbf{F} &amp; 0 \end{bmatrix} \\
    &amp; = \begin{bmatrix} \mathbf{F}^{T}\mathbf{S}^{T}\mathbf{F} &amp; \mathbf{0} \\ \mathbf{0} &amp; 0 \end{bmatrix} \\
  \end{aligned}
\end{equation}
<p>
과 같이 반대칭행렬이므로 위 정리에 의해 $\mathbf{F}$가 Fundamental Matrix임을 알 수 있다.
</p>

<p>
반대칭행렬 $\mathbf{S}$는 3차원 벡터 $\mathbf{s}^{\wedge}$형태로 나타낼 수 있고 이 때, $\mathbf{s}^{T}\mathbf{e}^{'} &ne; 0$이면 $\mathbf{P}^{'} = [\mathbf{s}^{&and;}\mathbf{F}| \mathbf{e}^{'}]$의 rank는 3이 된다. $\mathbf{P}^{'}$의 rank가 3이 되기 위해서는 $\mathbf{s}^{&and;}\mathbf{F}, \mathbf{e}^{'}$의 rank는 각각 2,1이 되어야 한다. 우선, $\mathbf{s}^{&and;}\mathbf{F}$가 rank 2라는 것을 증명해보면 Fundamental Matrix 성질에 의해 $\mathbf{e}^{'}\mathbf{F}=0$을 만족하므로 $\mathbf{F}$의 열공간 Col $\mathbf{F}$와 $\mathbf{e}^{'}$는 수직한다.
</p>

\begin{equation}
  \begin{aligned}
    \text{Col } \mathbf{F} \perp \mathbf{e}^{'}
  \end{aligned}
\end{equation}
<p>
또한, $\mathbf{s}^{&and;}\mathbf{e}^{'} &ne; 0$이므로 $\mathbf{s}$는 Col $\mathbf{F}$안에 존재하지 않는다. $\mathbf{s}^{&and;}\mathbf{F}$의 열공간은
</p>

\begin{equation}
  \begin{aligned}
    \text{Col } \mathbf{s}^{\wedge}\mathbf{F} &amp; = \mathbf{s}^{\wedge} \text{Col } \mathbf{F} \\
    &amp; = \mathbf{s} \times \text{Col } \mathbf{F}
  \end{aligned}
\end{equation}
<p>
이고 <b>이 때 Col $\mathbf{F}$가 rank 2이므로 $\mathbf{s} \times \text{Col } \mathbf{F}$또한 rank 2</b> 가 된다. 다음으로 $\mathbf{e}^{'}$가 다른 열벡터들과 선형독립임을 증명해보면 $\mathbf{s}^{T} \text{Col }\mathbf{s}^{&and;}\mathbf{F}= 0$이고 $\mathbf{s}^{&and;}\mathbf{e}^{'} &ne; 0$이므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{e}^{'}  \notin \text{Col } \mathbf{s}^{\wedge}\mathbf{F}
  \end{aligned}
\end{equation}
<p>
<b>결론적으로 $\mathbf{P}^{'} = [\mathbf{s}^{&and;}\mathbf{F}| \mathbf{e}^{'}]$의 rank는 3이 된다.</b>
</p>

<p>
$\mathbf{P}^{'}$의 rank가 3이 되는 $\mathbf{s}$를 선택할 때 $\mathbf{e}^{'}$의 수직이 아닌 $\mathbf{s}$를 사용해야 하므로 $\mathbf{s}=\mathbf{e}^{'}$로 설정하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = [\mathbf{I}|0] \\
    &amp; \mathbf{P}^{'} =  [\mathbf{e}^{'\wedge}\mathbf{F} \ | \ \mathbf{e}^{'}]
  \end{aligned}
\end{equation}
<p>
가 된다. <b>따라서, Fundamental Matrix $\mathbf{F}$가 주어졌을 때 $\mathbf{F}$의 Left Null Space $\mathbf{e}^{'}$를 계산함으로써 카메라 대응쌍 $(\mathbf{P},\mathbf{P}^{'})$를 계산할 수 있다.</b>
</p>

<p>
앞서 정의한 카메라 행렬 대응쌍의 비례식
</p>

\begin{equation}
  \begin{aligned}
    &amp; (\mathbf{P}, \mathbf{P}^{'})= ([\mathbf{I}|0], [\mathbf{A}|\mathbf{a}]) \\
    &amp; (\tilde{\mathbf{P}},\tilde{\mathbf{P}}^{'}) = ([\mathbf{I}|0],[k^{-1}(\mathbf{A}+\mathbf{av}^{T}) \ | \ k\mathbf{a}]) \\
  \end{aligned}
\end{equation}
<p>
을 사용하여 일반적인 형태로 나타내면 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; (\mathbf{P}, \mathbf{P}^{'})= ([\mathbf{I}|0], [\mathbf{e}^{'}\mathbf{F} \ | \ \mathbf{e}^{'}]) \\
    &amp; (\tilde{\mathbf{P}},\tilde{\mathbf{P}}^{'}) = ([\mathbf{I}|0],[\mathbf{e}^{'}\mathbf{F}+\mathbf{e}^{'}\mathbf{v}^{T} \ | \ \lambda\mathbf{e}^{'}]) \\
  \end{aligned}
\end{equation}
<p>
Null Space 값인 $\mathbf{e}^{'}$는 스케일에 불변하므로 $\frac{1}{k}\mathbf{e}^{'}$를 이용해도 결과는 동일하다. 따라서 위와 같은 형태로 나타낼 수 있다.
</p>
</div>
</div>

<div id="outline-container-orgab28edb" class="outline-3">
<h3 id="orgab28edb"><span class="section-number-3">3.8</span> The essential matrix</h3>
<div class="outline-text-3" id="text-3-8">
<p>
임의의 카메라 행렬 $\mathbf{P}= \mathbf{K}[\mathbf{R}|\mathbf{t}]$가 주어졌을 때 이미지 평면 상의 점 $\mathbf{x}$에 대해 $\mathbf{x}= \mathbf{PX}= \mathbf{K}[\mathbf{R}|\mathbf{t}]\mathbf{X}$가 성립한다. 이 때, <b>정규화된 이미지 평면 위의 점을 $\bar{\mathbf{x}}$</b> 라고 하면
</p>

\begin{equation}
  \begin{aligned}
    \bar{\mathbf{x}} = \mathbf{K}^{-1}\mathbf{x}
  \end{aligned}
\end{equation}
<p>
가 성립한다. 이 때,
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{K}^{-1}\mathbf{P} = [\mathbf{R} | \mathbf{t}]
  \end{aligned}
\end{equation}
<p>
를 <b>정규카메라(normalized camera)</b> 라고 한다. 정규카메라에서 카메라 행렬은 $\mathbf{K}= \mathbf{I}$인 경우로 생각할 수 있다. 정규카메라 행렬의 대응쌍 $(\mathbf{P},\mathbf{P}^{'})$는
</p>

\begin{equation}
  \begin{aligned}
    (\mathbf{P},\mathbf{P}^{'}) = ([\mathbf{I}|0], \ [\mathbf{R}|\mathbf{t}])
  \end{aligned}
\end{equation}
<p>
가 되므로 이 때 <b>Fundamental Matrix $\mathbf{F}= \mathbf{t}^{&and;}\mathbf{R}$이고 해당 행렬을 특별히 Essential Matrix $\mathbf{E}$</b> 라고 한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} = \mathbf{t}^{\wedge}\mathbf{R}
  \end{aligned}
\end{equation}
<p>
Essential Matrix은 $3\times 3$크기의 정방행렬이며 $\mathbf{E} \in \mathbb{R}^{3\times 3}$정규화된 이미지 좌표계에서 점들 간의 상간관계 $\bar{\mathbf{x}} &harr; \bar{\mathbf{x}}^{'}$를 표현할 때 사용한다.
</p>

\begin{equation}
  \begin{aligned}
    \bar{\mathbf{x}}^{'T}\mathbf{E}\bar{\mathbf{x}} = 0
  \end{aligned}
\end{equation}
<p>
이 때, $\bar{\mathbf{x}} = \mathbf{K}^{-1}\mathbf{x}, \bar{\mathbf{x}}^{'} = \mathbf{K}^{-1}\mathbf{x}^{'}$이므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{'T}\mathbf{K}^{'-T}\mathbf{E}\mathbf{K}^{-1}\mathbf{x} = 0
  \end{aligned}
\end{equation}
<p>
이 성립하여 Fundamental Matrix $\mathbf{F}$와 Essential Matrix $\mathbf{E}$의 관계는 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} = \mathbf{K}^{'-T}\mathbf{E}\mathbf{K}^{-1}
  \end{aligned}
\end{equation}
</div>

<div id="outline-container-org772c3b4" class="outline-4">
<h4 id="org772c3b4"><span class="section-number-4">3.8.1</span> Properties of the essential matrix</h4>
<div class="outline-text-4" id="text-3-8-1">
<p>
<b>임의의 정방행렬 $\mathbf{E}&isin; \mathbb{R}^{3&times; 3}$이 Essential Matrix이기 위한 필요충분조건은 $\mathbf{E}$의 가장 큰 두 특이값 $\sigma_{1}, \sigma_{2}$값이 동일하고 세번째 특이값 $&sigma;_{3}=0$인 조건</b> 이다.
</p>
</div>
</div>

<div id="outline-container-orgac51fa6" class="outline-4">
<h4 id="orgac51fa6"><span class="section-number-4">3.8.2</span> Proof</h4>
<div class="outline-text-4" id="text-3-8-2">
<p>
카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{'}) = ([\mathbf{I}|0], \ [\mathbf{R}|\mathbf{t}])$에 대한 Fundamental Matrix $\mathbf{F}$가 있다고 하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} = \mathbf{t}^{\wedge}\mathbf{R} = \mathbf{SR}
  \end{aligned}
\end{equation}
<p>
이 된다. 직교행렬 $\mathbf{W}$와 반대칭행렬 $\mathbf{Z}$를 다음과 같이 정의하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{W} = \begin{bmatrix} 0&amp;-1&amp; \\ 1&amp;0&amp; \\ &amp;&amp;1 \end{bmatrix} \\
    &amp; \mathbf{Z} = \begin{bmatrix} 0&amp;1&amp; \\ -1&amp;0&amp; \\ &amp;&amp;0 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
두 행렬은 $\mathbf{Z} = \begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}\mathbf{W}$관계가 성립한다. 반대칭행렬 $\mathbf{S}$가 rank 2를 가지는 경우 $\mathbf{S}$는 항상 기저(basis)를 변경하여 $\mathbf{Z}$의 형태로 변경할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{S} \sim \mathbf{U}\mathbf{Z}\mathbf{U}^{T}
  \end{aligned}
\end{equation}
<p>
이를 사용하여 Fundamental Matrix $\mathbf{F}$를 전개하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} &amp; = \mathbf{SR} \\
    &amp; = \mathbf{UZU}^{T}\mathbf{R} \\
    &amp; = \mathbf{UZWW}^{T}\mathbf{U}^{T}\mathbf{R} \ \ (\because \ \mathbf{WW}^{T} = \mathbf{I})\\
    &amp; = \mathbf{UZW}(\mathbf{W}^{T}\mathbf{U}^{T}\mathbf{R})
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{W}^{T}\mathbf{U}^{T}\mathbf{R}$은 직교행렬(orthogonal matrix)이 되고 $\mathbf{ZW}= \begin{bmatrix}1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}$이 된다. 따라서 Fundamental Matrix $\mathbf{F}$를 특이값 분해(SVD)하면
</p>


\begin{equation}
  \begin{aligned}
    \mathbf{F} &amp; = \mathbf{U}\mathbf{D}\mathbf{V}^{T}  \sim \mathbf{U} \begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix} \mathbf{V}^{T}
  \end{aligned}
\end{equation}
<p>
꼴이 되므로 <b>$\mathbf{F}$의 가장 큰 두 특이값은 같으며 마지막 특이값은 0이 된다. 이에 따라 Fundamental Matrix $\mathbf{F}$는 Essential Matrix $\mathbf{E}$의 성질을 만족하므로 Essential Matrix</b> 가 된다.
</p>

<p>
반대로 임의의 정방행렬 $\mathbf{E}&isin; \mathbb{R}^{3&times; 3}$의 특이값 분해(SVD)가
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} \sim \mathbf{U} \begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}\mathbf{V}^{T}
  \end{aligned}
\end{equation}
<p>
을 만족하는 경우 이는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} &amp; \sim \mathbf{U} \begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}\mathbf{V}^{T} \\
     &amp; = \mathbf{UZWW}^{T}\mathbf{V} \\
     &amp; = \mathbf{UZU}^{T}(\mathbf{UWW}^{T}\mathbf{V}^{T}) \\
     &amp; = \mathbf{SR} \\
     &amp; = \mathbf{e}^{\wedge} \mathbf{R}
  \end{aligned}
\end{equation}
<p>
이 된다. 따라서 <b>이 때 $\mathbf{E}$는 카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{'}) = ([\mathbf{I}|0], [\mathbf{e}|\mathbf{R}])$에 대응하는 Fundamental Matrix가 된다.</b>
</p>
</div>
</div>
</div>

<div id="outline-container-org034e1e8" class="outline-3">
<h3 id="org034e1e8"><span class="section-number-3">3.9</span> Extraction of cameras from the essential matrix</h3>
<div class="outline-text-3" id="text-3-9">
<p>
Essential Matrix $\mathbf{E}$가 다음과 같이 주어졌을 때
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} = \mathbf{U}\begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}\mathbf{V}^{T}
  \end{aligned}
\end{equation}
<p>
행렬 $\mathbf{E}$는 SR Factorization을 통해 $\mathbf{R}, \mathbf{t}$를 분해할 수 있다. 이 때, <b>$\mathbf{E}$는 서로 부호가 다른 두 개의 SR Factorization 해를 가진다(up to sign).</b> 행렬 $\mathbf{E}$는 다음과 같이 분해할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} &amp; \sim \mathbf{U} \begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}\mathbf{V}^{T} \\
     &amp; = \mathbf{UZWW}^{T}\mathbf{V} \\
     &amp; = \mathbf{UZU}^{T}(\mathbf{UWW}^{T}\mathbf{V}^{T}) \\
     &amp; = \mathbf{SR} 
  \end{aligned}
\end{equation}
<p>
이 때, 직교행렬 $\mathbf{W}= \begin{bmatrix}0&amp;-1&amp; \\ 1&amp;0&amp; \\ &amp;&amp;1 \end{bmatrix}$이고 $\mathbf{W}^{T} = \begin{bmatrix}0&amp;1&amp; \\ -1&amp;0&amp; \\ &amp;&amp;1 \end{bmatrix}$일 때 $\mathbf{W}^{T} = \begin{bmatrix} -1&amp;&amp; \\ &amp;-1&amp; \\ &amp;&amp;1 \end{bmatrix}\mathbf{W}$관계가 성립한다. 따라서 <b>대각행렬 $\begin{bmatrix}1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}$은 $\mathbf{ZW}= -\mathbf{ZW}^{T}$와 같이 부호가 다른 두 개의 행렬로 분해가 가능</b> 하다.
</p>

<p>
따라서 Essential Matrix $\mathbf{E}$는 다음과 같이 2개의 행렬로 분해가 가능하다.
</p>
\begin{equation}
  \begin{aligned}
    \mathbf{E} &amp; = (\mathbf{UZU}^{T})(\mathbf{UWV}^{T}) = \mathbf{S}_{0}\mathbf{R}_{0}\\
    &amp; = (\mathbf{UZU}^{T})(\mathbf{UW}^{T}\mathbf{V}^{T}) =\mathbf{S}_{0}\mathbf{R}_{0}^{'}\\
  \end{aligned}
\end{equation}
<p>
Essential Matrix $\mathbf{E}$가 위 두 가지 케이스로만 분해된다는 것을 증명하려면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} = \mathbf{S}_{0}\mathbf{R}_{0} = \mathbf{SR}
  \end{aligned}
\end{equation}
<p>
에 대하여 $\mathbf{S}= \mathbf{S}_{0}, \mathbf{R}= \mathbf{R}_{0}, \mathbf{R}_{0}^{'}$임을 증명해야 한다.
</p>

<p>
반대칭행렬 $\mathbf{S}, \mathbf{S}_{0}$는 rank가 2인 행렬이므로 $\mathbf{S}_{0}^{T} = \mathbf{s}^{&and;}, \mathbf{S}^{T} = \mathbf{s}^{&and;}$과 같이 벡터 형태로 나타낼 수 있고
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{s}, \mathbf{s}_{0} \in \text{Nul } \mathbf{E}^{T}
  \end{aligned}
\end{equation}
<p>
과 같이 $\mathbf{E}$의 Left Null Space에 포함된다. 따라서 $\mathbf{s}, \mathbf{s}_{0}$는 비례관계가 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{s} = \alpha \mathbf{s}_{0} \ \ \ \alpha \neq 0 \in \mathbb{R}
  \end{aligned}
\end{equation}
<p>
위 식에 따라 $\mathbf{SR}= &alpha; \mathbf{S}_{0}\mathbf{R}_{0}$이 성립하고 <b>이 때 $\| \mathbf{R}\| = \| \mathbf{R}_{0} \| = 1$이므로 Frobenius Norm을 비교해보면 $&alpha; = &plusmn; 1$인 것</b> 을 알 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{S} = \pm \mathbf{S}_{0}
  \end{aligned}
\end{equation}
<p>
다음으로 $\mathbf{R}= \mathbf{R}_{0}, \mathbf{R}_{0}^{'}$라는 것을 증명한다. 지금까지 구한 결과에 따라 Essential Matrix $\mathbf{E}$는 다음과 같이 쓸 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} &amp; = \mathbf{U} \begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix} \mathbf{V}^{T} = \mathbf{S}_{0}\mathbf{R} = \mathbf{S}_{0}(\mathbf{UXV}^{T}) \quad \text{where, } \mathbf{X} = \mathbf{U}^{T}\mathbf{RV} \\
    &amp; = \mathbf{U}(\mathbf{ZX})\mathbf{V}^{T}
  \end{aligned}
\end{equation}
<p>
이 때 $\mathbf{ZX}= \begin{bmatrix}1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}= \begin{bmatrix}0&amp;1&amp; \\ -1&amp;0&amp; \\ &amp;&amp;0 \end{bmatrix}\mathbf{X}$이므로 이를 전개하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{X} &amp; = \begin{bmatrix} 0&amp;-1&amp; \\ 1&amp;0&amp; \\ &amp;&amp;\pm1 \end{bmatrix} \\
    &amp; = \mathbf{W} = -\mathbf{W}^{T}
  \end{aligned}
\end{equation}
<p>
이므로 <b>따라서 부호의 변화를 포함한(up to sign) $\mathbf{R}= \mathbf{R}_{0}, \mathbf{R}_{0}^{'}$가 성립한다.</b>
</p>
</div>
</div>

<div id="outline-container-org1c8a518" class="outline-3">
<h3 id="org1c8a518"><span class="section-number-3">3.10</span> Geometrical interpretation of the four solutions</h3>
<div class="outline-text-3" id="text-3-10">
<p>
Essential Matrix $\mathbf{E}$는 다음과 같이 나타낼 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{X} &amp; = \begin{bmatrix} 0&amp;-1&amp; \\ 1&amp;0&amp; \\ &amp;&amp;\pm1 \end{bmatrix} \\
    &amp; = \mathbf{S}_{0}\mathbf{R}_{0}
  \end{aligned}
\end{equation}
<p>
여기서 반대칭행렬 $\mathbf{S}_{0}^{T} = \mathbf{s}_{0}^{&and;}$에서 $\mathbf{s}_{0}$는 $\mathbf{E}$의 Left Null Space에 포함된다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{s}_{0} \in \text{Nul }\mathbf{E}^{T}
  \end{aligned}
\end{equation}
<p>
이 때, <b>$\mathbf{s}_{0}$는 행렬 $\mathbf{U}$의 세 번째 열(third column)인 $\mathbf{u}_{3}$가 된다.</b>
</p>

<p>
$\mathbf{E}= \mathbf{t}^{&and;}\mathbf{R}$을 어떻게 분해하느냐에 따라 총 네 가지 해가 존재한다. 우선 $\mathbf{t}$를 보면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{t} = \pm \mathbf{u}_{3}
  \end{aligned}
\end{equation}
<p>
이는 두 카메라 $\mathbf{C}, \mathbf{C}^{'}$가 주어졌을 때 어느 카메라를 원점으로 잡는가에 따라 두 가지 해가 존재함을 의미한다. 다음으로 $\mathbf{R}$을 보면, $\mathbf{R}= \mathbf{UW}^{T}\mathbf{V}^{T}$인 경우
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} = [\mathbf{UW}^{T}\mathbf{V}^{T} \ | \ \mathbf{u}_{3}]
  \end{aligned}
\end{equation}
<p>
가 되고 이를 다시 쓰면 
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} &amp; = [\mathbf{UW}^{T}\mathbf{V}^{T} \ | \ \mathbf{u}_{3}] \\
    &amp; = [\mathbf{UWV}^{T}(\mathbf{V}\mathbf{W}^{T}\mathbf{W}^{T}\mathbf{V}^{T})\ | \ \mathbf{u}_{3}] \\
    &amp; = [\mathbf{UW}^{T}\mathbf{V} \ | \ \mathbf{u}_{3}] \begin{bmatrix} \mathbf{VW}^{T}\mathbf{W}^{T}\mathbf{V}^{T} &amp; \\ &amp; 1 \end{bmatrix} \\
    &amp; = [\mathbf{UW}^{T}\mathbf{V} \ | \ \mathbf{u}_{3}] \begin{bmatrix} \mathbf{V}\begin{pmatrix} -1&amp;&amp; \\&amp;-1&amp; \\&amp;&amp;1 \end{pmatrix}\mathbf{V}^{T} &amp; \\ &amp; 1 \end{bmatrix} \\
  \end{aligned}
\end{equation}
<p>
이 성립한다. 이 때 $\mathbf{VW}^{T}\mathbf{W}^{T}\mathbf{V}^{T}$는 Baseline의 수직한 방향 2개를 상하대칭하는 행렬이 된다. 즉, <b>Baseline을 축으로 180 degree 회전하는 형태</b> 가 된다.
</p>
</div>
</div>
</div>

<div id="outline-container-orgebc7505" class="outline-2">
<h2 id="orgebc7505"><span class="section-number-2">4</span> 3D Reconstruction of Cameras and Structure</h2>
<div class="outline-text-2" id="text-4">
<p>
이전 섹션에서 언급했듯이 <b>Fundamental Matrix $\mathbf{F}$는 여러 카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{'})$에 대하여 사영모호성(projective ambiguity)이 존재하기 때문에 결과물인 $\mathbf{P}, \mathbf{P}^{'}$를 통해 계산한 3차원 공간 상의 점 또한 모호성을 가지게 된다.</b> 해당 섹션에서는 Scene Constraint와 Internal Constraint를 사용하여 모호성을 제거하는 방법에 대해서 설명한다.
</p>
</div>

<div id="outline-container-org01cb9a0" class="outline-3">
<h3 id="org01cb9a0"><span class="section-number-3">4.1</span> The projective reconstruction theorem</h3>
<div class="outline-text-3" id="text-4-1">
<p>
두 카메라의 이미지 평면 상 대응쌍 점들인 $\mathbf{x}, \mathbf{x}^{'}$이 충분히 주어져서 이를 통해 Fundamental Matrix $\mathbf{F}$를 구했다고 가정해보자. 이 때, 사영모호성으로 인해 다음과 같은 두 카메라 행렬 대응쌍
</p>

\begin{equation}
  \begin{aligned}
    &amp; (\mathbf{P}_{1}, \mathbf{P}_{1}^{'}, \{\mathbf{X}_{1,i}\}) \\
    &amp; (\mathbf{P}_{2}, \mathbf{P}_{2}^{'}, \{\mathbf{X}_{2,i}\}) \\
  \end{aligned}
\end{equation}
<p>
이 동일한 Fundamental Matrix $\mathbf{F}$를 갖게 되는 경우 
</p>

\begin{equation}
  \begin{aligned}
    &amp; (\mathbf{P}_{2}, \mathbf{P}_{2}^{'}, \{\mathbf{X}_{2,i}\}) = \mathbf{H}\cdot (\mathbf{P}_{1}, \mathbf{P}_{1}^{'}, \{\mathbf{X}_{1,i}\})  \\
  \end{aligned}
\end{equation}
<p>
를 만족하는 Homography 행렬 $\mathbf{H}&isin; \text{PGL}_{4}$가 반드시 존재한다. 이 때 $\cdot$연산은 다음과 같이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P}_{2} = \mathbf{H}\cdot\mathbf{P}_{1} = \mathbf{P}_{1}\mathbf{H}^{-1} \\
    &amp; \mathbf{P}_{2}^{'} = \mathbf{H}\cdot\mathbf{P}_{1} = \mathbf{P}_{1}^{'}\mathbf{H}^{-1} \\
    &amp;\mathbf{X}_{2i} = \mathbf{H}\cdot \mathbf{X}_{1i} = \mathbf{H}\mathbf{X}_{1i}
  \end{aligned}
\end{equation}
</div>

<div id="outline-container-orgde831ad" class="outline-4">
<h4 id="orgde831ad"><span class="section-number-4">4.1.1</span> Proof</h4>
<div class="outline-text-4" id="text-4-1-1">
<p>
이전 섹션에서 동일한 Fundamental Matrix $\mathbf{F}$를 공유하는 카메라 행렬 대응쌍 사이에 $\mathbf{P}_{2} = \mathbf{P}_{1}\mathbf{H}^{-1}, \mathbf{P}_{2}^{'} =\mathbf{P}_{1}^{'}\mathbf{H}^{-1}$를 만족하는 Homography 행렬 $\mathbf{H}&isin; \mathbb{R}^{4&times; 4}$가 존재한다는 것을 증명하였다. 이를 적용해보면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P}_{2}\mathbf{X}_{2i} = \mathbf{P}_{1}\mathbf{H}^{-1}\mathbf{X}_{2i} = \mathbf{x}_{i} = \mathbf{P}_{1}\mathbf{X}_{1i} \\
    &amp; \mathbf{P}_{2}^{'}\mathbf{X}_{2i} = \mathbf{P}_{1}^{'}\mathbf{H}^{-1}\mathbf{X}_{2i} = \mathbf{x}_{i}^{'} = \mathbf{P}_{1}^{'}\mathbf{X}_{1i}
  \end{aligned}
\end{equation}
<p>
가 성립한다. $\mathbf{P}_{1}, \mathbf{P}_{2}$에 의해 Back Projection된 직선을 $\mathcal{R}$이라고 하고 $\mathbf{P}_{1}^{'}, \mathbf{P}_{2}^{'}$에 의해 Back Projection된 직선을 $\mathcal{R}^{'}$이라고 하면
</p>

\begin{equation}
  \begin{aligned}
    \{\mathbf{H}^{-1}\mathbf{X}_{2i}, \mathbf{X}_{1i}\} \in \mathcal{R} \cap \mathcal{R}^{'}
  \end{aligned}
\end{equation}
<p>
와 같이 3차원 공간 상의 점 $\{\mathbf{H}^{-1}\mathbf{X}_{2i}, \mathbf{X}_{1i}\}$는 두 직선의 교차점이 된다. 따라서 <b>두 직선 $\mathcal{R}, \mathcal{R}^{'}$이 Baseline과 같이 동일한 직선인 경우를 제외하면 $\{\mathbf{H}^{-1}\mathbf{X}_{2i}, \mathbf{X}_{1i}\}$는 교차점인 한 점을 의미</b> 하므로
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{H}^{-1}\mathbf{X}_{2i} = \mathbf{X}_{1i} \\
    &amp; \mathbf{X}_{2i} = \mathbf{H}\mathbf{X}_{1i}
  \end{aligned}
\end{equation}
<p>
가 성립한다. 따라서 추가적인 기하학적 원리를 사용하지 않으면 위와 같은 상황에서는 사영기하의 특성까지(up to projectivity) 복원할 수 있다.
</p>
</div>
</div>
</div>

<div id="outline-container-org6ca8de0" class="outline-3">
<h3 id="org6ca8de0"><span class="section-number-3">4.2</span> Stratified reconstruction</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Fundamental Matrix $\mathbf{F}$를 사용하여 계산한 카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{'})$의 사영모호성 문제를 해결하기 위해 Ground Truth 카메라 행렬 대응쌍인
</p>

\begin{equation}
  \begin{aligned}
    (\mathbf{P}_{0}, \mathbf{P}_{0}^{'}, \{\hat{\mathbf{X}_{i}}\})
  \end{aligned}
\end{equation}
<p>
이 존재한다고 가정하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; (\mathbf{P}_{1}, \mathbf{P}_{1}^{'}, \{\mathbf{X}_{i}\}) = \mathbf{H}\cdot(\mathbf{P}_{0}, \mathbf{P}_{0}^{'}, \{\hat{\mathbf{X}_{i}}\}) \\
    &amp; \mathcal{T} = \mathbf{H}\cdot \mathcal{T}_{0}
  \end{aligned}
\end{equation}
<p>
을 만족하는 Homography 행렬 $\mathbf{H}$가 존재한다. 이 때, 이미지 평면 상에서 평행한 직선의 특성을 활용하여 Affine Reconstruction을 수행한 다음, 이미지 평면 상에서 직교한 선들의 특성을 사용하여 Similarity Reconstruction을 순차적으로 수행한다.
</p>
</div>

<div id="outline-container-orgfe9b943" class="outline-4">
<h4 id="orgfe9b943"><span class="section-number-4">4.2.1</span> The step to affine reconstruction</h4>
<div class="outline-text-4" id="text-4-2-1">
<p>
Affine Reconstruction 단계에서는 평행한 직선들의 특성을 보존하는 Homography 행렬 $\mathbf{H}_{a}$를 찾아야 한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{a}(\pi_{\infty}) = \pi_{\infty}
  \end{aligned}
\end{equation}
<p>
3차원 공간 상의 점들의 집합 $\{\mathbf{X}_{i}\}$를 사용하여 소실점을 3개 이상 구한 경우 이미지 평면에 투영된 무한대 평면 $&pi;_{&infin;}^{'}$를 계산할 수 있다. 이미지 평면 상에 투영된 무한대 평면 $&pi;_{&infin;}^{'}$를
</p>

\begin{equation}
  \begin{aligned}
    \pi_{\infty}^{'} = \begin{bmatrix} a &amp; b &amp; c &amp; 1  \end{bmatrix}^{T}
  \end{aligned}
\end{equation}
<p>
라고 하면 실제 무한대 평면 $&pi;_{&infin;} = \begin{bmatrix}0&amp;0&amp;0&amp;1 \end{bmatrix}$을 $&pi;_{&infin;}^{'}$로 보내는 Homography 행렬 $\mathbf{H}_{a}$는 다음과 같이 구할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{a} = \begin{bmatrix} &amp;\mathbf{I}_{3}&amp; &amp; 0 \\ a&amp;b&amp;c&amp;1 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
이 때 $\mathbf{H}_{a}^{T}\pi_{\infty} = \pi_{\infty}^{'}$관계가 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \pi_{\infty}  = \mathbf{H}_{a}^{-1} \pi_{\infty}^{'}
  \end{aligned}
\end{equation}
<p>
이를 $\mathcal{T}$에 적용하면 
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathcal{T}_{a} = \mathbf{H} \cdot \mathcal{T} \\
    &amp; (\mathbf{PH}_{a}^{-1}, \mathbf{P}^{'}\mathbf{H}_{a}^{-1}, \{\mathbf{H}_{a}\mathbf{X}_{i}\}) = \mathbf{H} \cdot (\mathbf{P}, \mathbf{P}^{'}, \{\mathbf{X}_{i}\})
  \end{aligned}
\end{equation}
<p>
연산을 통해 이미지를 Affine Reconstruction할 수 있다. 여기까지 진행했다면 Ground Truth $\mathcal{T}_{0}$와 $\mathcal{T}_{a}$는 Affine만큼만 차이가 나게 된다. 즉, 평행한 직선들은 모두 복원되었으나 아직 직교한 직선들은 복원되지 않은 상태이다.
</p>
</div>
</div>
</div>


<div id="outline-container-org2fe4e6d" class="outline-3">
<h3 id="org2fe4e6d"><span class="section-number-3">4.3</span> The step to metric reconstruction</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Metric Reconstruction 단계에서는 직교하는 선들을 보존하는 Homography 행렬 $\mathbf{H}_{s}$를 찾아야 한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{s}(\Omega_{\infty}) = \Omega_{\infty}
  \end{aligned}
\end{equation}
<p>
이 때, $&Omega;_{&infin;}$는 무한대 평면상에 존재하는 Absolute Conic을 의미한다. Affine Reconstruction 단계에서 얻은 $\mathcal{T}_{a}$는 무한대 평면 $&pi;_{&infin;}$가 실제 무한대에 위치하게 된다. 이 때, $\{\mathbf{X}_{i}\}$들 중 직교하는 점들을 사용하여 $&Omega;_{&infin;}$를 구할 수 있다. 직교하는 점들의 대응쌍을 $\mathbf{d}_{1}, \mathbf{d}_{2}$라고 하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{d}_{1}^{T}\omega \mathbf{d}_{2} = 0
  \end{aligned}
\end{equation}
<p>
을 만족하는 $&omega;$를 찾을 수 있고 $&omega;$는 이미지 평면 상에 투영된 Absolute Conic $&Omega;_{&infin;}$가 된다.
</p>

<p>
카메라 행렬 $\mathbf{P}= \mathbf{K}[\mathbf{R}| \mathbf{t}] = [\mathbf{M}\ | \ \mathbf{m}]$가 주어졌을 때 무한대 평면 $&pi;_{&infin;}$는 $\mathbf{M}$에 의해 이미지 평면 $&pi;$에 투영된다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{M}: \pi_{\infty} \mapsto \pi
  \end{aligned}
\end{equation}
<p>
반대로 $\mathbf{M}^{-1}$는 $\pi$평면 상의 점들을 무한대 평면 $&pi;_{&infin;}$으로 보내는 매핑이라고 할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{M}^{-1}: \pi \mapsto \pi_{\infty}
  \end{aligned}
\end{equation}
<p>
이 때, 이미지 평면에 투영된 Absolute Conic에 $\mathbf{M}^{-1}$을 적용하면 $\mathbf{M}^{-1}(&omega;) = ~{&Omega;}_{&infin;}$가 된다. $~{&Omega;}_{&infin;}$는 아직 Metric Reconstruction이 되기 전이므로 $&Omega; &ne; ~{&Omega;}_{&infin;}$이다. 둘 사이에는 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{s}(\tilde{\Omega}_{\infty}) = \Omega_{\infty} = \mathbf{I}_{3}
  \end{aligned}
\end{equation}
<p>
Metric Reconstruction을 수행하는 Homography $\mathbf{H}_{s} = \begin{bmatrix}\mathbf{A}^{-1} &amp; \\ &amp; 1 \end{bmatrix}$이라고 하고 이 때 이미지 평면을 $\pi_{s}$, 카메라 행렬을 $\mathbf{P}_{s}$라고 하면 $\mathbf{H}_{s}(\pi) = \pi_{s}$관계가 성립하고 무한대 평면을 Homography 변환한 공식은
</p>

\begin{equation}
  \begin{aligned}
    &amp; \pi_{\infty} \mathbf{A}^{-1} = \pi_{\infty,s} \\ 
    &amp; \mathbf{H}_{s}|_{\pi_{\infty}} = \mathbf{A}^{-1} \\
  \end{aligned}
\end{equation}
<p>
가 된다. 각각 무한대 평면 $&pi;_{&infin;}, &pi;_{&infin;,s}$을 이미지 평면 $&pi;, &pi;_{s}$에 투영하는 공식은
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P}|_{\pi_{\infty}} = \mathbf{M} \\
    &amp; \mathbf{P}_{s}|_{\pi_{\infty}} = \mathbf{MA}
  \end{aligned}
\end{equation}
<p>
과 같이 변형된다. 따라서 $\mathbf{H}_{s}(~{&Omega;}_{&infin;})$는 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{s}(\tilde{\Omega}_{\infty}) &amp; = (\mathbf{A}^{-1})^{-T} \tilde{\Omega}_{\infty} \mathbf{A} \\
    &amp; = \mathbf{A}^{T} (\mathbf{M}^{T}\omega \mathbf{M})\mathbf{A}  
  \end{aligned}
\end{equation}
<p>
따라서 Absolute Conic 특성에 의해 $\mathbf{A}^{T} (\mathbf{M}^{T}&omega; \mathbf{M})\mathbf{A}$는 $\mathbf{I}$이 되어야 하므로
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{A}^{T} (\mathbf{M}^{T}\omega \mathbf{M})\mathbf{A} = \mathbf{I} \\
    &amp; (\mathbf{M}^{T} \omega \mathbf{M})^{-1} = \mathbf{AA}^{T} 
  \end{aligned}
\end{equation}
<p>
가 성립한다. 결론적으로 $\mathbf{H}_{s} = \begin{bmatrix}\mathbf{A}^{-1} &amp; \\ &amp; 1 \end{bmatrix}$를 구하기 위해서는 <b>이미지 평면 상에서 직교하는 직선들의 특성을 사용하여 $&omega;$를 구한 후, $(\mathbf{M}^{T} &omega; \mathbf{M})^{-1}$를 Cholesky Decomposition하여 $\mathbf{AA}^{T}$를 구한다. 이를 통해 $\mathbf{A}^{-1}$값을 구할 수 있고 최종적으로 Metric Reconstruction을 수행하는 Homography $\mathbf{H}_{s}$를 구할 수 있다.</b>
</p>
</div>
</div>
</div>

<div id="outline-container-orgef22d46" class="outline-2">
<h2 id="orgef22d46"><span class="section-number-2">5</span> Computation of the Fundamental Matrix $\mathbf{F}$</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org8f0f4b4" class="outline-3">
<h3 id="org8f0f4b4"><span class="section-number-3">5.1</span> Basic equations</h3>
<div class="outline-text-3" id="text-5-1">
<p>
두 카메라의 대응점쌍 $\mathbf{x}&harr; \mathbf{x}^{'}$이 존재할 때
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{'T}\mathbf{Fx} = 0
  \end{aligned}
\end{equation}
<p>
을 만족하는 3x3 크기의 행렬 $\mathbf{F}$를 Fundamental Matrix라고 한다. 만약 세 개의 대응점쌍 $\mathbf{x} = (\mathbf{x}_{1}, \mathbf{x}_{2}, \mathbf{x}_{3})$, $\mathbf{x}^{'} = (\mathbf{x}_{1}^{'}, \mathbf{x}_{2}^{'}, \mathbf{x}_{3}^{'})$이 주어졌을 때 $\mathbf{x}^{'T}\mathbf{Fx}=0$이를 다시 정리하면 $&sum; \mathbf{x}^{'}_{i}\mathbf{x}_{j}\mathbf{f}_{ij}=0$과 같이 정리할 수 있다. 해당 식은 선형시스템
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{A} \mathbf{f} = 0
  \end{aligned}
\end{equation}
<p>
꼴로 나타낼 수 있고 이 때 $\mathbf{A}$와 $\mathbf{f}$를 풀어쓰면 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{A} = (\mathbf{a}_{ik}) \in \mathbb{R}^{N \times 9}, \ \ \text{i-th row is} \ (\mathbf{x}_{1}^{'i}\mathbf{x}_{1}^{i}, \mathbf{x}_{1}^{'i}\mathbf{x}_{2}^{i},\cdots, \mathbf{x}_{3}^{'i}\mathbf{x}_{3}^{i}) \\
    &amp; \mathbf{f} = (\mathbf{f}_{11}, \mathbf{f}_{12}, \mathbf{f}_{13}, \cdots, \mathbf{f}_{33})^{T} \in \mathbb{R}^{9\times 1}
  \end{aligned}
\end{equation}
<p>
만약 주어진 대응점쌍의 개수 $N$이 8보다 크고 노이즈가 없는 완벽한 데이터로 생성이 되었으면 $\mathbf{A}$는 rank 8 행렬이 되고 유일한 해 $\mathbf{f}$가 존재한다. 이 때 $\mathbf{f}$는 $\mathbf{A}$의 Null Space의 원소가 된다.
</p>

<p>
하지만 대부분의 경우 주어진 데이터에는 항상 노이즈가 존재하므로 $\mathbf{A}$행렬은 rank 9인 full rank 행렬이 된다. 이 때 해를 구하면 $\mathbf{f}$는 항상 영벡터가 계산되므로 $\| \mathbf{f}\| = 1$이라는 조건하에 $\|\mathbf{Af}\|$의 크기를 최소화하는 근사해 $\mathbf{f}$를 찾아야 한다. 해를 찾는 방법은 $\mathbf{A}$를 특이값 분해(SVD)한 다음
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{A} = \mathbf{UDV}^{T}
  \end{aligned}
\end{equation}
<p>
대각행렬 $\mathbf{D}$의 eigenvalue 중 가장 절대값이 작은 것에 대응되는 $\mathbf{V}$의 열벡터를 $\mathbf{f}$의 일반해로 간주한다. 해당 열벡터 $\mathbf{f}$가 $\|\mathbf{Af}\|$의 크기를 최소화하는 벡터가 되며 이를 Linear Solution이라고 부른다.
</p>

<p>
하지만 <b>이 때, Linear Solution $\mathbf{f}$로 복원한 $\mathbf{F}_{0}$가 rank 2 행렬임을 보장할 수 없다.</b> 수치적으로 해를 구하면 일반적으로 rank 3인 행렬이 나온다. 따라서 한 번 더 SVD를 사용하여 $\mathbf{F}_{0}$와 가장 가까운 rank 2 행렬을 찾아야 한다.
</p>


\begin{equation}
  \begin{aligned}
    \mathbf{F}_{0} = \mathbf{U}_{0}\mathbf{D}_{0}\mathbf{V}^{T}_{0}
  \end{aligned}
\end{equation}
<p>
이 때 대각행렬 $\mathbf{D}_{0} = \begin{bmatrix}&sigma;_{1}&amp;&amp; \\ &amp;&sigma;_{2}&amp; \\  &amp;&amp;&sigma;_{3} \end{bmatrix}$는 일반적으로 마지막 특이값 $&sigma;_{3}$가 0이 아니므로 rank 3인 행렬이 된다. 따라서 <b>임의로 $&sigma;_{3}=0$으로 변경한 행렬이 $\mathbf{F}_{0}$과 가장 가까운 rank 2 행렬이 된다.</b>
</p>
</div>

<div id="outline-container-orgd2cad84" class="outline-4">
<h4 id="orgd2cad84"><span class="section-number-4">5.1.1</span> The minimum case - seven point correspondences</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
7개의 대응점쌍이 주어진 경우 $\mathbf{A}&isin; \mathbb{R}^{7&times; 9}$인 rank 7 행렬이 된다. 이에 따라 Null Space의 차원이 2가 되므로 무수한 해가 존재한다. $\mathbf{Af}=0$의 풀어서 두 개의 선형독립인 Fundamental Matrix $\mathbf{F}_{1}, \mathbf{F}_{2}$를 구하고 
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} = \alpha \mathbf{F}_{1} + (1-\alpha)\mathbf{F}_{2}
  \end{aligned}
\end{equation}
<p>
를 통해 $\mathbf{F}$를 구한다. $\mathbf{F}$행렬의 rank는 2이므로 $det(\mathbf{F})=0$을 만족하게 되고 이에 따라 $&alpha;$에 대한 3차 방정식을 얻는다. 3차 방정식이 세 개의 실수해를 가지는 경우는 Degenerate Configuration이 된다.
</p>
</div>
</div>
</div>



<div id="outline-container-org4763c23" class="outline-3">
<h3 id="org4763c23"><span class="section-number-3">5.2</span> The normalized 8-point algorithm</h3>
<div class="outline-text-3" id="text-5-2">
<p>
행렬 $\mathbf{A}$는 주어진 대응점쌍 $\mathbf{x}&harr; \mathbf{x}^{'}$으로 구성된 행렬이므로 <b>대응점쌍들을 정규화(normalization)하지 않고 바로 해를 구하는 경우 $\mathbf{x}_{i} = (1000000,20000000,1)$과 같이 마지막 값에 비해서 처음 두 값의 크기가 매우 크게 되므로 수치적으로 불안정한 문제</b> 를 가진다. 따라서 $\mathbf{x}^{i}, \mathbf{x}^{i'}$를 Centroid가 0이고 Centroid로부터 평균거리가 $\sqrt{2}$가 되도록하는 Homography 변환 $\mathbf{H}, \mathbf{H}^{'}$를 적용한다.
</p>


\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}^{i} \rightarrow \mathbf{Hx}^{i} \\
    &amp; \mathbf{x}^{i'} \rightarrow \mathbf{H}^{'} \mathbf{x}^{i'} \\
  \end{aligned}
\end{equation}
<p>
이렇게 변환된 대응쌍점들을 사용하여 수치적으로 안정적인 Fundamental Matrix $\mathbf{F}^{'}$계산할 수 있다. 앞서 설명한 내용을 따라 $\mathbf{F}^{'}$를 계산한 다음 다시 원래의 대응점쌍 $\mathbf{x}&harr; \mathbf{x}^{'}$으로 복원하기 위해
</p>

\begin{equation}
  \begin{aligned}
    0 &amp; = (\mathbf{H}^{'}\mathbf{x}^{'})^{T}\mathbf{F}^{'}(\mathbf{Hx}) \\
    &amp; =  \mathbf{x}^{T}(\mathbf{H}^{'T} \mathbf{F}^{'}\mathbf{H})\mathbf{x}
  \end{aligned}
\end{equation}
<p>
처럼 $\mathbf{F}= \mathbf{H}^{'T} \mathbf{F}^{'}\mathbf{H}$를 통해 원래 대응점쌍의 Fundamental Matrix $\mathbf{F}$를 계산할 수 있다.
</p>
</div>

<div id="outline-container-org151e67d" class="outline-4">
<h4 id="org151e67d"><span class="section-number-4">5.2.1</span> Degenrate configurations</h4>
<div class="outline-text-4" id="text-5-2-1">
<p>
두 개의 카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{'}, \{\mathbf{X}^{i}\})$, $(\mathbf{Q}, \mathbf{Q}^{'}, \{\mathbf{Y}^{i}\})$가 다음의 조건을 만족하면 서로 <b>Conjugate Configuration</b> 이라고 한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{PX}^{i} = \mathbf{QY}^{i}, \mathbf{P}^{'}\mathbf{x}^{i} = \mathbf{Q}^{'}\mathbf{Y}^{'} \ \ \forall s \\
    &amp; (\mathbf{P}, \mathbf{P}^{}), (\mathbf{Q}, \mathbf{Q}^{'}) \ \ \text{share the same} \ \  \mathbf{F}
  \end{aligned}
\end{equation}
<p>
이 때, <b>Conjuate Configuration이 있는 카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{'}, \{\mathbf{X}^{i}\})$을 Critical Triple이라고 부른다.</b>
</p>

<p>
임의의 카메라 대응쌍 $\mathbf{P}, \mathbf{P}^{'}, \{\mathbf{X}^{i}\}$가 Critical Triple일 필요충분조건은 각각의 카메라 중심점 $\mathbf{C},\mathbf{C}^{'}$과 3차원 공간 상의 점 ${\mathbf{X}^{i}}$가 어떤 Ruled Quadric Surface, 즉 직선을 포함하는 Quadric Surface 상에 포함되는 것이다. 
</p>
</div>
</div>

<div id="outline-container-orgf00a38b" class="outline-4">
<h4 id="orgf00a38b"><span class="section-number-4">5.2.2</span> Proof</h4>
<div class="outline-text-4" id="text-5-2-2">
<p>
임의의 카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{'}, \{\mathbf{X}^{i}\})$이 Critical Triple이라는 것을 보이기 위해서는 이와 대응하는 카메라 행렬 대응쌍 $(\mathbf{Q}, \mathbf{Q}^{'}, \{\mathbf{Y}^{i}\})$이 같은 Fundamental Matrix $\mathbf{F}$를 가진다는 사실을 사용해야 한다. $\mathbb{P}^{3}$공간에서 이차곡면은 4x4 크기의 행렬로 정의된다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{S}_{p} := \mathbf{P}^{'}\mathbf{F}_{QQ^{'}}\mathbf{P}
  \end{aligned}
\end{equation}
<p>
여기서 이차곡면 $\mathbf{S}_{p} &isin; \mathbb{R}^{4&times; 4}$는 카메라 중심점 $\mathbf{C}, \mathbf{C}^{'}$과 3차원 공간 상의 점 $\{\mathbf{X}^{i}\}$를 포함해야 한다.
</p>

<p>
<b>$\mathbf{S}_{p}$는 Ruled Quadric Surface이므로 직선을 포함하고 있음을 보이면 되므로 카메라 중심선을 연결한 직선인 baseline을 $\mathbf{S}_{p}$가 포함하고 있음</b> 을 보이면 된다. baseline 위에 있는 임의의 점 $\mathbf{X}$가 존재할 때
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{S}_{p} \mathbf{X} = \mathbf{P}^{'}\mathbf{F}_{QQ^{'}}\mathbf{P}\mathbf{X} = 0 \quad \because \mathbf{F}_{QQ^{'}}\mathbf{PX} = 0
  \end{aligned}
\end{equation}
<p>
을 만족하므로 $\mathbf{S}_{p}$는 Ruled Quadric Surface임을 알 수 있다.
</p>

<p>
반대로, 카메라 중심점 $\mathbf{C},\mathbf{C}^{'}$와 3차원 공간 상의 점 $\{\mathbf{X}^{i}\}$가 $\mathbf{S}_{p}$에 속하면 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; (\mathbf{P}^{'}\mathbf{X}^{i})^{T}\mathbf{F}_{QQ^{'}}(\mathbf{PX}^{i}) = 0 \\
  \end{aligned}
\end{equation}
<p>
여기서 $\mathbf{x}^{'} = \mathbf{P}^{'}\mathbf{X}^{i}, \mathbf{x}= \mathbf{PX}^{i}$이고 $\mathbf{F}_{QQ^{'}}$이므로 $\mathbf{F}_{QQ^{'}}$에 대한 대응점 쌍이 $\mathbf{x}, \mathbf{x}^{'}$존재한다는 의미이다. 따라서
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}^{'} = \mathbf{P}^{'}\mathbf{X}^{i} = \mathbf{Q}^{'}\mathbf{Y}^{i} \\
    &amp; \mathbf{x} = \mathbf{P}\mathbf{X}^{i} = \mathbf{Q}\mathbf{Y}^{i} \\
  \end{aligned}
\end{equation}
<p>
를 만족하므로 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{'},\{\mathbf{X}^{i}\})$과 $(\mathbf{Q},\mathbf{Q}^{'},\{\mathbf{Y}^{i}\})$는 같은 Fundamental Matrix $\mathbf{F}= \mathbf{F}_{PP^{'}} = \mathbf{F}_{QQ^{'}}$를 공유하는 Conjugate Triple이라는 것을 알 수 있다.
</p>
</div>
</div>
</div>

<div id="outline-container-org77d1947" class="outline-3">
<h3 id="org77d1947"><span class="section-number-3">5.3</span> The Gold Standard method</h3>
<div class="outline-text-3" id="text-5-3">
<p>
이미지 평면 상의 대응점 쌍 $\mathbf{x}&harr; \mathbf{x}^{'}$는 일반적으로 노이즈를 포함하고 있으므로 이를 통해 Fundamental Matrix $\mathbf{F}$를 정확하게 계산할 수 없고 $\|\mathbf{Af}\|$의 크기를 최소화하는 근사해 $\mathbf{F}^{'}$를 계산할 수 밖에 없다. 따라서 <b>$\mathbf{F}^{'}$를 더 정확하게 계산하기 위해 2D Homography 문제와 마찬가지로 주어진 데이터 $\mathbf{x}, \mathbf{x}^{'}$를 Ground Truth $\hat{\mathbf{x}}, \hat{\mathbf{x}}^{'}$과 가까워지게 보정하는 방법을 The Gold Standard method</b> 라고 한다.
</p>

<ul class="org-ul">
<li>8개 이상의 대응점 쌍 $\mathbf{x}&harr; \mathbf{x}^{'}$이 주어졌을 때 우선 앞서 설명한 것과 같이 총 두 번 SVD를 사용하여 rank가 2인 Fundamental Matrix $\mathbf{F}_{0}$를 계산한다. 이 때, $\mathbf{F}_{0}$를 Linear Solution이라고 부른다.</li>
<li>다음으로 Epipole $\mathbf{e}, \mathbf{e}^{'}$에 대하여 다음 공식이 성립한다.</li>
</ul>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{e}^{'}\mathbf{F}_{0} = 0, \quad  \mathbf{F}_{0}\mathbf{e} = 0 \\
  \end{aligned}
\end{equation}
<ul class="org-ul">
<li>위 공식으로부터 $\mathbf{e}, \mathbf{e}^{'}$를 각각 계산한다.</li>
<li>Epipole을 계산하면 Caninocal Form의 카메라 행렬 $\mathbf{P}, \mathbf{P}^{'}$를 계산할 수 있다.</li>
</ul>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = [\mathbf{I}|0], \quad \mathbf{P}^{'} = [\mathbf{M}|\mathbf{m}] \\
    &amp; \text{where, } \ \mathbf{M} = \mathbf{e}^{'\wedge}\mathbf{F}, \ \mathbf{m} = \mathbf{e}^{'}
  \end{aligned}
\end{equation}
<ul class="org-ul">
<li>이를 통해 $\mathbf{x}, \mathbf{x}^{'}$의 Back-projection된 직선들을 각각 구할 수 있다.</li>
<li>두 Back-projection 직선과 가장 근접한 3차원 공간 상의 점 $\mathbf{X}^{i}$를 계산할 수 있다.</li>
<li>이미지 평면에 3차원 공간 상의 점 $\mathbf{X}^{i}$를 재투영(reprojection) 한다.</li>
</ul>

\begin{equation}
  \begin{aligned}
    &amp; \hat{\mathbf{x}} = \mathbf{PX}^{i} \\
    &amp; \hat{\mathbf{x}}^{'} = \mathbf{P}^{'}\mathbf{X}^{i} \\
  \end{aligned}
\end{equation}
<p>
다음과 같이 재투영 오차(reprojection error)를 Gauss-Newton, Levenerg-Marquardt 등과 같은 비선형 최적화 방법을 사용하여 최소화한다.
</p>

\begin{equation}
  \begin{aligned}
    \sum_{i} d(\mathbf{x} - \hat{\mathbf{x}})^{2} + d(\mathbf{x}^{'}, \hat{\mathbf{x}}^{'})^{2}
  \end{aligned}
\end{equation}
<p>
이 때 최적화되는 파라미터는 $\mathbf{X}^{i}$와 카메라 행렬 $\mathbf{P}^{'} = [\mathbf{M}|\mathbf{m}]$이다.
</p>
<hr />
</div>
</div>
</div>
<div id="outline-container-org5816cc3" class="outline-2">
<h2 id="org5816cc3"><span class="section-number-2">6</span> References</h2>
<div class="outline-text-2" id="text-6">
<p>
<a href="https://www.robots.ox.ac.uk/~vgg/hzbook/">Hartley, Richard, and Andrew Zisserman. Multiple view geometry in computer vision. Cambridge university press, 2003</a>
</p>
</div>
</div>
<div id="outline-container-org6d8d6e0" class="outline-2">
<h2 id="org6d8d6e0"><span class="section-number-2">7</span> Closure</h2>
<div class="outline-text-2" id="text-7">
<p>
PDF version is available at <a href="https://www.facebook.com/groups/slamkr/permalink/1187090471650595/">here</a>.
</p>
</div>
</div>
